{"version":3,"sources":["webpack:///./src/business/riskregister/Page.vue?3627","webpack:///./src/business/riskregister/RisksTable.vue?c202","webpack:///src/business/riskregister/RisksTable.vue","webpack:///./src/business/riskregister/RisksTable.vue?9fe1","webpack:///./src/business/riskregister/RisksTable.vue","webpack:///src/business/riskregister/Page.vue","webpack:///./src/business/riskregister/Page.vue?0bca","webpack:///./src/business/riskregister/Page.vue","webpack:///./src/common/Modals/RisksAddEditModal.vue?cc04","webpack:///src/common/Modals/RisksAddEditModal.vue","webpack:///./src/common/Modals/RisksAddEditModal.vue?fb86","webpack:///./src/common/Modals/RisksAddEditModal.vue","webpack:///./src/assets/policy.svg","webpack:///./src/business/riskregister/RisksTable.vue?a103","webpack:///./src/business/riskregister/Page.vue?7896","webpack:///./src/mixins/EtaggerMixin.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","pageTitle","staticRenderFns","attrs","directives","name","rawName","value","expression","domProps","on","searching","$event","target","composing","searchInput","clearInput","_e","filteredRisksComputed","length","staticStyle","loading","_l","risk","key","id","compliance_policies","toogleSections","policy","showLevel","impact","likelihood","badgeVariant","risk_level","dateToHuman","created_at","scopedSlots","_u","fn","proxy","risksComputed","deleteRisk","class","deletePolicy","component","inline","_t","modalId","riskId","hideModal","newEtag","submitUrl","undefined","initialrisk","etag","loadrisk","options","onChange","model","callback","$$v","$set","errors","levelOptions","onRiskChange","riskLevelName","slot","submit","mixins","props","String","risks","Array","Number","remindAt","type","Boolean","default","risksList","policyId","showRiskOption","data","isActive","methods","$bvModal","hide","Object","assign","concat","risksComputedAsOptions","e","preventDefault","compliance_policy_ids","map","includes","push","method","$store","event","resultRisk","riskLevelColor","riskLevelNum","getRiskLevelName","num","text","riskLevel","computed","canBeDraft","toId","httpMethod","watch","module","exports","etagInit","Math","random","EtaggerMixin","propertyName","prop","refreshMethodName","toUpperCase","substring"],"mappings":"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","file":"js/chunk-0ae47370.ebd526a3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"page-header\"},[_c('h2',{staticClass:\"page-header__title\"},[_vm._v(_vm._s(_vm.pageTitle))]),_c('div',{staticClass:\"page-header__actions\"},[_c('RisksAddEditModal',[_c('button',{staticClass:\"btn btn-dark\"},[_vm._v(\"New Risk\")])])],1)]),_c('div',{staticClass:\"card-body white-card-body card-body_full-height\"},[_c('RisksTable')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100\"},[_c('div',{staticClass:\"row m-b-20\"},[_c('div',{staticClass:\"col-lg-4 col-12\"},[_c('div',{staticClass:\"position-relative\"},[_c('b-icon',{staticClass:\"icon-searh\",attrs:{\"icon\":\"search\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchInput),expression:\"searchInput\"}],staticClass:\"form-control form-control_search\",attrs:{\"type\":\"text\",\"placeholder\":\"Search\"},domProps:{\"value\":(_vm.searchInput)},on:{\"keyup\":_vm.searching,\"input\":function($event){if($event.target.composing){ return; }_vm.searchInput=$event.target.value}}}),(_vm.isActive)?_c('button',{staticClass:\"btn-clear\",on:{\"click\":_vm.clearInput}},[_c('b-icon',{staticClass:\"icon-clear\",attrs:{\"icon\":\"x-circle\"}})],1):_vm._e()],1)]),(_vm.filteredRisksComputed.length !== 0 && _vm.searchInput)?_c('div',{staticClass:\"col-4\"},[_c('p',[_vm._v(\"Found \"+_vm._s(_vm.filteredRisksComputed.length)+\" \"+_vm._s(_vm.filteredRisksComputed.length === 1 ? 'result' : 'results'))])]):_vm._e()]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('Loading'),_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',{staticStyle:{\"width\":\"100%\"}},[_vm._v(\"Name\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',[_vm._v(\"Impact\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',[_vm._v(\"Likelihood\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',[_vm._v(\"Risk Level\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\",staticStyle:{\"width\":\"1%\"}},[_vm._v(\"Date Created\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\",attrs:{\"width\":\"35px\"}})])]),(!_vm.loading && _vm.filteredRisksComputed && _vm.filteredRisksComputed.length)?_c('tbody',[_vm._l((_vm.filteredRisksComputed),function(risk){return [_c('tr',{key:risk.id},[_c('td',[_c('div',{staticClass:\"d-flex align-items-center link truncate\"},[(risk.compliance_policies.length !== 0)?_c('div',{staticClass:\"dropdown-toggle\",attrs:{\"id\":(\"#sectionIcon-\" + (risk.id))},on:{\"click\":function($event){return _vm.toogleSections(risk.id)}}},[_c('b-icon',{staticClass:\"m-r-1 sm-icon\",attrs:{\"icon\":\"chevron-right\"}})],1):_vm._e(),_c('a',{staticClass:\"custom-text\",attrs:{\"href\":(\"/business/risks/\" + (risk.id))}},[_vm._v(_vm._s(risk.name))])]),(risk.compliance_policies)?_c('div',{staticClass:\"dropdown-items mb-2\",attrs:{\"id\":(\"#section-\" + (risk.id))}},[_c('ul',{staticClass:\"list-unstyled ml-3\"},_vm._l((risk.compliance_policies),function(policy){return _c('li',{key:policy.id,staticClass:\"mb-2\"},[_c('a',{staticClass:\"link custom-text\",attrs:{\"href\":(\"/business/compliance_policies/\" + (policy.id))}},[_c('img',{staticClass:\"icon-policy\",attrs:{\"src\":require(\"@/assets/policy.svg\")}}),_vm._v(_vm._s(policy.name))])])}),0)]):_vm._e()]),_c('td',[_vm._v(_vm._s(_vm.showLevel(risk.impact)))]),_c('td',[_vm._v(_vm._s(_vm.showLevel(risk.likelihood)))]),_c('td',[_c('b-badge',{staticClass:\"mr-2 badge-risk\",attrs:{\"variant\":_vm.badgeVariant(risk.risk_level)}},[_c('b-icon-exclamation-triangle-fill',{staticClass:\"mr-2\"}),_vm._v(_vm._s(_vm.showLevel(risk.risk_level)))],1)],1),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm.dateToHuman(risk.created_at)))]),_c('td',{staticClass:\"text-right\"},[_c('div',{staticClass:\"actions\"},[_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"xs\",\"variant\":\"none\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{staticClass:\"three-dots\",attrs:{\"icon\":\"three-dots\"}})]},proxy:true}],null,true)},[_c('RisksAddEditModal',{attrs:{\"risks\":_vm.risksComputed,\"riskId\":risk.id,\"inline\":false}},[_c('b-dropdown-item-button',[_vm._v(\"Edit\")])],1),_c('b-dropdown-item-button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteRisk(risk.id)}}},[_vm._v(\"Delete\")])],1)],1)])]),(risk.compliance_policies)?_vm._l((risk.compliance_policies),function(policy){return _c('tr',{key:(\"risk-\" + (risk.id) + \"-\" + (policy.id)),staticClass:\"d-none\",class:(\"risk-\" + (risk.id))},[_c('td',[_c('a',{staticClass:\"link custom-text policy-in-risk\",attrs:{\"href\":(\"/business/compliance_policies/\" + (policy.id))}},[_c('img',{staticClass:\"icon-policy\",attrs:{\"src\":require(\"@/assets/policy.svg\")}}),_vm._v(_vm._s(policy.name))])]),_c('td'),_c('td'),_c('td'),_c('td'),_c('td',{staticClass:\"text-right\"},[_c('div',{staticClass:\"actions\"},[_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"xs\",\"variant\":\"none\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{staticClass:\"three-dots\",attrs:{\"icon\":\"three-dots\"}})]},proxy:true}],null,true)},[_c('b-dropdown-item-button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deletePolicy(risk, policy.id)}}},[_vm._v(\"Unlink\")])],1)],1)])])}):_vm._e()]})],2):_vm._e()])],1)]),(!_vm.filteredRisksComputed.length && !_vm.loading)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col h-100 text-center\"},[_c('EmptyState')],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div.h-100\n    .row.m-b-20\n      .col-lg-4.col-12\n        .position-relative\n          b-icon.icon-searh(icon='search')\n          input.form-control.form-control_search(type=\"text\" placeholder=\"Search\" v-model=\"searchInput\", @keyup=\"searching\")\n          button.btn-clear(v-if=\"isActive\" @click=\"clearInput\")\n            b-icon.icon-clear(icon='x-circle')\n      .col-4(v-if=\"filteredRisksComputed.length !== 0 && searchInput\")\n        p Found {{ filteredRisksComputed.length }} {{ filteredRisksComputed.length === 1 ? 'result' : 'results' }}\n    .row\n      .col-12\n        Loading\n        table.table\n          thead\n            tr\n              th(style=\"width: 100%;\") Name\n                b-icon.ml-2(icon='chevron-expand')\n              th Impact\n                b-icon.ml-2(icon='chevron-expand')\n              th Likelihood\n                b-icon.ml-2(icon='chevron-expand')\n              th Risk Level\n                b-icon.ml-2(icon='chevron-expand')\n              th.text-right(style=\"width: 1%;\") Date Created\n                b-icon.ml-2(icon='chevron-expand')\n              th.text-right(width=\"35px\")\n          tbody(v-if=\"!loading && filteredRisksComputed && filteredRisksComputed.length\")\n            template(v-for=\"risk in filteredRisksComputed\")\n              tr(:key=\"risk.id\")\n                td\n                  .d-flex.align-items-center.link.truncate\n                    .dropdown-toggle(v-if=\"risk.compliance_policies.length !== 0\" :id=\"`#sectionIcon-${risk.id}`\", @click=\"toogleSections(risk.id)\")\n                      b-icon.m-r-1.sm-icon(icon=\"chevron-right\")\n                    a.custom-text(:href=\"`/business/risks/${risk.id}`\") {{ risk.name }}\n                  .dropdown-items.mb-2(v-if=\"risk.compliance_policies\" :id=\"`#section-${risk.id}`\")\n                    ul.list-unstyled.ml-3\n                      li.mb-2(v-for=\"policy in risk.compliance_policies\" :key=\"policy.id\")\n                        a.link.custom-text(:href=\"`/business/compliance_policies/${policy.id}`\")\n                          img.icon-policy(src='@/assets/policy.svg')\n                          | {{ policy.name }}\n                td {{ showLevel(risk.impact) }}\n                td {{ showLevel(risk.likelihood) }}\n                td\n                  b-badge.mr-2.badge-risk(:variant=\"badgeVariant(risk.risk_level)\")\n                    b-icon-exclamation-triangle-fill.mr-2\n                    | {{ showLevel(risk.risk_level)  }}\n                td.text-right {{ dateToHuman(risk.created_at) }}\n                td.text-right\n                  .actions\n                    b-dropdown(size=\"xs\" variant=\"none\" class=\"m-0 p-0\" right)\n                      template(#button-content)\n                        b-icon.three-dots(icon=\"three-dots\")\n                      RisksAddEditModal(:risks=\"risksComputed\" :riskId=\"risk.id\" :inline=\"false\")\n                        b-dropdown-item-button Edit\n                      b-dropdown-item-button.delete(@click=\"deleteRisk(risk.id)\") Delete\n              template(v-if=\"risk.compliance_policies\")\n                tr(v-for=\"policy in risk.compliance_policies\" :key=\"`risk-${risk.id}-${policy.id}`\" class=\"d-none\" :class=\"`risk-${risk.id}`\")\n                  td\n                    a.link.custom-text.policy-in-risk(:href=\"`/business/compliance_policies/${policy.id}`\")\n                      img.icon-policy(src='@/assets/policy.svg')\n                      | {{ policy.name }}\n                  td\n                  td\n                  td\n                  td\n                  td.text-right\n                    .actions\n                      b-dropdown(size=\"xs\" variant=\"none\" class=\"m-0 p-0\" right)\n                        template(#button-content)\n                          b-icon.three-dots(icon=\"three-dots\")\n                        b-dropdown-item-button.delete(@click=\"deletePolicy(risk, policy.id)\") Unlink\n    .row(v-if=\"!filteredRisksComputed.length && !loading\")\n      .col.h-100.text-center\n        EmptyState\n\n</template>\n\n<script>\n  import Loading from '@/common/Loading/Loading'\n  import RisksAddEditModal from '@/common/Modals/RisksAddEditModal'\n  import EtaggerMixin from '@/mixins/EtaggerMixin'\n  import { DateTime } from 'luxon'\n\n  export default {\n    mixins: [EtaggerMixin()],\n    props: {\n\n    },\n    components: {\n      Loading,\n      RisksAddEditModal\n    },\n    data() {\n      return {\n        levelOptions: ['Low', 'Medium', 'High'],\n        open: true,\n        searchInput: '',\n        isActive: false,\n      }\n    },\n    methods: {\n      deletePolicy(risk, policyId) {\n        const index = risk.compliance_policies.findIndex(record => record.id === policyId);\n        risk.compliance_policies.splice(index, 1)\n\n        risk.compliance_policy_ids = risk.compliance_policies.map(policy => policy.id)\n\n        this.$store\n          .dispatch('updateRisk', {...risk})\n          .then(response => {\n            console.log('response', response)\n            this.toast('Success', 'Risk has been updated.')\n          })\n          .catch(error => {\n            console.error(error)\n            this.toast('Error', `Risk has not been updated. Please try again. ${error}`)\n          })\n      },\n      getRisks(risks) {\n        console.log('risks', risks)\n        return risks\n      },\n      badgeVariant(num) {\n        if (num === 0) return 'success'\n        if (num === 1) return 'warning'\n        if (num === 2) return 'danger'\n      },\n      showLevel(num) {\n        // this.riskLevelColor(num)\n        return this.levelOptions[num]\n      },\n      dateToHuman(value) {\n        const date = DateTime.fromJSDate(new Date(value))\n        if (!date.invalid) {\n          return date.toFormat('MM/dd/yyyy')\n        }\n        if (date.invalid) {\n          return value\n        }\n      },\n      deleteRisk(riskId) {\n        this.$store\n          .dispatch('deleteRisk', { id: riskId })\n          .then(response => {\n            this.toast('Success', `Risk successfully deleted!`)\n          })\n          .catch(error => {\n            this.toast('Error', `Couldn't delete risk! ${error}`)\n          })\n      },\n      searching () {\n        if(this.searchInput.length) this.isActive = true\n        this.$emit('searching', this.searchInput)\n      },\n      clearInput() {\n        this.searchInput = ''\n        this.isActive = false\n        this.$emit('searching', this.searchInput)\n      },\n      toogleSections(value) {\n        const listPolicy = document.getElementsByClassName(`risk-${value}`)\n        \n        for(let i = 0; i < listPolicy.length; i++) {\n          listPolicy[i].classList.toggle('d-none')\n        }\n        document.getElementById(`#sectionIcon-${value}`).classList.toggle('active')\n      },\n    },\n    computed: {\n      loading() {\n        return this.$store.getters.loading;\n      },\n      risksComputed() {\n        return this.$store.getters.risksList\n      },\n      filteredRisksComputed () {\n        return this.risksComputed.filter(risk => {\n          return risk.name?.toLowerCase().includes(this.searchInput.toLowerCase())\n        })\n      },\n    },\n    mounted() {\n      this.$store\n        .dispatch('getRisks')\n        .then(response => {\n          console.log('response', response)\n          // this.toast('Success', `Policy successfully deleted!`)\n        })\n        .catch(error => {\n          console.error(error)\n          // this.toast('Error', `Couldn't submit form! ${error}`)\n        })\n    }\n  }\n</script>\n\n<style scoped>\n  .policy-details .policy-actions {\n    top: 1.5rem;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RisksTable.vue?vue&type=template&id=0092e31e&scoped=true&lang=pug&\"\nimport script from \"./RisksTable.vue?vue&type=script&lang=js&\"\nexport * from \"./RisksTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RisksTable.vue?vue&type=style&index=0&id=0092e31e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0092e31e\",\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\n  .page\n    .page-header\n      h2.page-header__title {{ pageTitle }}\n      .page-header__actions\n        //a.btn.btn-default.mr-3(href='#') Download\n        RisksAddEditModal\n          button.btn.btn-dark New  Risk\n    .card-body.white-card-body.card-body_full-height\n      RisksTable\n\n</template>\n\n<script>\n  import EtaggerMixin from '@/mixins/EtaggerMixin'\n  import RisksTable from './RisksTable'\n  import RisksAddEditModal from '@/common/Modals/RisksAddEditModal'\n\n  export default {\n    mixins: [EtaggerMixin()],\n    components: {\n      RisksTable,\n      RisksAddEditModal\n    },\n    data() {\n      return {\n        pageTitle: \"Risk Register\",\n      };\n    },\n    methods: {\n\n    },\n    computed: {\n      loading() {\n        return this.$store.getters.loading;\n      },\n      // risksComputed() {\n      //   return this.$store.getters.risksList\n      // }\n    },\n    mounted() {\n      // this.$store\n      //   .dispatch('getRisks')\n      //   .then(response => {\n      //     console.log('response', response)\n      //     // this.toast('Success', `Policy has been deleted.`)\n      //   })\n      //   .catch(error => {\n      //     console.error(error)\n      //     // this.toast('Error', `Policy has not been deleted.`)\n      //   })\n    }\n  };\n</script>\n\n<style>\n  @import \"./styles.css\";\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Page.vue?vue&type=template&id=ee78efc0&lang=pug&\"\nimport script from \"./Page.vue?vue&type=script&lang=js&\"\nexport * from \"./Page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Page.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"title\":_vm.riskId ? 'Edit risk' : 'New risk'},on:{\"close\":_vm.hideModal,\"show\":_vm.newEtag}},[_c('ModelLoader',{attrs:{\"url\":_vm.riskId ? _vm.submitUrl : undefined,\"default\":_vm.initialrisk,\"etag\":_vm.etag},on:{\"loaded\":_vm.loadrisk}},[(_vm.showRiskOption)?_c('b-form-group',{staticClass:\"form-label mb-3\",attrs:{\"id\":\"input-group-1\",\"label\":\"Risk\",\"label-for\":\"select-1\"}},[_c('b-form-select',{attrs:{\"id\":\"select-1\",\"options\":_vm.options,\"required\":\"\"},on:{\"change\":_vm.onChange},model:{value:(_vm.risk.risks),callback:function ($$v) {_vm.$set(_vm.risk, \"risks\", $$v)},expression:\"risk.risks\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.risk}})],1):_vm._e(),_c('b-row',{attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"Risk Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.risk.name),expression:\"risk.name\"}],staticClass:\"form-control\",domProps:{\"value\":(_vm.risk.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.risk, \"name\", $event.target.value)}}}),_c('Errors',{attrs:{\"errors\":_vm.errors.name}})],1)]),_c('b-row',{staticClass:\"m-t-1\",attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col-sm m-r-1\"},[_c('b-form-group',{staticClass:\"form-label\",attrs:{\"id\":\"input-group-2\",\"label\":\"Impact\",\"label-for\":\"select-2\"}},[_c('b-form-select',{attrs:{\"id\":\"select-2\",\"errors\":_vm.errors.impact,\"options\":_vm.levelOptions},on:{\"change\":_vm.onRiskChange},model:{value:(_vm.risk.impact),callback:function ($$v) {_vm.$set(_vm.risk, \"impact\", $$v)},expression:\"risk.impact\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.impact}})],1)],1),_c('div',{staticClass:\"col-sm\"},[_c('b-form-group',{staticClass:\"form-label\",attrs:{\"id\":\"input-group-3\",\"label\":\"Likelihood\",\"label-for\":\"select-3\"}},[_c('b-form-select',{attrs:{\"id\":\"select-3\",\"errors\":_vm.errors.likelihood,\"options\":_vm.levelOptions},on:{\"change\":_vm.onRiskChange},model:{value:(_vm.risk.likelihood),callback:function ($$v) {_vm.$set(_vm.risk, \"likelihood\", $$v)},expression:\"risk.likelihood\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.likelihood}})],1)],1)]),_c('b-row',{staticClass:\"mt-2\",attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"Risk Level\")]),_c('div',[_c('b-icon',{staticClass:\"mr-3\",attrs:{\"icon\":\"exclamation-triangle-fill\",\"scale\":\"1\",\"variant\":_vm.badgeVariant}}),_vm._v(_vm._s(_vm.riskLevelName))],1)])])],1),_c('template',{slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-link\",on:{\"click\":function($event){return _vm.hideModal()}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-dark\",on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.riskId ? 'Save' : 'Add'))])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" :title=\"riskId ? 'Edit risk' : 'New risk'\" @close=\"hideModal\" @show=\"newEtag\")\n      ModelLoader(:url=\"riskId ? submitUrl : undefined\" :default=\"initialrisk\" :etag=\"etag\" @loaded=\"loadrisk\")\n\n        b-form-group#input-group-1.form-label.mb-3(v-if=\"showRiskOption\" label='Risk' label-for='select-1')\n          b-form-select#select-1(v-model='risk.risks' :options='options' @change=\"onChange\" required)\n          Errors(:errors=\"errors.risk\")\n\n        b-row(no-gutters)\n          .col\n            label.form-label Risk Name\n            input.form-control(v-model=\"risk.name\" type=text)\n            Errors(:errors=\"errors.name\")\n\n        b-row.m-t-1(no-gutters)\n          .col-sm.m-r-1\n            b-form-group#input-group-2.form-label(label='Impact' label-for='select-2')\n              b-form-select#select-2(v-model=\"risk.impact\" :errors=\"errors.impact\" :options=\"levelOptions\" @change=\"onRiskChange\")\n              Errors(:errors=\"errors.impact\")\n          .col-sm\n            b-form-group#input-group-3.form-label(label='Likelihood' label-for='select-3')\n              b-form-select#select-3(v-model=\"risk.likelihood\" :errors=\"errors.likelihood\" :options=\"levelOptions\" @change=\"onRiskChange\")\n              Errors(:errors=\"errors.likelihood\")\n\n        b-row.mt-2(no-gutters)\n          .col\n            label.form-label Risk Level\n            div\n              b-icon.mr-3(icon=\"exclamation-triangle-fill\" scale=\"1\" :variant=\"badgeVariant\")\n              | {{ riskLevelName }}\n\n      template(slot=\"modal-footer\")\n        button.btn.btn-link(@click=\"hideModal()\") Cancel\n        button.btn.btn-dark(@click=\"submit\") {{ riskId ? 'Save' : 'Add' }}\n</template>\n\n<script>\nimport EtaggerMixin from '@/mixins/EtaggerMixin'\n\nconst rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n\nconst initialrisk = () => ({\n  name: \"\",\n  id: null,\n  impact: 0,\n  likelihood: 0,\n  compliance_policies: [],\n  compliance_policy_ids: []\n})\n\nexport default {\n  mixins: [EtaggerMixin()],\n  props: {\n    id: String,\n    risks: Array,\n    riskId: Number,\n    remindAt: String,\n    inline: {\n      type: Boolean,\n      default: true\n    },\n    risksList: Array,\n    policyId: Number,\n    showRiskOption: {\n      type: Boolean,\n      default: false,\n    }\n  },\n  data() {\n    return {\n      modalId: this.id || `modal_${rnd()}`,\n      risk: initialrisk(),\n      isActive: false,\n      options: [\n        { value: null, text: 'New Risk' },\n      ],\n      levelOptions: [\n        { value: 0, text: 'Low' },\n        { value: 1, text: 'Medium' },\n        { value: 2, text: 'High' },\n      ],\n      badgeVariant: 'secondary',\n      riskLevelName: '---',\n      errors: {},\n    }\n  },\n  methods: {\n    hideModal() {\n      this.errors = {}\n      this.$bvModal.hide(this.modalId)\n    },\n    loadrisk(risk) {\n      this.risk = Object.assign({}, this.risk, risk)\n      this.onRiskChange()\n\n      this.options = [{ value: null, text: 'New Risk' }]\n      this.options = this.options.concat(this.risksComputedAsOptions)\n    },\n    submit(e) {\n      e.preventDefault()\n      this.errors = {}\n      if (!this.risk.name) {\n        this.$set(this.errors, 'name', ['Required field'])\n        return\n      }\n\n      this.risk.compliance_policy_ids = this.risk.compliance_policies.map(policy => policy.id)\n      if (!this.risk.compliance_policy_ids.includes(this.policyId)) this.risk.compliance_policy_ids.push(this.policyId)\n\n      let method;\n      if(!this.riskId && !this.risk.id) {\n        method = 'createRisk'\n      } else {\n        method = 'updateRisk'\n      }\n\n      this.$store\n        .dispatch(method, {...this.risk})\n        .then(response => {\n          if (response.errors) {\n            const text = method === 'createRisk' ? 'Risk has not been created. Please try again.' : 'Risk has not been updated. Please try again.'\n            this.toast('Error', text)\n          } else {\n            if (method == 'createRisk') {\n              this.toast('Success', 'Risk has been created.')\n            } else {\n              this.toast('Success', 'Risk has been updated.')\n            }\n            this.$emit('saved', response)\n            this.$bvModal.hide(this.modalId)\n            this.newEtag()\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          this.toast('Error', `Risk has not been created. Please try again. ${error}`, true)\n        })\n    },\n    onChange(event){\n      // CATCH RISK NEW OR FROM CREATED\n      if (event === null) {\n        this.isActive = true\n        this.risk = initialrisk()\n        this.badgeVariant = 'secondary'\n        this.riskLevelName = '---'\n        return;\n      }\n      else  {\n        this.isActive = false\n      }\n\n      const resultRisk = this.risks.find(risk => risk.id === event)\n      this.risk = resultRisk\n      this.onRiskChange()\n    },\n    onRiskChange(){\n      const riskLevelNum = this.riskLevel(this.risk.likelihood, this.risk.impact)\n      this.riskLevelColor(riskLevelNum)\n      this.getRiskLevelName(riskLevelNum)\n    },\n    getRiskLevelName(num) {\n      this.riskLevelName = this.levelOptions[num].text\n    },\n    riskLevel(likelihood, impact) {\n      if ((likelihood > 0) && (impact === 2)) {\n        return 2;\n      } else if ((likelihood < 2) && (impact === 0)) {\n        return 0;\n      } else {\n        return 1;\n      }\n    },\n    riskLevelColor(num) {\n      if (num === 0) this.badgeVariant = 'success'\n      if (num === 1) this.badgeVariant = 'warning'\n      if (num === 2) this.badgeVariant = 'danger'\n    },\n  },\n  computed: {\n    initialrisk: () => initialrisk,\n    canBeDraft() {\n      return !this.riskId || ('draft' === this.risk.status)\n    },\n    submitUrl() {\n      const toId = this.riskId ? `/${this.riskId}` : ''\n      return '/api/business/risks' + toId\n    },\n    httpMethod() {\n      return this.riskId ? 'PUT' : 'POST'\n    },\n    risksComputedAsOptions() {\n      return this.risks.map(risk => {\n        return {\n          value: risk.id, text: risk.name\n        }\n      })\n    }\n  },\n  watch: {}\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksAddEditModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksAddEditModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RisksAddEditModal.vue?vue&type=template&id=3182b004&lang=pug&\"\nimport script from \"./RisksAddEditModal.vue?vue&type=script&lang=js&\"\nexport * from \"./RisksAddEditModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/policy.4cd572ac.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksTable.vue?vue&type=style&index=0&id=0092e31e&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Page.vue?vue&type=style&index=0&lang=css&\"","const etagInit = () => Math.random()\n\nconst EtaggerMixin = propertyName => {\n  const prop = propertyName || 'etag',\n        refreshMethodName = 'new' + prop[0].toUpperCase() + prop.substring(1)\n  return {\n    data() {\n      return {\n        [prop]: etagInit()\n      }\n    },\n    methods: {\n      [refreshMethodName]: function() {\n        this[prop] = etagInit()\n      }\n    }\n  }\n}\n\nexport default EtaggerMixin"],"sourceRoot":""}
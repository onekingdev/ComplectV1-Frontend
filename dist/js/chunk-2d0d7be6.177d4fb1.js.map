{"version":3,"sources":["webpack:///./src/business/dashboard/Page.vue?0212","webpack:///./src/business/dashboard/Calendar.vue?b4ad","webpack:///src/business/dashboard/Calendar.vue","webpack:///./src/business/dashboard/Calendar.vue?623d","webpack:///./src/business/dashboard/Calendar.vue","webpack:///./src/business/dashboard/UpcomingTasks.vue?9ad3","webpack:///./src/business/dashboard/ProjectTable.vue?b2da","webpack:///src/business/dashboard/ProjectTable.vue","webpack:///./src/business/dashboard/ProjectTable.vue?8a7c","webpack:///./src/business/dashboard/ProjectTable.vue","webpack:///src/business/dashboard/UpcomingTasks.vue","webpack:///./src/business/dashboard/UpcomingTasks.vue?fbac","webpack:///./src/business/dashboard/UpcomingTasks.vue","webpack:///src/business/dashboard/Page.vue","webpack:///./src/business/dashboard/Page.vue?6137","webpack:///./src/business/dashboard/Page.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","ref","currentBusiness","_v","_s","contact_first_name","contact_last_name","_b","etag","on","newEtag","pdfUrl","staticRenderFns","staticStyle","$event","$emit","nowEditingTask","currentMonth","preventDefault","prev","apply","arguments","next","calendarOptions","arg","jsToSql","date","domProps","dayContent","_l","event","extendedProps","icon","openModal","taskId","oid","title","href","props","type","String","required","Number","components","FullCalendar","TaskFormModal","Download","data","occurenceId","methods","Object","assign","$nextTick","calendarObject","updateCurrentMonth","refetchEvents","mounted","computed","$refs","getApi","firstDay","dayMaxEvents","aspectRatio","plugins","events","fetch","headerToolbar","watch","handler","component","directives","name","rawName","modifiers","tasks","_e","projects","_m","project","i","class","overdue","isOverdue","_f","ends_on","Array","projectList","map","created","refetch","$store","getters","backendUrl","TaskTable","ProjectTable","Math","random","endpointProjectsUrl","authHeaders","Calendar","UpcomingTasks"],"mappings":"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","file":"js/chunk-2d0d7be6.177d4fb1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('Get',{attrs:{\"currentBusiness\":\"/api/businesses/current\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar currentBusiness = ref.currentBusiness;\nreturn [_c('div',{staticClass:\"page-header\"},[_c('h2',{staticClass:\"page-header__title\"},[_c('b',[_vm._v(\"Welcome, \")]),_vm._v(_vm._s(currentBusiness.contact_first_name)+\" \"+_vm._s(currentBusiness.contact_last_name))])]),_c('div',{staticClass:\"p-x-40 p-b-40\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"dashboard\"},[_c('div',{staticClass:\"card calendar\"},[_c('Calendar',_vm._b({attrs:{\"etag\":_vm.etag},on:{\"saved\":_vm.newEtag}},'Calendar',{pdfUrl: _vm.pdfUrl},false))],1),_c('div',{staticClass:\"card upcoming h-100\"},[_c('UpcomingTasks',{attrs:{\"etag\":_vm.etag},on:{\"saved\":_vm.newEtag}})],1)])])])])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card-header\"},[_c('div',{staticStyle:{\"vertical-align\":\"middle\"}},[_c('h3',{staticClass:\"calendar__title m-y-0\"},[_c('TaskFormModal',_vm._b({attrs:{\"id\":\"CalendarTaskFormModal\"},on:{\"saved\":function($event){return _vm.$emit('saved')}}},'TaskFormModal',_vm.nowEditingTask,false)),_vm._v(_vm._s(_vm.currentMonth)),_c('small',{staticClass:\"float-right\",staticStyle:{\"vertical-align\":\"middle\"}},[_c('ion-icon',{staticClass:\"m-x-1\",attrs:{\"name\":\"chevron-back-outline\"},on:{\"click\":function($event){$event.preventDefault();return _vm.prev.apply(null, arguments)}}}),_c('ion-icon',{attrs:{\"name\":\"chevron-forward-outline\"},on:{\"click\":function($event){$event.preventDefault();return _vm.next.apply(null, arguments)}}})],1)],1)]),_c('Download',{staticClass:\"d-none\",attrs:{\"pdfUrl\":_vm.pdfUrl}})],1),_c('div',{staticClass:\"card-body p-20\"},[_c('FullCalendar',{ref:\"FullCalendar\",attrs:{\"options\":_vm.calendarOptions},scopedSlots:_vm._u([{key:\"dayCellContent\",fn:function(arg){return [_c('TaskFormModal',{attrs:{\"remind-at\":_vm.jsToSql(arg.date)},on:{\"saved\":function($event){return _vm.$emit('saved')}}},[_c('a',{staticClass:\"fc-daygrid-day-number\",attrs:{\"href\":\"\"},domProps:{\"innerHTML\":_vm._s(_vm.dayContent(arg.date))},on:{\"click\":function($event){$event.preventDefault();}}})])]}},{key:\"eventContent\",fn:function(arg){return [_c('div',{staticClass:\"fc-event-main-frame\"},[_c('div',{staticClass:\"fc-event-title-container\"},[_c('div',{staticClass:\"fc-event-title fc-sticky\"},[_vm._l((arg.event.extendedProps.icons),function(icon){return _c('span',[_c('ion-icon',{attrs:{\"name\":icon}}),_vm._v(\" \")],1)}),(arg.event.extendedProps.remind_at)?_c('span',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.openModal(arg.event.extendedProps.taskId, arg.event.extendedProps.oid)}}},[_vm._v(_vm._s(arg.event.title))]):_c('a',{attrs:{\"href\":arg.event.extendedProps.href,\"target\":\"_blank\"}},[_vm._v(_vm._s(arg.event.title))])],2)])])]}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div\n    .card-header\n      div(style=\"vertical-align: middle\")\n        h3.calendar__title.m-y-0\n          TaskFormModal(id=\"CalendarTaskFormModal\" v-bind=\"nowEditingTask\" @saved=\"$emit('saved')\")\n          | {{currentMonth}}\n          small.float-right(style=\"vertical-align: middle\")\n            ion-icon.m-x-1(name='chevron-back-outline' @click.prevent=\"prev\")\n            ion-icon(name='chevron-forward-outline' @click.prevent=\"next\")\n      Download.d-none(:pdfUrl=\"pdfUrl\")\n    .card-body.p-20\n      FullCalendar(:options=\"calendarOptions\" ref=\"FullCalendar\")\n        template(v-slot:dayCellContent=\"arg\")\n          TaskFormModal(:remind-at=\"jsToSql(arg.date)\" @saved=\"$emit('saved')\")\n            a.fc-daygrid-day-number(v-html=\"dayContent(arg.date)\" href @click.prevent)\n        template(v-slot:eventContent=\"arg\")\n          .fc-event-main-frame\n            //- .fc-event-time\n            .fc-event-title-container\n              .fc-event-title.fc-sticky\n                span(v-for=\"icon in arg.event.extendedProps.icons\")\n                  ion-icon(:name=\"icon\")\n                  | &nbsp;\n                span.pointer(@click=\"openModal(arg.event.extendedProps.taskId, arg.event.extendedProps.oid)\" v-if=\"arg.event.extendedProps.remind_at\") {{arg.event.title}}\n                a(v-else :href=\"arg.event.extendedProps.href\" target=\"_blank\") {{arg.event.title}}\n</template>\n\n<script>\nimport FullCalendar from '@fullcalendar/vue'\nimport dayGridPlugin from '@fullcalendar/daygrid'\nimport interactionPlugin from '@fullcalendar/interaction'\nimport { DateTime } from 'luxon'\nimport { toEvent, cssClass } from '@/common/TaskHelper'\nimport TaskFormModal from '@/common/TaskFormModal'\nimport Download from '@/common/Dashboard/components/Download'\n\nconst endpointUrl = '/api/reminders/'\nconst jsToSql = date => DateTime.fromJSDate(date).toSQLDate()\n\nexport default {\n  props: {\n    pdfUrl: {\n      type: String,\n      required: true\n    },\n    etag: Number\n  },\n  components: {\n    FullCalendar,\n    TaskFormModal,\n    Download\n  },\n  data() {\n    return {\n      currentMonth: '',\n      nowEditingTask: {\n        taskId: null,\n        occurenceId: null\n      }\n    }\n  },\n  methods: {\n    openModal(taskId, occurenceId) {\n      Object.assign(this.nowEditingTask, { taskId, occurenceId })\n      this.$nextTick(() => this.$bvModal.show('CalendarTaskFormModal'))\n    },\n    dayContent(arg) {\n      return DateTime.fromJSDate(arg).toFormat('d')\n    },\n    jsToSql(arg) {\n      return jsToSql(arg)\n    },\n    prev() {\n      this.calendarObject.prev(), this.updateCurrentMonth()\n    },\n    next() {\n      this.calendarObject.next(), this.updateCurrentMonth()\n    },\n    updateCurrentMonth() {\n      this.currentMonth = DateTime.fromJSDate(this.calendarObject.getDate()).toFormat('MMMM yyyy')\n    },\n    refetchEvents() {\n      this.calendarObject.refetchEvents()\n    }\n  },\n  mounted() {\n    this.updateCurrentMonth()\n  },\n  computed: {\n    calendarObject() {\n      return this.$refs.FullCalendar.getApi()\n    },\n    calendarOptions() {\n      return {\n        firstDay: 1,\n        dayMaxEvents: 2,\n        aspectRatio: 1.09,\n        plugins: [dayGridPlugin, interactionPlugin],\n        events: (info, successCallback, errorCallback) => {\n          //const business_id = window.localStorage[\"app.business_id\"]\n          //if(business_id) headers.business_id = JSON.parse(business_id)\n\n          const fromTo = jsToSql(info.start) + '/' + jsToSql(info.end)\n          fetch(`${this.$store.getters.backendUrl}${endpointUrl}${fromTo}`, this.$store.getters.authHeaders)\n            .then(response => response.json())\n            .then(result => successCallback(result.tasks.concat(result.projects.map(project => ({\n              ...project,\n              href: this.$store.getters.url('URL_PROJECT_SHOW', project.id)\n            }))).map(task => ({\n              ...toEvent(task),\n              classNames: [cssClass(task)]\n            }))))\n            .catch(errorCallback)\n        },\n        headerToolbar: false\n      }\n    }\n  },\n  watch: {\n    etag: {\n      handler: function(newVal, oldVal) {\n        this.refetchEvents()\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Calendar.vue?vue&type=template&id=d1fa7790&lang=pug&\"\nimport script from \"./Calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./Calendar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card-header d-flex justify-content-between\"},[_c('h3',{staticClass:\"upcoming__header m-y-0\"},[_vm._v(\"Upcoming\")]),_c('TaskFormModal',{on:{\"saved\":function($event){return _vm.$emit('saved')}}},[_c('button',{staticClass:\"btn btn-dark float-end\"},[_vm._v(\"New Task\")])])],1),_c('div',{staticClass:\"card-body p-x-20 p-y-30\"},[_c('b',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.upcoming_tasks_collapse\",modifiers:{\"upcoming_tasks_collapse\":true}}],staticClass:\"upcoming__title d-flex justify-content-between m-b-10\",attrs:{\"role\":\"button\"}},[_vm._v(\"Tasks\"),_c('ion-icon',{attrs:{\"name\":\"chevron-down-outline\"}})],1),_c('b-collapse',{attrs:{\"id\":\"upcoming_tasks_collapse\",\"visible\":true}},[_c('TaskTable',{staticClass:\"upcoming__table\",attrs:{\"tasks\":_vm.tasks,\"shortTable\":true},on:{\"saved\":function($event){return _vm.$emit('saved')}}}),(_vm.tasks.length)?_c('div',{staticClass:\"d-flex justify-content-end mb-2\"},[_c('router-link',{staticClass:\"link upcoming__more\",attrs:{\"to\":\"/business/tasks\"}},[_vm._v(\"More\")])],1):_vm._e()],1),_c('b',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.upcoming_projects_collapse\",modifiers:{\"upcoming_projects_collapse\":true}}],staticClass:\"upcoming__title d-flex justify-content-between m-b-10\",attrs:{\"role\":\"button\"}},[_vm._v(\"Projects\"),_c('ion-icon',{attrs:{\"name\":\"chevron-down-outline\"}})],1),_c('b-collapse',{attrs:{\"id\":\"upcoming_projects_collapse\",\"visible\":true}},[_c('ProjectTable',{attrs:{\"projects\":_vm.projects}}),(_vm.projects.length)?_c('div',{staticClass:\"d-flex justify-content-end\"},[_c('router-link',{staticClass:\"link upcoming__more\",attrs:{\"to\":\"/business/projects\"}},[_vm._v(\"More\")])],1):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',{staticClass:\"table task_table short-table\"},[_vm._m(0),_c('tbody',_vm._l((_vm.projectList),function(project,i){return _c('tr',{key:i},[_c('td',[_c('router-link',{staticClass:\"link\",attrs:{\"to\":project.href}},[_vm._v(_vm._s(project.title))])],1),_c('td',{staticClass:\"text-right due-date\",class:{ overdue: _vm.isOverdue(project) }},[(_vm.isOverdue(project))?_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"exclamation-triangle-fill\",\"variant\":\"warning\"}}):_vm._e(),_vm._v(_vm._s(_vm._f(\"asDate\")(project.ends_on)))],1)])}),0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Name\")]),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Due date\")])])])}]\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  table.table.task_table.short-table\n    thead\n      tr\n        th Name\n        th.text-right Due date\n    tbody\n      tr(v-for=\"(project, i) in projectList\" :key=\"i\")\n        td\n          router-link.link(:to='project.href') {{project.title}}\n          // a.text-dark(:href=\"project.href\" target=\"_blank\") {{project.title}}\n        td.text-right(class=\"due-date\" :class=\"{ overdue: isOverdue(project) }\")\n          b-icon.mr-2(v-if=\"isOverdue(project)\" icon=\"exclamation-triangle-fill\" variant=\"warning\")\n          | {{ project.ends_on | asDate }}\n</template>\n\n<script>\nimport { toEvent, isOverdue } from '@/common/TaskHelper'\n\nexport default {\n  props: {\n    projects: {\n      type: Array,\n      required: true\n    }\n  },\n  methods: {\n    isOverdue\n  },\n  computed: {\n    projectList() {\n      return this.projects.map(project => ({\n        ...toEvent(project),\n        href: this.$store.getters.url('URL_PROJECT_SHOW', project.id)\n      }))\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjectTable.vue?vue&type=template&id=f1659a70&lang=pug&\"\nimport script from \"./ProjectTable.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjectTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\n  div\n    .card-header.d-flex.justify-content-between\n      h3.upcoming__header.m-y-0 Upcoming\n      TaskFormModal(@saved=\"$emit('saved')\")\n        button.btn.btn-dark.float-end New Task\n    .card-body.p-x-20.p-y-30\n      b.upcoming__title.d-flex.justify-content-between.m-b-10(role=\"button\" v-b-toggle.upcoming_tasks_collapse=\"\")\n        | Tasks\n        ion-icon(name=\"chevron-down-outline\")\n      b-collapse#upcoming_tasks_collapse(:visible=\"true\")\n        TaskTable.upcoming__table(:tasks=\"tasks\" :shortTable=\"true\" @saved=\"$emit('saved')\")\n        .d-flex.justify-content-end.mb-2(v-if=\"tasks.length\")\n          router-link.link.upcoming__more(:to='`/business/tasks`') More\n      b.upcoming__title.d-flex.justify-content-between.m-b-10(role=\"button\" v-b-toggle.upcoming_projects_collapse=\"\")\n        | Projects\n        ion-icon(name=\"chevron-down-outline\")\n      b-collapse#upcoming_projects_collapse(:visible=\"true\")\n        ProjectTable(:projects=\"projects\")\n        .d-flex.justify-content-end(v-if=\"projects.length\")\n          router-link.link.upcoming__more(:to='`/business/projects`') More\n</template>\n\n<script>\nconst LIMIT_OF_ARRAY_TASKS = 10\nconst LIMIT_OF_ARRAY_PROJECTS = 5\n\nconst endpointUrl = '/api/reminders/'\nconst overdueEndpointUrl = '/api/overdue_reminders'\n\nimport TaskTable from '@/common/TaskTable'\nimport ProjectTable from './ProjectTable'\nimport TaskFormModal from '@/common/TaskFormModal'\nimport { DateTime } from 'luxon'\n\nexport default {\n  props: {\n    etag: Number\n  },\n  data() {\n    return {\n      tasks: [],\n      projects: []\n    }\n  },\n  created() {\n    this.refetch()\n  },\n  methods: {\n    refetch() {\n      //const business_id = window.localStorage[\"app.business_id\"]\n      //if(business_id) headers.business_id = JSON.parse(business_id)\n\n      const fromTo = DateTime.local().toSQLDate() + '/' + DateTime.local().plus({days: 7}).toSQLDate()\n\n      let tasks = []\n      let projects = []\n\n      fetch(this.$store.getters.backendUrl+overdueEndpointUrl, this.$store.getters.authHeaders)\n        .then(response => response.json())\n        .then(result => {\n          tasks = result.tasks\n        }).then(fetch(`${this.$store.getters.backendUrl}${endpointUrl}${fromTo}`, this.$store.getters.authHeaders)\n          .then(response => response.json())\n          .then(result => {\n            tasks = tasks.concat(result.tasks)\n            projects = result.projects\n\n            // this.tasks = tasks.slice(0, LIMIT_OF_ARRAY_TASKS).filter(task => !task.done_at)\n            this.tasks = tasks.filter(task => !task.done_at)\n            this.projects = projects.slice(0, LIMIT_OF_ARRAY_PROJECTS)\n          })\n        )\n        // .catch(errorCallback)\n    }\n  },\n  components: {\n    TaskFormModal,\n    TaskTable,\n    ProjectTable\n  },\n  watch: {\n    etag: {\n      handler: function(newVal, outline) {\n        this.refetch()\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpcomingTasks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpcomingTasks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpcomingTasks.vue?vue&type=template&id=5d614778&lang=pug&\"\nimport script from \"./UpcomingTasks.vue?vue&type=script&lang=js&\"\nexport * from \"./UpcomingTasks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\n  .page\n    Get(currentBusiness=\"/api/businesses/current\"): template(v-slot=\"{ currentBusiness }\")\n      .page-header\n        h2.page-header__title\n          b Welcome,&nbsp;\n          | {{currentBusiness.contact_first_name}} {{currentBusiness.contact_last_name}}\n        //.page-header__actions\n        //  b-dropdown.mr-2(variant=\"default\" right)\n        //    template(#button-content)\n        //      | Admin view\n        //      b-icon.ml-2(icon=\"chevron-down\")\n        //    b-dropdown-item Other view\n        //  a.btn.btn-default.font-weight-bold Customize\n      div.p-x-40.p-b-40\n        .row\n          .col\n            .dashboard\n              .card.calendar\n                Calendar(v-bind=\"{pdfUrl}\" @saved=\"newEtag\" :etag=\"etag\")\n              .card.upcoming.h-100\n                UpcomingTasks(@saved=\"newEtag\" :etag=\"etag\")\n</template>\n\n<script>\nimport Calendar from './Calendar'\nimport UpcomingTasks from '@/business/dashboard/UpcomingTasks'\n\nconst endpointProjectsUrl = '/api/local_projects/'\nconst pdfUrl = '/reminders.csv'\n\nexport default {\n  data() {\n    return {\n      etag: Math.random(),\n      projects: []\n    }\n  },\n  methods: {\n    newEtag() {\n      this.etag = Math.random()\n    },\n    refetch() {\n      //const business_id = window.localStorage[\"app.business_id\"]\n      //if(business_id) headers.business_id = JSON.parse(business_id)\n\n      fetch(this.$store.getters.backendUrl + endpointProjectsUrl, this.$store.getters.authHeaders)\n        .then(response => response.json())\n        .then(result => this.projects = result)\n    },\n  },\n  created() {\n    this.refetch()\n\n    // const firstView = JSON.parse(localStorage.getItem('app.currentUser.firstEnter'))\n    // if (firstView) {\n    //   this.toast('Success', 'Account has been created.')\n    //   localStorage.removeItem('app.currentUser.firstEnter')\n    // }\n  },\n  computed: {\n    pdfUrl: () => pdfUrl,\n    // currentBusiness() {\n    //   // @TODO Must be fetched from API\n    //   const accountInfo = this.$store.getters.getUser\n    //   return accountInfo ? `${accountInfo.contact_first_name} ${accountInfo.contact_last_name}` : ''\n    // },\n  },\n  components: {\n    Calendar,\n    UpcomingTasks,\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Page.vue?vue&type=template&id=537b2400&lang=pug&\"\nimport script from \"./Page.vue?vue&type=script&lang=js&\"\nexport * from \"./Page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
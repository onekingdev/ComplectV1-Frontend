(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52a51925"],{"05b9":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row p-x-1"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-body white-card-body reviews__card"},[a("div",{staticClass:"reviews__topiclist"},[a("div",{staticClass:"reviews__card--header p-b-20"},[a("h2",[e._v("Tasks")]),a("div",[a("a",{staticClass:"btn btn-default m-r-1 d-none"},[e._v("Download")]),a("TaskFormModal",{attrs:{defaults:e.taskDefaults},on:{saved:function(t){return e.$emit("saved")}}},[a("a",{staticClass:"btn btn-dark"},[e._v("New task")])])],1)]),a("div",{staticClass:"reviews__card--internal borderless"},[a("table",{staticClass:"table task_table"},[a("thead",[a("tr",[a("th",{attrs:{width:"45%"}},[a("span",{staticClass:"pointer",on:{click:function(t){return e.toggleSorting("body")}}},[e._v("Name"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1)]),a("th",[a("span",{staticClass:"pointer",on:{click:function(t){return e.toggleSorting("assignee_name")}}},[e._v("Assignee"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1)]),a("th",[a("span",{staticClass:"pointer",on:{click:function(t){return e.toggleSorting("remind_at")}}},[e._v("Start Date"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1)]),a("th",[a("span",{staticClass:"pointer",on:{click:function(t){return e.toggleSorting("end_date")}}},[e._v("Due Date"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1)]),a("th",{attrs:{width:"35px"}})])]),e.tasksSorted&&e.tasksSorted.length?a("tbody",{staticClass:"text-dark"},e._l(e.tasksSorted,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.body))]),a("td",[e._v(e._s(t.assignee_name||""))]),a("td",[e._v(e._s(e._f("asDate")(t.remind_at)))]),a("td",[e._v(e._s(e._f("asDate")(t.end_date)))]),a("td",{staticClass:"actions"},[a("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"sm",variant:"light",right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!0)},[a("b-dropdown-item-button",[e._v("Edit")]),a("b-dropdown-item-button",[e._v("Delete")])],1)],1)])})),0):e._e()]),a("EmptyState")],1)])])])])])},n=[],s=a("6f33"),i={props:{review:{type:Object,required:!0}},data:function(){return{sortField:null,sortDirection:1}},methods:{toggleSorting:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?-1:1;this.sortDirection=this.sortField===e?-1*this.sortDirection:a,this.sortField=e}},computed:{tasksSorted:function(){var e=this;if(this.sortField){var t=function(t,a){var r=[t[e.sortField],a[e.sortField]],n=r[0],s=r[1];return n>s?e.sortDirection:n<s?-1*e.sortDirection:0};return this.review.reminders.sort(t)}return this.review.reminders},taskDefaults:function(){return{linkable_type:"AnnualReport",linkable_id:this.review.id}}},components:{TaskFormModal:s["a"]}},o=i,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=c.exports},1614:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row p-x-1"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-body white-card-body reviews__card"},[a("div",{staticClass:"reviews__topiclist"},[e._m(0),a("div",{staticClass:"reviews__card--internal borderless"},[a("EmptyState")],1)])])])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reviews__card--header p-b-20"},[a("h2",[e._v("Documents")]),a("div",[a("a",{staticClass:"btn btn-default d-none"},[e._v("Download")]),a("a",{staticClass:"btn m-l-1 btn-dark"},[e._v("Create Documents")])])])}],s={components:{},data:function(){return{}},created:function(){},methods:{},computed:{}},i=s,o=a("2877"),l=Object(o["a"])(i,r,n,!1,null,null,null);t["a"]=l.exports},"2cf0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"d-inline-block":e.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modalId,expression:"modalId"}],class:{"d-inline-block":e.inline}},[e._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:e.modalId,title:"Edit Internal Review"}},[a("b-row",[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label"},[e._v("New Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.review.name,expression:"review.name"}],ref:"input",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter the name of your review"},domProps:{value:e.review.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.review,"name",t.target.value)}}}),a("Errors",{attrs:{errors:e.errors.name}})],1)]),a("b-row",{staticClass:"m-t-1"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"form-label"},[e._v("Start Date")]),a("DatePicker",{model:{value:e.review.review_start,callback:function(t){e.$set(e.review,"review_start",t)},expression:"review.review_start"}}),a("Errors",{attrs:{errors:e.errors.review_start}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"form-label"},[e._v("End Date")]),a("DatePicker",{model:{value:e.review.review_end,callback:function(t){e.$set(e.review,"review_end",t)},expression:"review.review_end"}}),a("Errors",{attrs:{errors:e.errors.review_end}})],1)]),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(t){return e.$bvModal.hide(e.modalId)}}},[e._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:e.submit}},[e._v("Save")])])],2)],1)},n=[],s=a("9523"),i=a.n(s),o=a("278c"),l=a.n(o),c=a("c973"),d=a.n(c),u=a("a34a"),v=a.n(u),m=function(){return Math.random().toFixed(10).toString().replace(".","")},p={props:{inline:{type:Boolean,default:!0},review:{type:Object,required:!0}},data:function(){return{modalId:"modal_".concat(m()),errors:[]}},methods:{focusInput:function(){this.$refs.input.focus()},submit:function(e){var t=this;return d()(v.a.mark((function a(){var r,n;return v.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.errors=[],t.review.name){a.next=6;break}return t.errors.push("Name is required."),t.toast("Error","Name is required",!0),a.abrupt("return");case 6:if(!(t.review.name.length<=3)){a.next=10;break}return t.errors.push({name:"Name is very short, must be more 3 characters."}),t.toast("Error","Name is very short, must be more 3 characters",!0),a.abrupt("return");case 10:return r=t.review,n={id:r.id,name:r.name,review_start:r.review_start,review_end:r.review_end},a.prev=12,a.next=15,t.$store.dispatch("annual/updateReview",n).then((function(e){if(e.errors)for(var a=0,r=Object.entries(e.errors);a<r.length;a++){var n=l()(r[a],2),s=n[0],o=n[1];t.toast("Error","".concat(s,": ").concat(o),!0),t.errors=Object.assign(t.errors,i()({},s,o))}else e.errors||(t.toast("Success","Saved changes to annual review."),t.$emit("saved"),t.$bvModal.hide(t.modalId))}))["catch"]((function(e){return console.error(e)}));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a["catch"](12),t.toast("Error",a.t0.message,!0);case 20:case"end":return a.stop()}}),a,null,[[12,17]])})))()}},watch:{"annual_review.review_start":{handler:function(e,t){var a=DateTime.fromSQL(e),r=DateTime.fromSQL(this.annual_review.review_end);!a.invalid&&(r.invalid||r.startOf("day")<a.startOf("day"))&&(this.annual_review.review_end=e)}}}},b=p,f=a("2877"),_=Object(f["a"])(b,r,n,!1,null,null,null);t["a"]=_.exports},"5a64":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"d-inline-block":e.inline}},[r("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modalId,expression:"modalId"}],class:{"d-inline-block":e.inline}},[e._t("default")],2),r("b-modal",{staticClass:"fade",attrs:{id:e.modalId,title:"Delete Internal Review"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-1 text-center px-0"},[r("img",{attrs:{src:a("d1db"),width:"25",height:"25"}})]),r("div",{staticClass:"col"},[r("p",{staticClass:"paragraph m-b-10"},[e._v("Removing this internal review will delete any progress and tasks associated with the file.")]),r("p",{staticClass:"paragraph mb-0"},[r("b",[e._v("Do you want to continue?")])])])]),r("Errors",{attrs:{errors:e.errors.title}}),r("template",{slot:"modal-footer"},[r("button",{staticClass:"btn btn-link mr-2",on:{click:function(t){return e.$bvModal.hide(e.modalId)}}},[e._v("Cancel")]),r("button",{staticClass:"btn btn-dark",on:{click:e.submit}},[e._v("Confirm")])])],2)],1)},n=[],s=function(){return Math.random().toFixed(10).toString().replace(".","")},i={props:{inline:{type:Boolean,default:!0}},data:function(){return{modalId:"modal_".concat(s()),errors:[]}},methods:{submit:function(e){e.preventDefault(),this.errors=[],this.$emit("deleteConfirmed"),this.$bvModal.hide(this.modalId)}}},o=i,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=c.exports},"5f04":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"d-inline-block":e.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modalId,expression:"modalId"}],class:{"d-inline-block":e.inline}},[e._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:e.modalId,title:"Complete Section"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1 text-center px-0"},[a("b-icon",{staticClass:"mt-1 ml-3",attrs:{icon:"check-circle-fill",width:"25",height:"25",variant:"success"}})],1),a("div",{staticClass:"col"},[a("p",{staticClass:"paragraph m-b-10"},[e._v("This will mark the category as complete and your progress will be updated.")]),a("p",{staticClass:"paragraph mb-0"},[a("b",[e._v("Do you want to continue?")])])])]),a("Errors",{attrs:{errors:e.errors.title}}),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(t){return e.$bvModal.hide(e.modalId)}}},[e._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:e.submit}},[e._v("Confirm")])])],2)],1)},n=[],s=function(){return Math.random().toFixed(10).toString().replace(".","")},i={props:{inline:{type:Boolean,default:!0},completedStatus:{type:Boolean,default:!0},name:{type:String,default:"General"}},data:function(){return{modalId:"modal_".concat(s()),errors:[]}},methods:{submit:function(e){e.preventDefault(),this.errors=[],this.$emit("compliteConfirmed"),this.$bvModal.hide(this.modalId)}}},o=i,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=c.exports},"80cc":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"review__list"},[a("ReviewLink",{attrs:{"annual-id":e.annualId,"current-id":e.currentId,general:e.general,checked:e.generalComplete}}),e._l(e.reviewsCategories,(function(t){return[a("ReviewLink",{attrs:{title:t.name,checked:t.complete,id:t.id,"annual-id":e.annualId,"current-id":e.currentId}})]})),a("div",{staticClass:"review__category-add"},[e.category.visible?a("div",{staticClass:"review__category-add__form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.category.name,expression:"category.name"}],ref:"input",staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.category.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onCategoryNameChange.apply(null,arguments)},blur:e.addCategory,input:function(t){t.target.composing||e.$set(e.category,"name",t.target.value)}}})]):a("button",{staticClass:"btn btn-default",on:{click:function(t){e.category.visible=!0}}},[a("b-icon",{staticClass:"mr-2",attrs:{icon:"plus-circle-fill"}}),e._v("New Category")],1)])],2)},n=[],s=a("c973"),i=a.n(s),o=a("9523"),l=a.n(o),c=a("a34a"),d=a.n(c),u=a("2f62"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reviews__list-item m-b-20"},[a("router-link",{staticClass:"reviews__list-link",class:e.linkClass,attrs:{to:e.url}},[a("div",{staticClass:"reviews__list-text"},[e._v(e._s(e.title))]),a("div",{staticClass:"reviews__list-icon",class:{checked:e.checked}},[e.checked?a("b-icon",{attrs:{icon:"check-circle-fill"}}):a("b-icon",{attrs:{icon:"check-circle"}})],1)])],1)},m=[],p={name:"ReviewLink",props:{id:{type:Number},title:{type:String,default:"General"},checked:{type:Boolean},currentId:{type:Number},annualId:{type:Number},general:{type:Boolean}},computed:{url:function(){return this.id?{name:"annual-reviews-review-category",params:{annualId:this.annualId,revcatId:this.id}}:{name:"annual-reviews-general",params:{annualId:this.annualId}}},linkClass:function(){return{"reviews__list-link--active":this.id?this.currentId===this.id:this.general}}}},b=p,f=a("2877"),_=Object(f["a"])(b,v,m,!1,null,null,null),h=_.exports;function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"ReviewsList",props:["annualId","reviewsCategories","currentId","general","generalComplete"],data:function(){return{category:{visible:!1,name:""}}},components:{ReviewLink:h},methods:C(C({},Object(u["b"])({createReviewCategory:"annual/createReviewCategory",getCurrentReviewReview:"annual/getCurrentReview"})),{},{onCategoryNameChange:function(){this.category.visible=!1},addCategory:function(){var e=this;return i()(d.a.mark((function t(){var a,r,n,s;return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.category.name.length){t.next=3;break}return e.category.visible=!1,t.abrupt("return");case 3:return a=e.category,r=e.annualId,n={annualId:e.annualId,name:a.name,complete:!1},t.prev=6,e.category.visible=!1,t.next=10,e.createReviewCategory(n);case 10:if(s=t.sent,!s){t.next=19;break}return t.next=14,e.getCurrentReviewReview(r);case 14:e.category.name="",e.$router.push("/business/annual_reviews/".concat(s.annual_report_id,"/").concat(s.id)),e.toast("Success","Category has been added."),t.next=20;break;case 19:e.toast("Error","Category has not been added. Please try again.");case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](6),e.toast("Error",t.t0.message,!0);case 25:case"end":return t.stop()}}),t,null,[[6,22]])})))()}})},y=g,k=Object(f["a"])(y,r,n,!1,null,"038df7a8",null);t["a"]=k.exports},f245:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row p-x-1"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-body white-card-body reviews__card"},[a("div",{staticClass:"reviews__topiclist"},[e._m(0),a("div",{staticClass:"reviews__card--internal borderless"},[a("EmptyState")],1)])])])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reviews__card--header p-b-20"},[a("h2",[e._v("Activity")]),a("div",[a("a",{staticClass:"btn btn-default d-none"},[e._v("Download")]),a("a",{staticClass:"btn m-l-1 btn-dark"},[e._v("Create Activity")])])])}],s={components:{},data:function(){return{}},created:function(){},methods:{},computed:{}},i=s,o=a("2877"),l=Object(o["a"])(i,r,n,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-52a51925.28f42b00.js.map
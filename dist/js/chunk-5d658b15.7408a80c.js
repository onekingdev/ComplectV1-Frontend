(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d658b15"],{"14f5":function(t,e,i){},"15d0":function(t,e,i){"use strict";i("14f5")},"497e":function(t,e,i){"use strict";i("fb6e")},9268:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"page-header"},[i("h2",{staticClass:"page-header__title"},[t._v("Policies and Procedures")]),i("div",{staticClass:"page-header__actions"},[t.isDowloading?i("span",{staticClass:"dowloading list-page"},[t._m(0)]):i("button",{staticClass:"btn btn btn-default mr-3",on:{click:t.download}},[t._v("Download")]),i("PoliciesModalCreate",{on:{savedConfirmed:t.updateList}},[i("button",{staticClass:"btn btn-dark float-end"},[t._v("New Policy")])])],1)]),i("b-tabs",{staticClass:"special-navs",attrs:{"content-class":"mt-0"}},[i("b-tab",{attrs:{title:"Policies",active:""}},[i("div",{staticClass:"card-body white-card-body card-body_full-height p-x-40"},[i("PoliciesTable",{staticClass:"m-b-20",attrs:{policies:t.filteredUnArchivedListLimited},on:{searching:t.searching}}),!t.loading&&t.filteredUnArchivedList.length?i("b-pagination",{attrs:{"total-rows":t.filteredUnArchivedList.length,"per-page":t.perPage,"aria-controls":"PoliciesTable"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)]),i("b-tab",{attrs:{title:"Archive"}},[i("div",{staticClass:"card-body white-card-body card-body_full-height p-x-40"},[i("PoliciesTable",{attrs:{policies:t.filteredArchivedList},on:{searching:t.searchingArchived}})],1)]),i("b-tab",{attrs:{title:"Setup",lazy:""}},[i("div",{staticClass:"card-body white-card-body card-body_full-height p-x-40"},[i("PoliciesSetup")],1)])],1)],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lds-ring lds-ring-small"},[i("div"),i("div"),i("div"),i("div")])}],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h-100"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4 col-12 m-b-20"},[i("div",{staticClass:"position-relative"},[i("b-icon",{staticClass:"icon-searh",attrs:{icon:"search"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"form-control form-control_search",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchInput},on:{keyup:t.searching,input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),t.isActive?i("button",{staticClass:"btn-clear",on:{click:t.clearInput}},[i("b-icon",{staticClass:"icon-clear",attrs:{icon:"x-circle"}})],1):t._e()],1)]),0!==t.policiesComputed.length&&t.searchInput?i("div",{staticClass:"col-4"},[i("p",[t._v("Found "+t._s(t.policiesComputed.length)+" "+t._s(1===t.policiesComputed.length?"result":"results"))])]):t._e()]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 h-100"},[t.loading?t._e():i("div",[i("div",{staticClass:"table mb-0"},[i("div",{staticClass:"table__row"},[i("div",{staticClass:"table__cell table__cell_title"},[t._v("Name")]),i("div",{staticClass:"table__cell table__cell_title"},[t._v("Status"),i("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),i("div",{staticClass:"table__cell table__cell_title text-right"},[t._v("Last Modified"),i("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),i("div",{staticClass:"table__cell table__cell_title text-right"},[t._v("Date Created"),i("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),i("div",{staticClass:"table__cell",staticStyle:{width:"40px"}})])]),t.policiesComputed&&0!==t.policiesComputed.length?i("nested-draggable",{attrs:{policiesList:t.policies},model:{value:t.policiesComputed,callback:function(e){t.policiesComputed=e},expression:"policiesComputed"}}):t._e()],1),i("Loading"),t.loading||t.policies.length?t._e():i("EmptyState")],1)])])},r=[],n=i("e829"),l=i("a867"),c=i("dd42"),d={props:["policies"],components:{Loading:n["a"],nestedDraggable:l["a"],rawdisplayer:c["a"]},data:function(){return{searchInput:"",isActive:!1}},methods:{searching:function(){this.searchInput.length&&(this.isActive=!0),this.$emit("searching",this.searchInput)},clearInput:function(){this.searchInput="",this.isActive=!1,this.$emit("searching",this.searchInput)}},computed:{loading:function(){return this.$store.getters.loading},policiesComputed:{get:function(){return this.policies},set:function(t){console.log("set value",t)}}}},u=d,h=i("2877"),p=Object(h["a"])(u,a,r,!1,null,null,null),f=p.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("Loading")],1),t.loading?t._e():i("div",{staticClass:"col-12 col-lg-8"},[!t.loading&&t.show?i("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[i("b-form-group",{attrs:{id:"input-group-1"}},[i("h4",{staticClass:"heading-secondary text-bold"},[t._v("Logo")]),i("p",{staticClass:"paragraph"},[t._v("Upload the logo that will show up on the cover page of your compolance manual (Logo visibleÂ "),i("br"),t._v("on white recommend)")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-3"},[i("div",{staticClass:"preview"},[t.url?i("b-img",{attrs:{left:"",src:t.url,alt:"Preview image"}}):t._e()],1)]),i("div",{staticClass:"col-6 pl-0"},[i("b-form-file",{ref:"inputFile",attrs:{state:Boolean(t.form.logo),accept:"image/*",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},on:{change:t.onFileChange},model:{value:t.form.logo,callback:function(e){t.$set(t.form,"logo",e)},expression:"form.logo"}}),i("button",{staticClass:"btn btn-link m-t-10",on:{click:function(e){return e.preventDefault(),t.onRemove.apply(null,arguments)}}},[t._v("Remove")])],1)])]),i("b-form-group",{attrs:{id:"input-group-4"},scopedSlots:t._u([{key:"default",fn:function(e){e.ariaDescribedby;return[i("h4",{staticClass:"heading-secondary text-bold"},[t._v("Display Settings")]),i("p",{staticClass:"paragraph"},[t._v("Select what you want to display on the cover page")]),i("b-form-checkbox",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}},[t._v("Address")]),i("b-form-checkbox",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}},[t._v("Phone")]),i("b-form-checkbox",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}},[t._v("Email")]),i("b-form-checkbox",{model:{value:t.form.disclosure,callback:function(e){t.$set(t.form,"disclosure",e)},expression:"form.disclosure"}},[t._v("Disclosure")])]}}],null,!1,462083052)}),i("b-form-group",[i("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}})],1),i("b-form-group",[i("b-button",{staticClass:"btn mr-2",attrs:{type:"reset"}},[t._v("Reset")]),i("b-button",{staticClass:"btn btn-dark",attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1):t._e()],1)])},v=[],g=i("278c"),b=i.n(g),_={components:{Loading:n["a"]},data:function(){return{form:{logo:null,address:!1,phone:!1,email:!1,disclosure:!1,body:""},show:!0,url:null,inputFile:null}},methods:{onFileChange:function(t){var e=t.target.files[0];this.url=URL.createObjectURL(e),this.form.logo=this.$refs.inputFile.files[0]},onSubmit:function(t){var e=this;t.preventDefault();var i={address:this.form.address,phone:this.form.phone,email:this.form.email,disclosure:this.form.disclosure,body:this.form.body};this.form.logo&&(i.logo=this.form.logo);var s=new FormData;Object.entries(i).forEach((function(t){var e=b()(t,2),i=e[0],o=e[1];return s.append(i,o)})),this.$store.dispatch("postPolicyConfig",s).then((function(t){return e.toast("Success","Setup has been updated.")}))["catch"]((function(t){return e.toast("Error","Setup has not been updated. Please try again. ".concat(t),!0)}))},onReset:function(t){var e=this;t.preventDefault(),this.url=null,this.form.logo=null,this.form.address=!1,this.form.phone=!1,this.form.email=!1,this.form.disclosure=!1,this.form.body="",this.show=!1,this.$nextTick((function(){e.show=!0}))},onRemove:function(){this.url=null,this.form.logo=null}},computed:{loading:function(){return this.$store.getters.loading}},mounted:function(){var t=this;this.$store.dispatch("getPolicyConfig").then((function(e){t.url=e.logo,t.form={address:e.address,phone:e.phone,email:e.email,disclosure:e.disclosure,body:e.body}}))["catch"]((function(t){console.error(t)}))}},C=_,w=(i("497e"),Object(h["a"])(C,m,v,!1,null,"5d4fdc2c",null)),y=w.exports,x=i("f774"),L=i("744f");function P(t,e,i){return t.slice((i-1)*e,i*e)}var $={mixins:[Object(x["a"])()],components:{PoliciesTable:f,PoliciesSetup:y,PoliciesModalCreate:L["a"]},data:function(){return{title:"test123",searchInput:"",searchInputArchived:"",policies:[],id:1,policy:{},perPage:10,currentPage:1,isDowloading:!1}},methods:{download:function(){var t=this;this.isDowloading=!0,this.$store.dispatch("downloadPolicy",{policyId:null}).then((function(e){t.toast("Success","Policy has been queued for download.")}))["catch"]((function(e){t.isDowloading=!1,t.toast("Error",e.message,!0)}))},searching:function(t){this.searchInput=t},searchingArchived:function(t){this.searchInputArchived=t},updateList:function(){var t=this;this.$store.dispatch("getPolicies").then((function(t){}))["catch"]((function(e){console.error(e),t.toast("Error",e.message,!0)}))}},computed:{loading:function(){return this.$store.getters.loading},filteredUnArchivedList:function(){var t=this;return this.unArchivedList.filter((function(e){var i;return null===(i=e.name)||void 0===i?void 0:i.toLowerCase().includes(t.searchInput.toLowerCase())}))},filteredArchivedList:function(){var t=this;return this.archivedList.filter((function(e){var i;return null===(i=e.name)||void 0===i?void 0:i.toLowerCase().includes(t.searchInputArchived.toLowerCase())}))},archivedList:function(){return this.$store.getters.policiesListArchived},unArchivedList:function(){return this.$store.getters.policiesListUnArchived},policiesListComputed:function(){return this.$store.getters.policiesListNested},filteredUnArchivedListLimited:function(){return P(this.filteredUnArchivedList,this.perPage,this.currentPage)}},mounted:function(){var t=this;this.$store.dispatch("getPolicies").then((function(t){}))["catch"]((function(e){console.error(e),t.toast("Error",e.message,!0)}))}},k=$,A=(i("15d0"),Object(h["a"])(k,s,o,!1,null,null,null));e["default"]=A.exports},d1db:function(t,e,i){t.exports=i.p+"img/error_20.5080af0b.svg"},f774:function(t,e,i){"use strict";var s=i("9523"),o=i.n(s),a=function(){return Math.random()},r=function(t){var e=t||"etag",i="new"+e[0].toUpperCase()+e.substring(1);return{data:function(){return o()({},e,a())},methods:o()({},i,(function(){this[e]=a()}))}};e["a"]=r},fb6e:function(t,e,i){}}]);
//# sourceMappingURL=chunk-5d658b15.7408a80c.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-638de742"],{1752:function(t,e,r){t.exports=r.p+"img/mail.bf25b3ef.svg"},"50b1":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"card registration"},[o("div",{staticClass:"card-body white-card-body"},[o("div",{staticClass:"registration-welcome"},[o("h1",{staticClass:"registration__title"},[t._v("Confirm Your Email")]),o("p",{staticClass:"registration__subtitle"},[t._v("We sent a 6 digit code to "+t._s(t.form.email)+". Please enter it below.")])]),o("div",[t.show?o("b-form",{attrs:{autocomplete:"off"},on:{submit:t.onSubmit,keyup:t.onCodeChange}},[o("b-form-group",[o("div",{staticClass:"col text-center"},[o("img",{staticClass:"otp-icon",attrs:{src:r("1752"),width:"180",height:"110"}})])]),o("b-form-group",{staticClass:"m-b-40"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 mx-0"},[o("div",{staticClass:"d-flex justify-content-space-around mx-auto"},[o("b-form-input",{staticClass:"code-input ml-auto",attrs:{id:"inputCode1",type:"number",maxlength:"1"},model:{value:t.form2.codePart1,callback:function(e){t.$set(t.form2,"codePart1",e)},expression:"form2.codePart1"}}),o("b-form-input",{staticClass:"code-input",attrs:{id:"inputCode2",type:"number",maxlength:"1"},model:{value:t.form2.codePart2,callback:function(e){t.$set(t.form2,"codePart2",e)},expression:"form2.codePart2"}}),o("b-form-input",{staticClass:"code-input",attrs:{id:"inputCode3",type:"number",maxlength:"1"},model:{value:t.form2.codePart3,callback:function(e){t.$set(t.form2,"codePart3",e)},expression:"form2.codePart3"}}),o("b-form-input",{staticClass:"code-input",attrs:{id:"inputCode4",type:"number",maxlength:"1"},model:{value:t.form2.codePart4,callback:function(e){t.$set(t.form2,"codePart4",e)},expression:"form2.codePart4"}}),o("b-form-input",{staticClass:"code-input",attrs:{id:"inputCode5",type:"number",maxlength:"1"},model:{value:t.form2.codePart5,callback:function(e){t.$set(t.form2,"codePart5",e)},expression:"form2.codePart5"}}),o("b-form-input",{staticClass:"code-input mr-auto",attrs:{id:"inputCode6",type:"number",maxlength:"1"},model:{value:t.form2.codePart6,callback:function(e){t.$set(t.form2,"codePart6",e)},expression:"form2.codePart6"}})],1),t.error?o("div",{staticClass:"invalid-feedback d-block text-center"},[t._v(t._s(t.error))]):t._e(),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form2.code,expression:"form2.code"}],attrs:{type:"hidden"},domProps:{value:t.form2.code},on:{input:function(e){e.target.composing||t.$set(t.form2,"code",e.target.value)}}})])])]),o("b-button",{ref:"codesubmit",staticClass:"w-100 m-b--40",attrs:{type:"submit",variant:"dark"}},[t._v("Submit")])],1):t._e()],1)]),o("div",{staticClass:"card-footer"},[o("b-form-group",{staticClass:"text-center mb-0"},[o("button",{staticClass:"btn link",on:{click:function(e){return e.stopPropagation(),t.resendOTP.apply(null,arguments)}}},[t._v("Send new code")])])],1)])},s=[],i={props:["form","userid","userType","emailVerified","inviteToken"],data:function(){return{show:!0,error:"",errors:{},form2:{codePart1:"",codePart2:"",codePart3:"",codePart4:"",codePart5:"",codePart6:"",code:""}}},created:function(){this.form||this.$router.back()},methods:{onSubmit:function(t){var e=this;if(t.preventDefault(),this.error="",this.errors=[],this.emailVerified)if(this.emailVerified){var r={user:{email:this.form.email,password:this.form.password},otp_secret:this.form2.code};this.$store.dispatch("signIn",r).then((function(t){if(t.errors&&(e.error=t.message),!t.errors&&t.specialist&&t.token&&e.inviteToken){var r="/specialist";window.location.href="".concat(r)}else if(!t.errors&&t.token){var o=t.business?"/business":"/specialist";window.location.href="".concat(o)}}))["catch"]((function(t){t.data.errors&&(e.error=t.data.errors.invalid)}))}else;else{var o={email:this.form.email,otp_secret:this.form2.code};this.$store.dispatch("confirmEmail",o).then((function(t){if(e.error=t.message,"Invalid 6 digits code"===t.message&&t.errors,!t.errors&&t.specialist&&t.token&&e.inviteToken){var r="/specialist";window.location.href="".concat(r)}else if(!t.errors&&t.token){var o=t.business?"/business":"/specialist";e.$router.push("".concat(o,"/onboarding"))}}))["catch"]((function(t){console.error(t)}))}},onCodeChange:function(t){if(this.error="",this.errors=[],6===t.target.value.length)for(var e=1;e<=6;e++)this.form2["codePart"+e]=t.target.value.charAt(e-1);var r;if(8===t.keyCode||46===t.keyCode)return t.preventDefault(),t.target.value="",null===(r=t.target.previousElementSibling)||void 0===r||r.focus(),void(this.form2.codePart1||this.form2.codePart2||this.form2.codePart3||this.form2.codePart4||this.form2.codePart5||this.form2.codePart6||(this.form2.code=""));(t.target.value.length<6&&t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105)&&(t.preventDefault(),t.target.value=t.key,t.target.nextElementSibling&&(t.target.nextElementSibling.value="",t.target.nextElementSibling.focus()),t.target.nextElementSibling||this.$refs.codesubmit.focus()),this.form2.code=this.form2.codePart1+this.form2.codePart2+this.form2.codePart3+this.form2.codePart4+this.form2.codePart5+this.form2.codePart6,13===t.keyCode&&this.onSubmit(t)},resendOTP:function(){var t=this,e={user:{email:this.form.email}};this.$store.dispatch("resendOTP",e).then((function(e){return t.toast("Success","".concat(e.message))}))["catch"]((function(e){return t.toast("Error","".concat(e.status," (").concat(e.statusText,")"),!0)}))}},computed:{currentUser:function(){return this.$store.getters.getUser}}},a=i,n=r("2877"),c=Object(n["a"])(a,o,s,!1,null,"77cbd522",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-638de742.052fba0b.js.map
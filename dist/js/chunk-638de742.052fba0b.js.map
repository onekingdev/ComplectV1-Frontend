{"version":3,"sources":["webpack:///./src/assets/mail.svg","webpack:///./src/auth/components/OtpConfirm.vue?5ef0","webpack:///src/auth/components/OtpConfirm.vue","webpack:///./src/auth/components/OtpConfirm.vue?c893","webpack:///./src/auth/components/OtpConfirm.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","form","email","attrs","on","onSubmit","onCodeChange","model","value","form2","callback","$$v","$set","expression","error","_e","directives","name","rawName","domProps","$event","target","composing","ref","stopPropagation","resendOTP","apply","arguments","staticRenderFns","component"],"mappings":"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","file":"js/chunk-638de742.052fba0b.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/mail.bf25b3ef.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card registration\"},[_c('div',{staticClass:\"card-body white-card-body\"},[_c('div',{staticClass:\"registration-welcome\"},[_c('h1',{staticClass:\"registration__title\"},[_vm._v(\"Confirm Your Email\")]),_c('p',{staticClass:\"registration__subtitle\"},[_vm._v(\"We sent a 6 digit code to \"+_vm._s(_vm.form.email)+\". Please enter it below.\")])]),_c('div',[(_vm.show)?_c('b-form',{attrs:{\"autocomplete\":\"off\"},on:{\"submit\":_vm.onSubmit,\"keyup\":_vm.onCodeChange}},[_c('b-form-group',[_c('div',{staticClass:\"col text-center\"},[_c('img',{staticClass:\"otp-icon\",attrs:{\"src\":require(\"@/assets/mail.svg\"),\"width\":\"180\",\"height\":\"110\"}})])]),_c('b-form-group',{staticClass:\"m-b-40\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 mx-0\"},[_c('div',{staticClass:\"d-flex justify-content-space-around mx-auto\"},[_c('b-form-input',{staticClass:\"code-input ml-auto\",attrs:{\"id\":\"inputCode1\",\"type\":\"number\",\"maxlength\":\"1\"},model:{value:(_vm.form2.codePart1),callback:function ($$v) {_vm.$set(_vm.form2, \"codePart1\", $$v)},expression:\"form2.codePart1\"}}),_c('b-form-input',{staticClass:\"code-input\",attrs:{\"id\":\"inputCode2\",\"type\":\"number\",\"maxlength\":\"1\"},model:{value:(_vm.form2.codePart2),callback:function ($$v) {_vm.$set(_vm.form2, \"codePart2\", $$v)},expression:\"form2.codePart2\"}}),_c('b-form-input',{staticClass:\"code-input\",attrs:{\"id\":\"inputCode3\",\"type\":\"number\",\"maxlength\":\"1\"},model:{value:(_vm.form2.codePart3),callback:function ($$v) {_vm.$set(_vm.form2, \"codePart3\", $$v)},expression:\"form2.codePart3\"}}),_c('b-form-input',{staticClass:\"code-input\",attrs:{\"id\":\"inputCode4\",\"type\":\"number\",\"maxlength\":\"1\"},model:{value:(_vm.form2.codePart4),callback:function ($$v) {_vm.$set(_vm.form2, \"codePart4\", $$v)},expression:\"form2.codePart4\"}}),_c('b-form-input',{staticClass:\"code-input\",attrs:{\"id\":\"inputCode5\",\"type\":\"number\",\"maxlength\":\"1\"},model:{value:(_vm.form2.codePart5),callback:function ($$v) {_vm.$set(_vm.form2, \"codePart5\", $$v)},expression:\"form2.codePart5\"}}),_c('b-form-input',{staticClass:\"code-input mr-auto\",attrs:{\"id\":\"inputCode6\",\"type\":\"number\",\"maxlength\":\"1\"},model:{value:(_vm.form2.codePart6),callback:function ($$v) {_vm.$set(_vm.form2, \"codePart6\", $$v)},expression:\"form2.codePart6\"}})],1),(_vm.error)?_c('div',{staticClass:\"invalid-feedback d-block text-center\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form2.code),expression:\"form2.code\"}],attrs:{\"type\":\"hidden\"},domProps:{\"value\":(_vm.form2.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form2, \"code\", $event.target.value)}}})])])]),_c('b-button',{ref:\"codesubmit\",staticClass:\"w-100 m-b--40\",attrs:{\"type\":\"submit\",\"variant\":\"dark\"}},[_vm._v(\"Submit\")])],1):_vm._e()],1)]),_c('div',{staticClass:\"card-footer\"},[_c('b-form-group',{staticClass:\"text-center mb-0\"},[_c('button',{staticClass:\"btn link\",on:{\"click\":function($event){$event.stopPropagation();return _vm.resendOTP.apply(null, arguments)}}},[_vm._v(\"Send new code\")])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  .card.registration\n    .card-body.white-card-body\n      .registration-welcome\n        h1.registration__title Confirm Your Email\n        p.registration__subtitle We sent a 6 digit code to {{ form.email }}. Please enter it below.\n      div\n        b-form(@submit='onSubmit' @keyup=\"onCodeChange\" v-if='show' autocomplete=\"off\")\n          b-form-group\n            .col.text-center\n              img.otp-icon(src='@/assets/mail.svg' width=\"180\" height=\"110\")\n          b-form-group.m-b-40\n            .row\n              .col-12.mx-0\n                .d-flex.justify-content-space-around.mx-auto\n                  b-form-input#inputCode1.code-input.ml-auto(v-model='form2.codePart1' type='number' maxlength=\"1\")\n                  b-form-input#inputCode2.code-input(v-model='form2.codePart2' type='number' maxlength=\"1\")\n                  b-form-input#inputCode3.code-input(v-model='form2.codePart3' type='number' maxlength=\"1\")\n                  b-form-input#inputCode4.code-input(v-model='form2.codePart4' type='number' maxlength=\"1\")\n                  b-form-input#inputCode5.code-input(v-model='form2.codePart5' type='number' maxlength=\"1\")\n                  b-form-input#inputCode6.code-input.mr-auto(v-model='form2.codePart6' type='number' maxlength=\"1\")\n                .invalid-feedback.d-block.text-center(v-if=\"error\") {{ error }}\n                input(v-model='form2.code' type='hidden')\n          b-button.w-100.m-b--40(type='submit' variant='dark' ref=\"codesubmit\") Submit\n    .card-footer\n      b-form-group.text-center.mb-0\n        button.btn.link(@click.stop=\"resendOTP\") Send new code\n</template>\n\n<script>\n  export default {\n    props: ['form', 'userid', 'userType', 'emailVerified', 'inviteToken'],\n    data() {\n      return {\n        show: true,\n        error: '',\n        errors: {},\n        form2: {\n          codePart1: '',\n          codePart2: '',\n          codePart3: '',\n          codePart4: '',\n          codePart5: '',\n          codePart6: '',\n          code: '',\n        },\n      }\n    },\n    created() {\n      if (!this.form) this.$router.back()\n    },\n    methods: {\n      onSubmit(event) {\n        event.preventDefault()\n        this.error = ''\n        this.errors = []\n\n        // if(this.form2.code.length !== 6) {\n        //   this.error = 'Code length incorrect'\n        //   return\n        // }\n\n        // IF UNVERIFIED EMAIL\n        if(!this.emailVerified) {\n          const dataToSend1 = {\n            email: this.form.email,\n            otp_secret: this.form2.code\n          }\n\n          this.$store.dispatch('confirmEmail', dataToSend1)\n            .then((response) => {\n              this.error = response.message\n              if(response.message === 'Invalid 6 digits code')\n              // this.toast('Error', 'Verification code failed. Try again.', true)\n              if (response.errors) { }\n              if (!response.errors && response.specialist && response.token && this.inviteToken) {\n                const dashboard = '/specialist'\n                window.location.href = `${dashboard}`;\n                return\n              }\n              if (!response.errors && response.token) {\n                // open step 3\n                // this.step2 = false\n                // this.step3 = true\n\n                const dashboard = response.business ? '/business' : '/specialist'\n                // window.location.href = `${dashboard}`;\n                this.$router.push(`${dashboard}/onboarding`)\n              }\n            })\n            .catch((error) => {\n              console.error(error)\n              // this.toast('Error', `${error.message}`, true)\n            })\n\n          return\n        }\n\n        // IF VERIFIED EMAIL\n        if(this.emailVerified) {\n          const dataToSend = {\n            \"user\": {\n              email: this.form.email,\n              password: this.form.password\n            },\n            otp_secret: this.form2.code\n          }\n\n          this.$store.dispatch('signIn', dataToSend)\n            .then((response) => {\n              if (response.errors) {\n                this.error = response.message\n                // this.toast('Error', 'Verification code failed. Try again.', true)\n              }\n              if (!response.errors && response.specialist && response.token && this.inviteToken) {\n                const dashboard = '/specialist'\n                window.location.href = `${dashboard}`;\n                return\n              }\n              if (!response.errors && response.token) {\n                // open dashboard\n                const dashboard = response.business ? '/business' : '/specialist'\n                window.location.href = `${dashboard}`;\n                // this.$router.push(`${dashboard}/onboarding`)\n                // this.$router.push(`${dashboard}`)\n              }\n            })\n            .catch((error) => {\n              // this.toast('Error', 'Verification code failed. Try again.', true)\n              if (error.data.errors) {\n                this.error = error.data.errors.invalid\n              }\n            })\n\n          return\n        }\n      },\n      onCodeChange(e){\n        this.error = ''\n        this.errors = []\n\n        // CATCH COPY PASTE CASE\n        if (e.target.value.length === 6) {\n          for(let i=1; i <= 6; i++) {\n            this.form2['codePart'+i] = e.target.value.charAt(i-1)\n          }\n        }\n\n        if (e.keyCode === 8 || e.keyCode === 46) {\n          // BACKSPACE === 8 DELETE === 46\n          e.preventDefault();\n          e.target.value = ''\n          e.target.previousElementSibling?.focus()\n          // CLEAR CODE if all fields empty\n          if(!this.form2.codePart1 && !this.form2.codePart2 && !this.form2.codePart3 && !this.form2.codePart4 && !this.form2.codePart5 && !this.form2.codePart6) this.form2.code = ''\n          return\n        }\n\n        if (e.target.value.length < 6 && (e.keyCode >= 48) && (e.keyCode <= 57) || (e.keyCode >= 96) && (e.keyCode <= 105)) {\n          e.preventDefault();\n          e.target.value = e.key\n          if(e.target.nextElementSibling) {\n            e.target.nextElementSibling.value = ''\n            e.target.nextElementSibling.focus()\n          }\n\n          if(!e.target.nextElementSibling) {\n            this.$refs.codesubmit.focus();\n          }\n        }\n\n        this.form2.code = this.form2.codePart1 + this.form2.codePart2 + this.form2.codePart3 + this.form2.codePart4 + this.form2.codePart5 + this.form2.codePart6\n\n        if (e.keyCode === 13) {\n          // ENTER KEY CODE\n          this.onSubmit(e)\n        }\n      },\n      resendOTP() {\n        const data = {\n          \"user\": {\n            \"email\": this.form.email,\n          },\n        }\n        this.$store.dispatch('resendOTP', data)\n          .then((response) => this.toast('Success', `${response.message}`))\n          .catch((error) => this.toast('Error', `${error.status} (${error.statusText})`, true))\n      },\n    },\n    computed: {\n      currentUser() {\n        return this.$store.getters.getUser\n      },\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtpConfirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtpConfirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OtpConfirm.vue?vue&type=template&id=77cbd522&scoped=true&lang=pug&\"\nimport script from \"./OtpConfirm.vue?vue&type=script&lang=js&\"\nexport * from \"./OtpConfirm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77cbd522\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
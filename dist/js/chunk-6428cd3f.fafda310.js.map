{"version":3,"sources":["webpack:///./src/business/policies/Details/PolicyDetailsWithoutSections.vue?5eac","webpack:///./src/business/policies/Modals/PoliciesModalRemoveSubsection.vue?df98","webpack:///src/business/policies/Modals/PoliciesModalRemoveSubsection.vue","webpack:///./src/business/policies/Modals/PoliciesModalRemoveSubsection.vue?2188","webpack:///./src/business/policies/Modals/PoliciesModalRemoveSubsection.vue","webpack:///./src/common/Modals/RisksAddEditModal.vue?cc04","webpack:///src/common/Modals/RisksAddEditModal.vue","webpack:///./src/common/Modals/RisksAddEditModal.vue?fb86","webpack:///./src/common/Modals/RisksAddEditModal.vue","webpack:///./src/business/policies/Details/PolicySubsection.vue?1c72","webpack:///src/business/policies/Details/PolicySubsection.vue","webpack:///./src/business/policies/Details/PolicySubsection.vue?aba1","webpack:///./src/business/policies/Details/PolicySubsection.vue","webpack:///./src/business/policies/Risks/PolicyRisks.vue?40bf","webpack:///src/business/policies/Risks/PolicyRisks.vue","webpack:///./src/business/policies/Risks/PolicyRisks.vue?8b00","webpack:///./src/business/policies/Risks/PolicyRisks.vue","webpack:///./src/business/policies/Modals/PoliciesModalPublish.vue?c151","webpack:///src/business/policies/Modals/PoliciesModalPublish.vue","webpack:///./src/business/policies/Modals/PoliciesModalPublish.vue?34eb","webpack:///./src/business/policies/Modals/PoliciesModalPublish.vue","webpack:///./src/business/policies/Details/PolicyDetailsWithoutSections.vue?b5ec","webpack:///./src/business/policies/Tasks/PolicyTasks.vue?ad33","webpack:///src/business/policies/Tasks/PolicyTasks.vue","webpack:///./src/business/policies/Tasks/PolicyTasks.vue?6804","webpack:///./src/business/policies/Tasks/PolicyTasks.vue","webpack:///src/business/policies/Details/PolicyDetailsWithoutSections.vue","webpack:///./src/business/policies/Details/PolicyDetailsWithoutSections.vue?07f7","webpack:///./src/business/policies/Details/PolicyDetailsWithoutSections.vue","webpack:///./src/business/policies/Details/PolicyHistory.vue?dcec","webpack:///src/business/policies/Details/PolicyHistory.vue","webpack:///./src/business/policies/Details/PolicyHistory.vue?d322","webpack:///./src/business/policies/Details/PolicyHistory.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","inline","directives","name","rawName","value","expression","_t","staticClass","attrs","modalId","_v","errors","title","slot","on","$event","$bvModal","hide","submit","staticRenderFns","component","riskId","hideModal","newEtag","submitUrl","undefined","initialrisk","etag","loadrisk","options","onChange","model","risk","callback","$$v","$set","_e","domProps","target","composing","impact","levelOptions","onRiskChange","likelihood","badgeVariant","_s","riskLevelName","mixins","props","id","String","risks","Array","Number","remindAt","type","Boolean","default","risksList","policyId","showRiskOption","data","isActive","methods","Object","assign","concat","risksComputedAsOptions","e","preventDefault","compliance_policy_ids","compliance_policies","map","includes","push","method","$store","event","resultRisk","riskLevelColor","riskLevelNum","getRiskLevelName","num","text","riskLevel","computed","canBeDraft","toId","httpMethod","watch","index","section","children","length","handleBlur","addSubSection","scopedSlots","_u","key","fn","proxy","moveUpSubsection","deleteSubSection","toggleVueEditor","modifiers","description","toggleVueEditorHandler","_l","child","subIndex","addSection","risksComputed","savedConfirmed","currentUserBasic","policy","archived","loading","policyById","showLevel","risk_level","dateToHuman","created_at","editRisk","deleteRisk","_b","updateRisk","nowEditingRisk","updateList","policiesListNested","policiesComputed","leftMenu","statusVariant","status","saveDraft","_m","isDowloading","download","publishPolicy","closeAndExit","archivePolicy","deletePolicy","taskDefaults","$emit","toggleSorting","tasksSorted","task","body","assignee_name","_f","remind_at","end_date","required","sortField","sortDirection","field","initialDirection","getters","tasksComputed","reminders","a","b","sort","compare","linkable_type","linkable_id","components","Loading","TaskFormModal","i","versions","published_by","updated_at"],"mappings":"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","file":"js/chunk-6428cd3f.fafda310.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyDetailsWithoutSections.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"title\":\"Remove Subsections\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-1 text-center px-0\"},[_c('b-icon',{staticClass:\"mt-2 ml-3\",attrs:{\"icon\":\"dash-circle-fill\",\"scale\":\"2\",\"variant\":\"danger\"}})],1),_c('div',{staticClass:\"col\"},[_c('p',{staticClass:\"paragraph m-b-10\"},[_vm._v(\"Removing this subsections will permamently delete any items populated withing it.\")]),_c('p',{staticClass:\"paragraph mb-0\"},[_c('b',[_vm._v(\"Do you want to continue?\")])])])]),_c('Errors',{attrs:{\"errors\":_vm.errors.title}}),_c('template',{slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-link\",on:{\"click\":function($event){return _vm.$bvModal.hide(_vm.modalId)}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-danger\",on:{\"click\":_vm.submit}},[_vm._v(\"Confirm\")])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" title=\"Remove Subsections\")\n      .row\n        .col-md-1.text-center.px-0\n          b-icon.mt-2.ml-3(icon=\"dash-circle-fill\" scale=\"2\" variant=\"danger\")\n        .col\n          p.paragraph.m-b-10 Removing this subsections will permamently delete any items populated withing it.\n          p.paragraph.mb-0\n            b Do you want to continue?\n      Errors(:errors=\"errors.title\")\n\n      template(slot=\"modal-footer\")\n        button.btn.btn-link(@click=\"$bvModal.hide(modalId)\") Cancel\n        button.btn.btn-danger(@click=\"submit\") Confirm\n</template>\n\n<script>\n  const rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n  export default {\n    props: {\n      flex: {\n        type: Boolean,\n        default: false\n      },\n      inline: {\n        type: Boolean,\n        default: true\n      },\n    },\n    data() {\n      return {\n        modalId: `modal_${rnd()}`,\n        policy: {\n          name: '',\n          description: 'N/A',\n          sections: [],\n        },\n        errors: []\n      }\n    },\n    methods: {\n      submit(e) {\n        e.preventDefault();\n        this.errors = [];\n\n        this.$emit('removeSubsectionConfirmed')\n        this.$bvModal.hide(this.modalId)\n      },\n    },\n    computed: {\n\n    },\n    watch: {\n\n    },\n    components: {\n\n    }\n  }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoliciesModalRemoveSubsection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoliciesModalRemoveSubsection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PoliciesModalRemoveSubsection.vue?vue&type=template&id=74f9c286&lang=pug&\"\nimport script from \"./PoliciesModalRemoveSubsection.vue?vue&type=script&lang=js&\"\nexport * from \"./PoliciesModalRemoveSubsection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"title\":_vm.riskId ? 'Edit risk' : 'New risk'},on:{\"close\":_vm.hideModal,\"show\":_vm.newEtag}},[_c('ModelLoader',{attrs:{\"url\":_vm.riskId ? _vm.submitUrl : undefined,\"default\":_vm.initialrisk,\"etag\":_vm.etag},on:{\"loaded\":_vm.loadrisk}},[(_vm.showRiskOption)?_c('b-form-group',{staticClass:\"form-label mb-3\",attrs:{\"id\":\"input-group-1\",\"label\":\"Risk\",\"label-for\":\"select-1\"}},[_c('b-form-select',{attrs:{\"id\":\"select-1\",\"options\":_vm.options,\"required\":\"\"},on:{\"change\":_vm.onChange},model:{value:(_vm.risk.risks),callback:function ($$v) {_vm.$set(_vm.risk, \"risks\", $$v)},expression:\"risk.risks\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.risk}})],1):_vm._e(),_c('b-row',{attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"Risk Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.risk.name),expression:\"risk.name\"}],staticClass:\"form-control\",domProps:{\"value\":(_vm.risk.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.risk, \"name\", $event.target.value)}}}),_c('Errors',{attrs:{\"errors\":_vm.errors.name}})],1)]),_c('b-row',{staticClass:\"m-t-1\",attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col-sm m-r-1\"},[_c('b-form-group',{staticClass:\"form-label\",attrs:{\"id\":\"input-group-2\",\"label\":\"Impact\",\"label-for\":\"select-2\"}},[_c('b-form-select',{attrs:{\"id\":\"select-2\",\"errors\":_vm.errors.impact,\"options\":_vm.levelOptions},on:{\"change\":_vm.onRiskChange},model:{value:(_vm.risk.impact),callback:function ($$v) {_vm.$set(_vm.risk, \"impact\", $$v)},expression:\"risk.impact\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.impact}})],1)],1),_c('div',{staticClass:\"col-sm\"},[_c('b-form-group',{staticClass:\"form-label\",attrs:{\"id\":\"input-group-3\",\"label\":\"Likelihood\",\"label-for\":\"select-3\"}},[_c('b-form-select',{attrs:{\"id\":\"select-3\",\"errors\":_vm.errors.likelihood,\"options\":_vm.levelOptions},on:{\"change\":_vm.onRiskChange},model:{value:(_vm.risk.likelihood),callback:function ($$v) {_vm.$set(_vm.risk, \"likelihood\", $$v)},expression:\"risk.likelihood\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.likelihood}})],1)],1)]),_c('b-row',{staticClass:\"mt-2\",attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"Risk Level\")]),_c('div',[_c('b-icon',{staticClass:\"mr-3\",attrs:{\"icon\":\"exclamation-triangle-fill\",\"scale\":\"1\",\"variant\":_vm.badgeVariant}}),_vm._v(_vm._s(_vm.riskLevelName))],1)])])],1),_c('template',{slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-link\",on:{\"click\":function($event){return _vm.hideModal()}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-dark\",on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.riskId ? 'Save' : 'Add'))])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" :title=\"riskId ? 'Edit risk' : 'New risk'\" @close=\"hideModal\" @show=\"newEtag\")\n      ModelLoader(:url=\"riskId ? submitUrl : undefined\" :default=\"initialrisk\" :etag=\"etag\" @loaded=\"loadrisk\")\n\n        b-form-group#input-group-1.form-label.mb-3(v-if=\"showRiskOption\" label='Risk' label-for='select-1')\n          b-form-select#select-1(v-model='risk.risks' :options='options' @change=\"onChange\" required)\n          Errors(:errors=\"errors.risk\")\n\n        b-row(no-gutters)\n          .col\n            label.form-label Risk Name\n            input.form-control(v-model=\"risk.name\" type=text)\n            Errors(:errors=\"errors.name\")\n\n        b-row.m-t-1(no-gutters)\n          .col-sm.m-r-1\n            b-form-group#input-group-2.form-label(label='Impact' label-for='select-2')\n              b-form-select#select-2(v-model=\"risk.impact\" :errors=\"errors.impact\" :options=\"levelOptions\" @change=\"onRiskChange\")\n              Errors(:errors=\"errors.impact\")\n          .col-sm\n            b-form-group#input-group-3.form-label(label='Likelihood' label-for='select-3')\n              b-form-select#select-3(v-model=\"risk.likelihood\" :errors=\"errors.likelihood\" :options=\"levelOptions\" @change=\"onRiskChange\")\n              Errors(:errors=\"errors.likelihood\")\n\n        b-row.mt-2(no-gutters)\n          .col\n            label.form-label Risk Level\n            div\n              b-icon.mr-3(icon=\"exclamation-triangle-fill\" scale=\"1\" :variant=\"badgeVariant\")\n              | {{ riskLevelName }}\n\n      template(slot=\"modal-footer\")\n        button.btn.btn-link(@click=\"hideModal()\") Cancel\n        button.btn.btn-dark(@click=\"submit\") {{ riskId ? 'Save' : 'Add' }}\n</template>\n\n<script>\nimport EtaggerMixin from '@/mixins/EtaggerMixin'\n\nconst rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n\nconst initialrisk = () => ({\n  name: \"\",\n  id: null,\n  impact: 0,\n  likelihood: 0,\n  compliance_policies: [],\n  compliance_policy_ids: []\n})\n\nexport default {\n  mixins: [EtaggerMixin()],\n  props: {\n    id: String,\n    risks: Array,\n    riskId: Number,\n    remindAt: String,\n    inline: {\n      type: Boolean,\n      default: true\n    },\n    risksList: Array,\n    policyId: Number,\n    showRiskOption: {\n      type: Boolean,\n      default: false,\n    }\n  },\n  data() {\n    return {\n      modalId: this.id || `modal_${rnd()}`,\n      risk: initialrisk(),\n      isActive: false,\n      options: [\n        { value: null, text: 'New Risk' },\n      ],\n      levelOptions: [\n        { value: 0, text: 'Low' },\n        { value: 1, text: 'Medium' },\n        { value: 2, text: 'High' },\n      ],\n      badgeVariant: 'secondary',\n      riskLevelName: '---',\n      errors: {},\n    }\n  },\n  methods: {\n    hideModal() {\n      this.errors = {}\n      this.$bvModal.hide(this.modalId)\n    },\n    loadrisk(risk) {\n      this.risk = Object.assign({}, this.risk, risk)\n      this.onRiskChange()\n\n      this.options = [{ value: null, text: 'New Risk' }]\n      this.options = this.options.concat(this.risksComputedAsOptions)\n    },\n    submit(e) {\n      e.preventDefault()\n      this.errors = {}\n      if (!this.risk.name) {\n        this.$set(this.errors, 'name', ['Required field'])\n        return\n      }\n\n      this.risk.compliance_policy_ids = this.risk.compliance_policies.map(policy => policy.id)\n      if (!this.risk.compliance_policy_ids.includes(this.policyId)) this.risk.compliance_policy_ids.push(this.policyId)\n\n      let method;\n      if(!this.riskId && !this.risk.id) {\n        method = 'createRisk'\n      } else {\n        method = 'updateRisk'\n      }\n\n      this.$store\n        .dispatch(method, {...this.risk})\n        .then(response => {\n          if (response.errors) {\n            const text = method === 'createRisk' ? 'Risk has not been created. Please try again.' : 'Risk has not been updated. Please try again.'\n            this.toast('Error', text)\n          } else {\n            if (method == 'createRisk') {\n              this.toast('Success', 'Risk has been created.')\n            } else {\n              this.toast('Success', 'Risk has been updated.')\n            }\n            this.$emit('saved', response)\n            this.$bvModal.hide(this.modalId)\n            this.newEtag()\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          this.toast('Error', `Risk has not been created. Please try again. ${error}`, true)\n        })\n    },\n    onChange(event){\n      // CATCH RISK NEW OR FROM CREATED\n      if (event === null) {\n        this.isActive = true\n        this.risk = initialrisk()\n        this.badgeVariant = 'secondary'\n        this.riskLevelName = '---'\n        return;\n      }\n      else  {\n        this.isActive = false\n      }\n\n      const resultRisk = this.risks.find(risk => risk.id === event)\n      this.risk = resultRisk\n      this.onRiskChange()\n    },\n    onRiskChange(){\n      const riskLevelNum = this.riskLevel(this.risk.likelihood, this.risk.impact)\n      this.riskLevelColor(riskLevelNum)\n      this.getRiskLevelName(riskLevelNum)\n    },\n    getRiskLevelName(num) {\n      this.riskLevelName = this.levelOptions[num].text\n    },\n    riskLevel(likelihood, impact) {\n      if ((likelihood > 0) && (impact === 2)) {\n        return 2;\n      } else if ((likelihood < 2) && (impact === 0)) {\n        return 0;\n      } else {\n        return 1;\n      }\n    },\n    riskLevelColor(num) {\n      if (num === 0) this.badgeVariant = 'success'\n      if (num === 1) this.badgeVariant = 'warning'\n      if (num === 2) this.badgeVariant = 'danger'\n    },\n  },\n  computed: {\n    initialrisk: () => initialrisk,\n    canBeDraft() {\n      return !this.riskId || ('draft' === this.risk.status)\n    },\n    submitUrl() {\n      const toId = this.riskId ? `/${this.riskId}` : ''\n      return '/api/business/risks' + toId\n    },\n    httpMethod() {\n      return this.riskId ? 'PUT' : 'POST'\n    },\n    risksComputedAsOptions() {\n      return this.risks.map(risk => {\n        return {\n          value: risk.id, text: risk.name\n        }\n      })\n    }\n  },\n  watch: {}\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksAddEditModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksAddEditModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RisksAddEditModal.vue?vue&type=template&id=3182b004&lang=pug&\"\nimport script from \"./RisksAddEditModal.vue?vue&type=script&lang=js&\"\nexport * from \"./RisksAddEditModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"policy-details-subsection\",attrs:{\"data-section-id\":_vm.index}},[_c('div',{staticClass:\"policy-details__name mb-0\"},[_vm._v(\"Section Name\")]),_c('div',{staticClass:\"d-flex align-items-center\"},[(_vm.section.children && _vm.section.children.length > 0)?_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"chevron-compact-down\"}}):_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"chevron-compact-right\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.section.title),expression:\"section.title\"}],staticClass:\"policy-details__input mb-0\",domProps:{\"value\":(_vm.section.title)},on:{\"blur\":_vm.handleBlur,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.section, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"actions\"},[(_vm.section.children.length === 0)?_c('button',{staticClass:\"policy-details__btn mr-3 btn btn-default\",on:{\"click\":_vm.addSubSection}},[_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"plus-circle-fill\"}}),_vm._v(\"Add Subsection\")],1):_vm._e(),_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"sm\",\"variant\":\"light\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{attrs:{\"icon\":\"three-dots\"}})]},proxy:true}])},[_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.moveUpSubsection(_vm.section)}}},[_vm._v(\"Move up\")]),_c('PoliciesModalRemoveSubsection',{attrs:{\"inline\":false},on:{\"removeSubsectionConfirmed\":_vm.deleteSubSection}},[_c('b-dropdown-item',{staticClass:\"delete\"},[_vm._v(\"Delete\")])],1)],1)],1)],1),_c('div',{staticClass:\"policy-details__name mb-0\"},[_vm._v(\"Description\")]),(!_vm.toggleVueEditor)?_c('div',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.left\",modifiers:{\"hover\":true,\"left\":true}}],staticClass:\"policy-details__text-editor\",attrs:{\"title\":\"Click to edit text\"},domProps:{\"innerHTML\":_vm._s(_vm.section.description ? _vm.section.description : _vm.description)},on:{\"click\":_vm.toggleVueEditorHandler}}):_vm._e(),(_vm.toggleVueEditor)?_c('Tiptap',{staticClass:\"policy-details__text-editor\",on:{\"blur\":_vm.handleBlur},model:{value:(_vm.section.description),callback:function ($$v) {_vm.$set(_vm.section, \"description\", $$v)},expression:\"section.description\"}}):_vm._e(),(_vm.section.children && _vm.section.children.length > 0)?_c('div',_vm._l((_vm.section.children),function(child,subIndex){return _c('PolicySubsection',{key:child.id,attrs:{\"section\":child,\"index\":subIndex,\"parentSection\":_vm.section,\"length\":_vm.section.children.length},on:{\"addSection\":_vm.addSection,\"deleteSubSection\":_vm.deleteSubSection}})}),1):_vm._e()],1),(_vm.index + 1 === _vm.length)?_c('button',{staticClass:\"policy-details__btn mr-3 btn btn-default\",on:{\"click\":_vm.addSection}},[_vm._v(\"Add Section\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div\n    .policy-details-subsection(:data-section-id=\"index\")\n      .policy-details__name.mb-0 Section Name\n      .d-flex.align-items-center\n        b-icon.mr-2(v-if=\"section.children && section.children.length > 0\" icon=\"chevron-compact-down\")\n        b-icon.mr-2(v-else icon=\"chevron-compact-right\")\n        input.policy-details__input.mb-0(v-model=\"section.title\", @blur=\"handleBlur\")\n        .actions\n          button.policy-details__btn.mr-3.btn.btn-default(v-if=\"section.children.length === 0\", @click=\"addSubSection\")\n            b-icon.mr-2(icon='plus-circle-fill')\n            | Add Subsection\n          b-dropdown(size=\"sm\" variant=\"light\" class=\"m-0 p-0\" right)\n            template(#button-content)\n              b-icon(icon=\"three-dots\")\n            b-dropdown-item(@click=\"moveUpSubsection(section)\") Move up\n            PoliciesModalRemoveSubsection(@removeSubsectionConfirmed=\"deleteSubSection\" :inline=\"false\")\n              b-dropdown-item.delete Delete\n      .policy-details__name.mb-0 Description\n      .policy-details__text-editor(@click=\"toggleVueEditorHandler\", v-if=\"!toggleVueEditor\", v-b-tooltip.hover.left title=\"Click to edit text\", v-html=\"section.description ? section.description : description\")\n      Tiptap.policy-details__text-editor(v-if=\"toggleVueEditor\", v-model=\"section.description\", @blur=\"handleBlur\")\n      div(v-if=\"section.children && section.children.length > 0\")\n        PolicySubsection(\n        v-for=\"(child, subIndex) in section.children\"\n        v-bind:section=\"child\"\n        :index=\"subIndex\"\n        :key=\"child.id\"\n        :parentSection=\"section\"\n        :length = \"section.children.length\"\n        @addSection=\"addSection\"\n        @deleteSubSection=\"deleteSubSection\")\n      <!--component(v-for=\"subSectionChild in subSectionsChildrens\", v-bind:is=\"subSectionChild.component\", :key=\"subSectionChild.id\", :subSectionChild=\"subSectionChild\", :subSectionsID=\"subSectionsID\" @clicked=\"onClickButton\", @clickedSaveIt=\"onClickSaveSubsection\")-->\n    button.policy-details__btn.mr-3.btn.btn-default(v-if=\"index + 1 === length\",  @click=\"addSection\") Add Section\n</template>\n\n<script>\n  import Tiptap from '@/common/Tiptap'\n  import PoliciesModalRemoveSubsection from \"../Modals/PoliciesModalRemoveSubsection\"\n\n  export default {\n    name: 'PolicySubsection',\n    props: {\n      length: {\n        type: Number,\n        required: false,\n      },\n      section: {\n        type: Object,\n        required: true,\n      },\n      index: {\n        type: Number,\n        required: true\n      },\n      parentSection: {\n        required: false\n      }\n    },\n    components: {\n      Tiptap,\n      PoliciesModalRemoveSubsection,\n    },\n    data() {\n      return {\n        description: \"\",\n        title: \"New Section\",\n        toggleVueEditor: false,\n        isActive: false,\n        count: 0,\n      }\n    },\n    computed: {\n\n    },\n    methods: {\n      deleteSubSection() {\n        if (!this.parentSection) {\n          this.deleteSection()\n          return\n        }\n        this.parentSection.children.splice(this.index, 1)\n      },\n      deleteSection() {\n        this.$emit('deleteSection', this.index)\n      },\n      addSection(event) {\n        if (!this.parentSection) {\n          this.$emit('addSection', event)\n          return\n        }\n\n        if (typeof this.parentSection.children !== 'undefined') {\n          if(event) event.target.style.display = 'none';\n          const id = Math.floor(Math.random() * 100)\n\n          this.parentSection.children.push({\n            id: id,\n            title: `${this.title}`,\n            description: this.description,\n            children: [],\n          })\n        }\n      },\n      addSubSection(event) {\n        if(event) event.target.closest('.policy-details__btn').style.display = 'none';\n        const id = Math.floor(Math.random() * 100)\n\n        this.section.children.push({\n          // component: SubsectionPolicy,\n          id: this.count++,\n          title: `${this.title}`,\n          description: this.description,\n          children: [],\n        })\n      },\n\n      toggleVueEditorHandler() {\n        this.toggleVueEditor = !this.toggleVueEditor;\n      },\n      handleBlur(e) {\n        console.log(e)\n        if (e?.target?.nodeName !== \"INPUT\")\n          this.toggleVueEditorHandler()\n\n        if (this.parentSection) {\n          this.parentSection.children[this.index] = {\n            title: this.section.title,\n            description: this.section.description,\n            children: this.section.children\n          }\n          console.log(this.parentSection.children)\n        }\n      },\n      moveUpSubsection (section) {\n        console.log('moveUpSubsection')\n        console.log(section)\n        if(!section) return\n\n        const index = this.parentSection.children.findIndex(sec => sec.title === section.title)\n        const prevSections = this.parentSection.children[index - 1]\n        if (prevSections) {\n          this.parentSection.children[index - 1] = {\n            title: this.section.title,\n            description: this.section.description,\n            children: this.section.children\n          }\n          this.parentSection.children[index] = prevSections\n\n          const newArr = this.parentSection.children\n          this.parentSection.children = newArr\n\n          // const newArr = this.parentSection.children.map(record => {\n          //   if (record.title === payload.title) {\n          //     return section\n          //   } else {\n          //     return record\n          //   }\n          // })\n          // this.parentSection.children = newArr\n        }\n        // this.$emit('clickedmoveUpSection', 'someValue')\n      },\n\n      // saveSubsection () {\n      //   // SAVE DATA TO POLICY\n      //   this.$store\n      //     .dispatch(\"createSection\", this.section)\n      //     .then((response) => {\n      //       // this.$router.push(\"/list\");\n      //       // console.log(\"Section is successfull saved!\");\n      //       console.log('response', response)\n      //     })\n      //     .catch((error) => {\n      //       console.log('from PolicySubSection');\n      //       console.error(error);\n      //     });\n      // }\n    },\n  };\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicySubsection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicySubsection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicySubsection.vue?vue&type=template&id=28c1a794&lang=pug&\"\nimport script from \"./PolicySubsection.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicySubsection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"policy-details position-relative\"},[_c('h3',{staticClass:\"policy-details__title\"},[_vm._v(\"Risks\")]),_c('div',{staticClass:\"policy-actions\"},[_c('PolicyRisksModal',{attrs:{\"risks\":_vm.risksComputed,\"policyId\":_vm.policyId,\"showRiskOption\":true},on:{\"saved\":_vm.savedConfirmed}},[(!_vm.currentUserBasic && !_vm.policy.archived)?_c('button',{staticClass:\"btn btn-dark\"},[_vm._v(\"New Risk\")]):_vm._e()])],1),_c('div',{staticClass:\"policy-details__body\"},[_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"56%\"}},[_vm._v(\"Name\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',[_vm._v(\"Impact\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',[_vm._v(\"Likelihood\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',[_vm._v(\"Risk Level\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Date Created\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{attrs:{\"width\":\"35px\"}})])]),(!_vm.loading && _vm.policyById.risks && _vm.policyById.risks.length)?_c('tbody',{staticClass:\"text-dark\"},_vm._l((_vm.policyById.risks),function(risk){return _c('tr',{key:risk.id},[_c('td',[_vm._v(_vm._s(risk.name))]),_c('td',[_vm._v(_vm._s(_vm.showLevel(risk.impact)))]),_c('td',[_vm._v(_vm._s(_vm.showLevel(risk.likelihood)))]),_c('td',[_c('b-badge',{staticClass:\"badge-risk\",attrs:{\"variant\":_vm.badgeVariant(risk.risk_level)}},[_c('b-icon-exclamation-triangle-fill',{staticClass:\"mr-2\"}),_vm._v(_vm._s(_vm.showLevel(risk.risk_level)))],1)],1),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm.dateToHuman(risk.created_at)))]),_c('td',[_c('div',{staticClass:\"actions\"},[_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"sm\",\"variant\":\"light\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{attrs:{\"icon\":\"three-dots\"}})]},proxy:true}],null,true)},[_c('b-dropdown-item-button',{on:{\"click\":function($event){return _vm.editRisk(risk.id)}}},[_vm._v(\"Edit\")]),_c('b-dropdown-item-button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteRisk(risk.id)}}},[_vm._v(\"Delete\")])],1)],1)])])}),0):_vm._e()]),_c('PolicyRisksModal',_vm._b({attrs:{\"id\":\"editRiskModal\",\"risks\":_vm.risksComputed,\"policyId\":_vm.policyId,\"inline\":false,\"showRiskOption\":true},on:{\"saved\":_vm.updateRisk}},'PolicyRisksModal',_vm.nowEditingRisk,false)),_c('Loading'),(!_vm.loading && _vm.policyById.risks && !_vm.policyById.risks.length)?_c('EmptyState'):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  .policy-details.position-relative\n    h3.policy-details__title Risks\n    .policy-actions\n      //button.btn.btn.btn-default.mr-3 Download\n      PolicyRisksModal(:risks=\"risksComputed\" :policyId=\"policyId\" :showRiskOption=\"true\" @saved=\"savedConfirmed\")\n        button.btn.btn-dark(v-if=\"!currentUserBasic && !policy.archived\") New Risk\n    .policy-details__body\n      table.table\n        thead\n          tr\n            th(width=\"56%\") Name\n              b-icon.ml-2(icon='chevron-expand')\n            th Impact\n              b-icon.ml-2(icon='chevron-expand')\n            th Likelihood\n              b-icon.ml-2(icon='chevron-expand')\n            th Risk Level\n              b-icon.ml-2(icon='chevron-expand')\n            th.text-right Date Created\n              b-icon.ml-2(icon='chevron-expand')\n            th(width=\"35px\")\n        tbody.text-dark(v-if=\"!loading && policyById.risks && policyById.risks.length\")\n          tr(v-for=\"risk in policyById.risks\" :key=\"risk.id\")\n            td {{ risk.name }}\n            td {{ showLevel(risk.impact) }}\n            td {{ showLevel(risk.likelihood) }}\n            td\n              b-badge.badge-risk(:variant=\"badgeVariant(risk.risk_level)\")\n                b-icon-exclamation-triangle-fill.mr-2\n                | {{ showLevel(risk.risk_level)  }}\n            td.text-right {{ dateToHuman(risk.created_at) }}\n            td\n              .actions\n                b-dropdown(size=\"sm\" variant=\"light\" class=\"m-0 p-0\" right)\n                  template(#button-content)\n                    b-icon(icon=\"three-dots\")\n                  b-dropdown-item-button(@click=\"editRisk(risk.id)\") Edit\n                  b-dropdown-item-button.delete(@click=\"deleteRisk(risk.id)\") Delete\n      PolicyRisksModal(id=\"editRiskModal\" v-bind=\"nowEditingRisk\" :risks=\"risksComputed\" :policyId=\"policyId\" :inline=\"false\" :showRiskOption=\"true\" @saved=\"updateRisk\")\n      Loading\n      EmptyState(v-if=\"!loading && policyById.risks && !policyById.risks.length\")\n</template>\n\n<script>\n  // @TODO REVIEW STRUCTURE AND REBUILD\n\n  import Loading from '@/common/Loading/Loading'\n  import PolicyRisksModal from '@/common/Modals/RisksAddEditModal'\n  import EtaggerMixin from '@/mixins/EtaggerMixin'\n  import { DateTime } from 'luxon'\n\n  export default {\n    mixins: [EtaggerMixin()],\n    props: {\n      policyId: {\n        type: Number,\n        required: true\n      },\n      currentUserBasic: {\n        type: Boolean,\n        required: true\n      },\n      policy: {\n        type: Object,\n        required: true\n      }\n    },\n    components: {\n      Loading,\n      PolicyRisksModal\n    },\n    data() {\n      return {\n        levelOptions: ['Low', 'Medium', 'High'],\n        nowEditingRisk: {\n          riskId: null,\n        }\n      }\n    },\n    methods: {\n      getRisks(risks) {\n        console.log('risks', risks)\n        return risks\n      },\n      badgeVariant(num) {\n        if (num === 0) return 'success'\n        if (num === 1) return 'warning'\n        if (num === 2) return 'danger'\n      },\n      showLevel(num) {\n        // this.riskLevelColor(num)\n        return this.levelOptions[num]\n      },\n      dateToHuman(value) {\n        const date = DateTime.fromJSDate(new Date(value))\n        if (!date.invalid) {\n          return date.toFormat('MM/dd/yyyy')\n        }\n        if (date.invalid) {\n          return value\n        }\n      },\n      editRisk(riskId) {\n        Object.assign(this.nowEditingRisk, { riskId })\n        this.$nextTick(() => this.$bvModal.show('editRiskModal'))\n      },\n      updateRisk(value) {\n        const index = this.policyById.risks.findIndex(risk => risk.id === value.id)\n        if (index > -1) this.$set(this.policyById.risks, index, value)\n      },\n      deleteRisk(riskId) {\n        const riskById = this.$store.getters.riskById(riskId)\n        const index = riskById.compliance_policies.findIndex(risk => risk.id === riskId)\n        riskById.compliance_policies.splice(index, 1)\n        this.policyById.risks.splice(index, 1)\n\n        const dataToSend = {\n          id: riskId,\n          compliance_policy_ids: riskById.compliance_policies.map(pol => pol.id)\n        };\n\n        this.$store\n          .dispatch('updateRisk', {...dataToSend})\n          .then(response => {\n            // console.log('response', response)\n            this.toast('Success', 'Risk has been updated.')\n          })\n          .catch(error => {\n            console.error(error)\n            this.toast('Error', `Risk has not been updated. Please try again.`, true)\n          })\n      },\n      savedConfirmed(value){\n        this.policyById.risks.push(value)\n      },\n    },\n    computed: {\n      loading() {\n        return this.$store.getters.loading;\n      },\n      risksComputed() {\n        return this.$store.getters.risksList\n      },\n      policyById(){\n        const id = this.policyId\n        return this.$store.getters.policyById(id)\n      }\n    },\n    mounted() {\n      this.$store\n        .dispatch('getRisks')\n        .then(response => {\n          // console.log('response', response)\n          // this.toast('Success', `Policy has been deleted.`)\n        })\n        .catch(error => {\n          console.error(error)\n          // this.toast('Error', `Policy has not been deleted.`)\n        })\n    }\n  }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyRisks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyRisks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyRisks.vue?vue&type=template&id=2427d406&lang=pug&\"\nimport script from \"./PolicyRisks.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyRisks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"title\":\"Publish Policy\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-1 text-center px-0\"},[_c('b-icon',{staticClass:\"mt-1 ml-3\",attrs:{\"icon\":\"check-circle-fill\",\"width\":\"25\",\"height\":\"25\",\"variant\":\"success\"}})],1),_c('div',{staticClass:\"col\"},[_c('p',{staticClass:\"paragraph m-b-10\"},[_vm._v(\"You are publishing a policy which will make it viewable to all users. It will also be included in an official version of the compliance manual.\")]),_c('p',{staticClass:\"paragraph mb-0\"},[_c('b',[_vm._v(\"Do you want to continue?\")])])])]),_c('Errors',{attrs:{\"errors\":_vm.errors.title}}),_c('template',{slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-link\",on:{\"click\":function($event){return _vm.$bvModal.hide(_vm.modalId)}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-dark\",on:{\"click\":_vm.submit}},[_vm._v(\"Confirm\")])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" title=\"Publish Policy\")\n      .row\n        .col-md-1.text-center.px-0\n          b-icon.mt-1.ml-3(icon=\"check-circle-fill\" width=\"25\" height=\"25\" variant=\"success\")\n        .col\n          p.paragraph.m-b-10 You are publishing a policy which will make it viewable to all users. It will also be included in an official version of the compliance manual.\n          p.paragraph.mb-0\n            b Do you want to continue?\n      Errors(:errors=\"errors.title\")\n\n      template(slot=\"modal-footer\")\n        button.btn.btn-link(@click=\"$bvModal.hide(modalId)\") Cancel\n        button.btn.btn-dark(@click=\"submit\") Confirm\n</template>\n\n<script>\n  const rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n  export default {\n    props: {\n      inline: {\n        type: Boolean,\n        default: true\n      },\n    },\n    data() {\n      return {\n        modalId: `modal_${rnd()}`,\n        errors: []\n      }\n    },\n    methods: {\n      submit(e) {\n        e.preventDefault();\n        this.errors = [];\n        this.$emit('publishConfirmed')\n        this.$bvModal.hide(this.modalId)\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoliciesModalPublish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoliciesModalPublish.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PoliciesModalPublish.vue?vue&type=template&id=49240c6c&lang=pug&\"\nimport script from \"./PoliciesModalPublish.vue?vue&type=script&lang=js&\"\nexport * from \"./PoliciesModalPublish.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"policy\"},[_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\"},[(_vm.leftMenu)?_c('div',{staticClass:\"col-12 col-lg-3 px-0\"},[_c('div',{staticClass:\"card-body white-card-body p-20 left-tree\"},[_c('PoliciesModalCreate',{on:{\"saved\":_vm.updateList}},[_c('button',{staticClass:\"btn btn-dark mb-3 mr-3\"},[_vm._v(\"New Policy\")])]),_c('div',{staticClass:\"table\"},[_c('nested-draggable',{attrs:{\"policiesList\":_vm.policiesListNested,\"shortTable\":true},model:{value:(_vm.policiesComputed),callback:function ($$v) {_vm.policiesComputed=$$v},expression:\"policiesComputed\"}})],1)],1)]):_vm._e(),(_vm.policy)?_c('div',{staticClass:\"col col-lg-9 px-0\"},[_c('div',{staticClass:\"policy-topbar\"},[_c('div',{staticClass:\"d-flex align-items-center\"},[_c('button',{staticClass:\"btn btn__menu mr-3\",on:{\"click\":function($event){_vm.leftMenu = !_vm.leftMenu}}},[_c('b-icon',{attrs:{\"icon\":\"list\"}})],1),_c('b-badge',{staticClass:\"mr-3\",attrs:{\"variant\":_vm.statusVariant(_vm.policy.status)}},[_vm._v(_vm._s(_vm.policy.status))]),_c('h3',{staticClass:\"policy__main-title m-y-0\"},[_vm._v(_vm._s(_vm.policy.title))])],1),(!_vm.policy.archived)?_c('div',{staticClass:\"d-flex justify-content-end align-items-center\"},[_c('a',{staticClass:\"link btn mr-3\",on:{\"click\":_vm.saveDraft}},[_vm._v(\"Save Draft\")]),(_vm.isDowloading)?_c('span',{staticClass:\"dowloading\"},[_vm._m(0)]):_vm._e(),(!_vm.isDowloading && _vm.policy.status != 'draft' && _vm.policy.status != 'archived')?_c('button',{staticClass:\"btn btn-default mr-3\",on:{\"click\":_vm.download}},[_vm._v(\"Download\")]):_vm._e(),_c('PoliciesModalPublish',{on:{\"publishConfirmed\":_vm.publishPolicy}},[_c('button',{staticClass:\"btn btn-dark mr-3\"},[_vm._v(\"Publish\")])]),_c('button',{staticClass:\"btn btn__close\",on:{\"click\":_vm.closeAndExit}},[_c('b-icon',{attrs:{\"icon\":\"x\"}})],1)],1):_vm._e()]),_c('b-tabs',{staticClass:\"policy-tabs\",attrs:{\"content-class\":\"mt-0\"},scopedSlots:_vm._u([{key:\"tabs-end\",fn:function(){return [_c('b-dropdown',{staticClass:\"actions\",attrs:{\"text\":\"Actions\",\"variant\":\"default\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_vm._v(\"Actions\"),_c('b-icon',{staticClass:\"m-l-1\",attrs:{\"icon\":\"chevron-down\",\"font-scale\":\"1\"}})]},proxy:true}],null,false,3125904501)},[_c('PoliciesModalArchive',{attrs:{\"archiveStatus\":!_vm.policy.archived,\"inline\":false},on:{\"archiveConfirmed\":function($event){return _vm.archivePolicy(_vm.policy.id, !_vm.policy.archived)}}},[_c('b-dropdown-item',[_vm._v(_vm._s(!_vm.policy.archived ? 'Archive' : 'Unarchive'))])],1),_c('PoliciesModalDelete',{attrs:{\"policyId\":_vm.policy.id,\"inline\":false},on:{\"deleteConfirmed\":function($event){return _vm.deletePolicy(_vm.policy.id)}}},[_c('b-dropdown-item',{staticClass:\"delete\"},[_vm._v(\"Delete\")])],1)],1)]},proxy:true}],null,false,2057545003)},[_c('b-tab',{attrs:{\"title\":\"Detail\",\"active\":\"\"}},[_c('div',{staticClass:\"card-body white-card-body card-body_full-height policy-details-card p-0\"},[_c('Loading'),(!_vm.loading)?_c('div',{staticClass:\"policy-details\"},[_c('h3',{staticClass:\"policy-details__title\"},[_vm._v(\"Policy Details\")]),_c('div',{staticClass:\"policy-details__body mb-0 flex-grow-1\"},[_c('div',{staticClass:\"policy-details-section\"},[_c('div',{staticClass:\"policy-details__name\"},[_vm._v(\"Name\")]),_c('div',{staticClass:\"d-flex\"},[(_vm.currentUserBasic || _vm.policy.archived)?_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.policy.title)}}):_vm._e(),(!_vm.currentUserBasic && !_vm.policy.archived)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.policy.title),expression:\"policy.title\"}],staticClass:\"policy-details__input\",attrs:{\"placeholder\":\"Enter policy name\"},domProps:{\"value\":(_vm.policy.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.policy, \"title\", $event.target.value)}}}):_vm._e()]),_c('div',{staticClass:\"policy-details__name\"},[_vm._v(\"Description\")]),(_vm.currentUserBasic || _vm.policy.archived)?_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.policy.description)}}):_vm._e(),(!_vm.currentUserBasic && !_vm.policy.archived)?_c('Tiptap',{model:{value:(_vm.policy.description),callback:function ($$v) {_vm.$set(_vm.policy, \"description\", $$v)},expression:\"policy.description\"}}):_vm._e()],1)])]):_vm._e()],1)]),_c('b-tab',{attrs:{\"title\":\"Risks\",\"lazy\":\"\"}},[_c('div',{staticClass:\"card-body white-card-body card-body_full-height policy-details-card p-0\"},[_c('PolicyRisks',{attrs:{\"policy\":_vm.policy,\"policyId\":_vm.policyId,\"currentUserBasic\":_vm.currentUserBasic}})],1)]),_c('b-tab',{attrs:{\"title\":\"Tasks\",\"lazy\":\"\"}},[_c('div',{staticClass:\"card-body white-card-body card-body_full-height policy-details-card p-0\"},[_c('PolicyTasks',{attrs:{\"policy\":_vm.policy,\"currentUserBasic\":_vm.currentUserBasic},on:{\"saved\":_vm.updateList}})],1)]),_c('b-tab',{attrs:{\"title\":\"History\"}},[_c('div',{staticClass:\"card-body white-card-body card-body_full-height policy-details-card p-0\"},[_c('HistoryPolicy',{attrs:{\"policy\":_vm.policy}})],1)])],1)],1):_vm._e()])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lds-ring lds-ring-small\"},[_c('div'),_c('div'),_c('div'),_c('div')])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"policy-details position-relative\"},[_c('h3',{staticClass:\"policy-details__title\"},[_vm._v(\"Tasks\")]),_c('div',{staticClass:\"policy-actions\"},[(!_vm.currentUserBasic && !_vm.policy.archived)?_c('TaskFormModal',{attrs:{\"defaults\":_vm.taskDefaults},on:{\"saved\":function($event){return _vm.$emit('saved')}}},[_c('button',{staticClass:\"btn btn-dark\"},[_vm._v(\"New Task\")])]):_vm._e()],1),_c('div',{staticClass:\"policy-details__body\"},[_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"45%\"}},[_c('span',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.toggleSorting('body')}}},[_vm._v(\"Name\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1)]),_c('th',[_c('span',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.toggleSorting('assignee_name')}}},[_vm._v(\"Assignee\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1)]),_c('th',[_c('span',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.toggleSorting('remind_at')}}},[_vm._v(\"Start Date\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1)]),_c('th',[_c('span',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.toggleSorting('end_date')}}},[_vm._v(\"Due Date\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1)]),_c('th',{attrs:{\"width\":\"35px\"}})])]),(_vm.tasksSorted && _vm.tasksSorted.length)?_c('tbody',{staticClass:\"text-dark\"},_vm._l((_vm.tasksSorted),function(task){return _c('tr',{key:task.id},[_c('td',[_vm._v(_vm._s(task.body))]),_c('td',[_vm._v(_vm._s(task.assignee_name || ''))]),_c('td',[_vm._v(_vm._s(_vm._f(\"asDate\")(task.remind_at)))]),_c('td',[_vm._v(_vm._s(_vm._f(\"asDate\")(task.end_date)))]),_c('td',{staticClass:\"actions\"},[_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"sm\",\"variant\":\"light\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{attrs:{\"icon\":\"three-dots\"}})]},proxy:true}],null,true)},[_c('b-dropdown-item-button',[_vm._v(\"Edit\")]),_c('b-dropdown-item-button',[_vm._v(\"Delete\")])],1)],1)])}),0):_vm._e()]),(!_vm.loading && !_vm.tasksSorted.length)?_c('EmptyState'):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  .policy-details.position-relative\n    h3.policy-details__title Tasks\n    .policy-actions\n      TaskFormModal(:defaults=\"taskDefaults\" v-if=\"!currentUserBasic && !policy.archived\" @saved=\"$emit('saved')\")\n        button.btn.btn-dark New Task\n    .policy-details__body\n      table.table\n        thead\n          tr\n            th(width=\"45%\")\n              span.pointer(@click=\"toggleSorting('body')\")\n                | Name\n                b-icon.ml-2(icon='chevron-expand')\n            th\n              span.pointer(@click=\"toggleSorting('assignee_name')\")\n                | Assignee\n                b-icon.ml-2(icon='chevron-expand')\n            th\n              span.pointer(@click=\"toggleSorting('remind_at')\")\n                | Start Date\n                b-icon.ml-2(icon='chevron-expand')\n            th\n              span.pointer(@click=\"toggleSorting('end_date')\")\n                | Due Date\n                b-icon.ml-2(icon='chevron-expand')\n            th(width=\"35px\")\n        tbody.text-dark(v-if=\"tasksSorted && tasksSorted.length\")\n          tr(v-for=\"task in tasksSorted\" :key=\"task.id\")\n            td {{ task.body }}\n            td {{ task.assignee_name || '' }}\n            td {{ task.remind_at | asDate }}\n            td {{ task.end_date | asDate }}\n            td.actions\n              b-dropdown(size=\"sm\" variant=\"light\" class=\"m-0 p-0\" right)\n                template(#button-content)\n                  b-icon(icon=\"three-dots\")\n                b-dropdown-item-button Edit\n                b-dropdown-item-button Delete\n      EmptyState(v-if=\"!loading && !tasksSorted.length\")\n</template>\n\n<script>\nimport Loading from '@/common/Loading/Loading'\nimport TaskFormModal from '@/common/TaskFormModal'\nimport EtaggerMixin from '@/mixins/EtaggerMixin'\n\nexport default {\n  mixins: [EtaggerMixin()],\n  props: {\n    policy: {\n      type: Object,\n      required: true\n    },\n    currentUserBasic: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data() {\n    return {\n      sortField: null,\n      sortDirection: 1\n    }\n  },\n  methods: {\n    toggleSorting(field, startDescending = false) {\n      const initialDirection = startDescending ? -1 : 1\n      this.sortDirection = this.sortField === field ? -1 * this.sortDirection : initialDirection\n      this.sortField = field\n    },\n  },\n  computed: {\n    loading() {\n      return this.$store.getters.loading;\n    },\n    tasksComputed() {\n      return this.policy.reminders || []\n    },\n    tasksSorted() {\n      if (this.sortField) {\n        const compare = (aField, bField) => {\n          const [a, b] = [aField[this.sortField], bField[this.sortField]]\n          return a > b ? this.sortDirection : (a < b ? (this.sortDirection * -1) : 0)\n        }\n        return this.tasksComputed.sort(compare)\n      }\n      return this.tasksComputed\n    },\n    taskDefaults() {\n      return {\n        linkable_type: 'CompliancePolicy',\n        linkable_id: this.policy.id\n      }\n    }\n  },\n  components: {\n    Loading,\n    TaskFormModal\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyTasks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyTasks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyTasks.vue?vue&type=template&id=bc9e967e&lang=pug&\"\nimport script from \"./PolicyTasks.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyTasks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\n  div.policy\n    .container-fluid\n      .row\n        .col-12.col-lg-3.px-0(v-if=\"leftMenu\")\n          .card-body.white-card-body.p-20.left-tree\n            PoliciesModalCreate(@saved=\"updateList\")\n              button.btn.btn-dark.mb-3.mr-3 New Policy\n            .table\n              nested-draggable(v-model='policiesComputed', :policiesList=\"policiesListNested\" :shortTable=\"true\")\n        .col.col-lg-9.px-0(v-if=\"policy\")\n          .policy-topbar\n            .d-flex.align-items-center\n              button.btn.btn__menu.mr-3(@click=\"leftMenu = !leftMenu\")\n                b-icon(icon='list')\n              b-badge.mr-3(:variant=\"statusVariant(policy.status)\") {{ policy.status }}\n              h3.policy__main-title.m-y-0 {{ policy.title }}\n            .d-flex.justify-content-end.align-items-center(v-if=\"!policy.archived\")\n              a.link.btn.mr-3(@click=\"saveDraft\") Save Draft\n              span.dowloading(v-if=\"isDowloading\")\n                .lds-ring.lds-ring-small\n                  div\n                  div\n                  div\n                  div\n              button.btn.btn-default.mr-3(v-if=\"!isDowloading && policy.status != 'draft' && policy.status != 'archived'\" @click=\"download\") Download\n              PoliciesModalPublish(@publishConfirmed=\"publishPolicy\")\n                button.btn.btn-dark.mr-3 Publish\n              button.btn.btn__close(@click=\"closeAndExit\")\n                b-icon(icon='x')\n          b-tabs.policy-tabs(content-class=\"mt-0\")\n            template(#tabs-end)\n              b-dropdown.actions(text='Actions', variant=\"default\", right)\n                template(#button-content)\n                  | Actions\n                  b-icon.m-l-1(icon=\"chevron-down\" font-scale=\"1\")\n                PoliciesModalArchive(:archiveStatus=\"!policy.archived\" @archiveConfirmed=\"archivePolicy(policy.id, !policy.archived)\" :inline=\"false\")\n                  b-dropdown-item {{ !policy.archived ? 'Archive' : 'Unarchive' }}\n                PoliciesModalDelete(@deleteConfirmed=\"deletePolicy(policy.id)\", :policyId=\"policy.id\",  :inline=\"false\")\n                  b-dropdown-item.delete Delete\n\n            b-tab(title=\"Detail\" active)\n              .card-body.white-card-body.card-body_full-height.policy-details-card.p-0\n                Loading\n                .policy-details(v-if=\"!loading\")\n                  h3.policy-details__title Policy Details\n                  .policy-details__body.mb-0.flex-grow-1\n                    .policy-details-section\n                      .policy-details__name Name\n                      .d-flex\n                        div(v-html=\"policy.title\" v-if=\"currentUserBasic || policy.archived\")\n                        input.policy-details__input(v-if=\"!currentUserBasic && !policy.archived\" v-model=\"policy.title\" placeholder=\"Enter policy name\")\n                      .policy-details__name Description\n                      div(v-html=\"policy.description\" v-if=\"currentUserBasic || policy.archived\")\n                      Tiptap(v-model=\"policy.description\" v-if=\"!currentUserBasic && !policy.archived\")\n            b-tab(title=\"Risks\" lazy)\n              .card-body.white-card-body.card-body_full-height.policy-details-card.p-0\n                PolicyRisks(:policy=\"policy\" :policyId=\"policyId\" :currentUserBasic=\"currentUserBasic\")\n            b-tab(title=\"Tasks\" lazy)\n              .card-body.white-card-body.card-body_full-height.policy-details-card.p-0\n                PolicyTasks(:policy=\"policy\" :currentUserBasic=\"currentUserBasic\" @saved=\"updateList\")\n            b-tab(title=\"History\")\n              .card-body.white-card-body.card-body_full-height.policy-details-card.p-0\n                HistoryPolicy(:policy=\"policy\")\n</template>\n\n<script>\nimport Tiptap from '@/common/Tiptap'\n  import Loading from '@/common/Loading/Loading'\n  import nestedDraggable from \"../infra/nestedMain\";\n  import rawdisplayer from \"../infra/raw-displayer\";\n  import SubsectionPolicy from \"./PolicySubsection\";\n  import HistoryPolicy from \"./PolicyHistory\";\n  import PolicyRisks from \"../Risks/PolicyRisks\";\n  import PolicyTasks from \"../Tasks/PolicyTasks\";\n  import PoliciesModalCreate from \"../Modals/PoliciesModalCreate\";\n  import PoliciesModalDelete from \"../Modals/PoliciesModalDelete\";\n  import PoliciesModalArchive from \"../Modals/PoliciesModalArchive\";\n  import PoliciesModalRemoveSubsection from \"../Modals/PoliciesModalRemoveSubsection\";\n  import PoliciesModalPublish from \"../Modals/PoliciesModalPublish\";\n\n  export default {\n    props: {\n      policyId: {\n        type: Number,\n        required: true\n      },\n    },\n    components: {\n      Tiptap,\n      Loading,\n      nestedDraggable,\n      rawdisplayer,\n      SubsectionPolicy,\n      HistoryPolicy,\n      PolicyRisks,\n      PolicyTasks,\n      PoliciesModalCreate,\n      PoliciesModalDelete,\n      PoliciesModalArchive,\n      PoliciesModalRemoveSubsection,\n      PoliciesModalPublish\n    },\n    // created() {\n    //   this.$store.commit('changeSidebar', 'builder')\n    // },\n    data() {\n      return {\n        leftMenu: true,\n        description: 'Enter policy details',\n        title: \"Section Name\",\n        sections: [],\n        count: 0,\n        isDowloading: false,\n        isPublishing: false,\n      }\n    },\n    methods: {\n      statusVariant(str_status) {\n        switch(str_status) {\n          case 'published':\n            return 'success'\n            break;\n          case 'archived':\n            return 'danger'\n            break\n          case 'draft':\n            return 'light'\n            break\n          default:\n            return 'light'\n        }\n      },\n      saveDraft () {\n        this.updatePolicy()\n      },\n      download () {\n        this.isDowloading = true\n        this.$store\n          .dispatch(\"downloadPolicy\", { policyId: this.policyId })\n          .then((myBlob) => {\n            //console.log('response', myBlob)\n            this.toast('Success', 'Policy has been queued for download.')\n          })\n          .catch((err) => {\n            //console.log(err)\n            this.isDowloading = false\n            this.toast('Error', err.message, true)\n          });\n      },\n      publishPolicyRequest() {\n        this.isPublishing = false\n        this.$store\n          .dispatch(\"publishPolicy\", { policyId: this.policyId })\n          .then(response => {\n            this.toast('Success', 'Policy has been published.')\n            setTimeout(() => {\n              this.$router.push(`/business/compliance_policies/${response.id}`)\n            }, 2000)\n          })\n          .catch((err) => {\n            this.toast('Error', err.message, true)\n          });\n      },\n      publishPolicy () {\n        this.isPublishing = true\n        this.saveDraft()\n      },\n      updatePolicy() {\n        const dataToSend = {\n          id: this.policy.id,\n          name: this.policy.title,\n          description: this.policy.description,\n          sections: this.policy.sections,\n        };\n        //console.log('updatePolicy dataToSend', dataToSend);\n\n        // UPDATE STORE\n        this.$store\n          .dispatch(\"updatePolicy\", dataToSend)\n          .then((response) => {\n            if (response.id) {\n              if (this.isPublishing) {\n                this.publishPolicyRequest()\n                return\n              }\n              this.toast('Success', 'Policy has been updated.')\n            } else {\n              this.toast('Error', 'Policy has not been updated. Please try again.')\n            }\n          })\n          .catch((error) => {\n            //console.log(error)\n            this.toast('Error', error, true)\n          });\n      },\n      deletePolicy(policyId) {\n        //console.log(`delete ${policyId}`)\n        this.$store\n          .dispatch('deletePolicyById', { policyId })\n          .then(response => {\n            this.toast('Success', `Policy has been deleted.`)\n          })\n          .catch(error => {\n            this.toast('Error', `Policy has not been deleted. Please try again. ${error}`, true)\n          })\n      },\n      closeAndExit () {\n        //window.location.href = `${window.location.origin}/business/compliance_policies`\n        this.$store.commit('changeSidebar', 'default')\n        this.$router.push(`/business/compliance_policies`)\n      },\n      archivePolicy(policyId, archiveStatus) {\n        this.$store\n          .dispatch('archivePolicyById', { policyId: this.policyId, archived: archiveStatus })\n          .then(response => {\n            //console.log('response', response)\n            this.toast('Success', `Policy successfully ${archiveStatus ? 'archived' : 'unarchived'}!`)\n            this.$router.push(`/business/compliance_policies`)\n            this.$store.commit('changeSidebar', 'default')\n          })\n          .catch(error => {\n            console.error(error)\n            this.toast('Error', `Couldn't submit form! ${error}`, true)\n          })\n      },\n      deleteAllSections(){\n        //console.log(`delete all`)\n        this.policy.sections = []\n\n        // this.policiesComputed = {\n        //   id: this.policy.id,\n        //   children: this.policy.sections,\n        // }\n\n        this.updatePolicy()\n      },\n      addSection(event) {\n        if(event) event.target.closest('.policy-details__btn').style.display = 'none';\n        const id = Math.floor(Math.random() * 100)\n\n        // this.policy.sections.push({\n        //   id: id,\n        //   title: `${this.title}--${this.count++}-${id}`,\n        //   description: this.description,\n        //   children: [],\n        // })\n        this.policiesComputed = {\n          id: id,\n          title: `${this.title}`,\n          description: this.description,\n          children: [],\n        }\n        //console.log('this.policy.sections', this.policy.sections)\n      },\n      deleteSection(index) {\n        this.policy.sections.splice(index, 1)\n        if (this.policy.sections.length === 0) document.querySelector('.policy-details__btn').style.display = 'block';\n      },\n      updateList() {\n        this.$store.dispatch(\"getPolicies\")\n          .then((response) => {\n            //console.log('response 1', response);\n            this.policies = response\n            // this.policy = response.find(el => el.id === this.policyId)\n            //console.log('this.policy in create page', this.policy)\n          })\n          .catch((err) => {\n            // console.error(err);\n            this.toast('Error', err.message, true)\n          });\n      },\n      movePolicy(event) {\n        const curPos = this.policies[event.oldIndex].position\n        const newPos = this.policies[event.newIndex].position\n\n        this.policies[event.newIndex].position = curPos\n        this.policies[event.oldIndex].position = newPos\n\n        const arrToChange = [\n          {\n            id: this.policies[event.newIndex].id,\n            position: this.policies[event.newIndex].position\n          },\n          {\n            id: this.policies[event.oldIndex].id,\n            position: this.policies[event.oldIndex].position\n          }\n        ]\n\n        this.$store\n          .dispatch(\"moveUpPolicy\", arrToChange)\n          .then((response) => {\n            //console.log('response', response)\n            this.toast('Success', 'Policy succesfully moved.')\n          })\n          .catch((err) => {\n            // console.error(err)\n            this.toast('Error', err.message, true)\n          });\n      },\n    },\n    computed: {\n      loading() {\n        return this.$store.getters.loading;\n      },\n      policy(){\n        const id = this.policyId\n        return this.$store.getters.policyById(id)\n      },\n      policiesComputed: {\n        get() {\n          const policies = this.$store.getters.policiesList\n          let tmp;\n          const newPoliciesList = policies.map(el => {\n            tmp = el['name'];\n            el['title'] = tmp;\n            tmp = el['sections']\n            el['children'] = tmp;\n            if (!el['sections']) el['sections'] = []\n            return el\n          });\n          return newPoliciesList;\n        },\n        set(value) {\n          //console.log(value)\n          this.$store.dispatch(\"updatePolicySectionsById\", {\n            id: this.policy.id,\n            sections: value\n          });\n        }\n      },\n      currentUserBasic() {\n        return (window.localStorage[\"app.currentUser.role\"] == \"basic\")\n      },\n      currentUserAdmin() {\n        return (window.localStorage[\"app.currentUser.role\"] == \"admin\")\n      },\n      currentUserTrusted() {\n        return (window.localStorage[\"app.currentUser.role\"] == \"trusted\")\n      },\n      policyById() {\n        const id = this.policyId\n        return this.$store.getters.policyById(id)\n      },\n      policiesListNested () {\n        const policies = this.$store.getters.policiesListNested.filter(item => item.status !== 'archived')\n        if (this.currentUserAdmin || this.currentUserTrusted) return policies.filter(item => item.status === 'published')\n\n        return policies\n      },\n    },\n    mounted() {\n      this.updateList()\n    },\n    // filters: {\n    //   strippedContent: function(string) {\n    //     return string.replace(/<\\/?[^>]+>/ig, \" \");\n    //   }\n    // }\n  };\n</script>\n\n<style>\n  @import \"../styles.css\";\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyDetailsWithoutSections.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyDetailsWithoutSections.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyDetailsWithoutSections.vue?vue&type=template&id=1e726d3c&lang=pug&\"\nimport script from \"./PolicyDetailsWithoutSections.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyDetailsWithoutSections.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyDetailsWithoutSections.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"policy-details position-relative\"},[_c('h3',{staticClass:\"policy-details__title\"},[_vm._v(\"Version History\")]),_c('div',{staticClass:\"p-x-20\"},[_vm._l((_vm.policy.versions),function(data,i){return (_vm.policy.versions && _vm.policy.versions.length !== 0)?_c('div',{staticClass:\"policy-history__body\",class:[_vm.policy.versions.length > 1 ? 'mb-2' : '' ]},[_c('div',{staticClass:\"policy-history__version-info\"},[_vm._v(_vm._s((\"Version \" + (_vm.policy.versions.length-i))))]),_c('div',{staticClass:\"policy-history__author\"},[_vm._v(\"Published by \"+_vm._s(data.published_by))]),_c('div',{staticClass:\"policy-history__date\"},[_vm._v(\"Last updated \"+_vm._s(_vm.dateToHuman(data.updated_at)))]),_c('b-button',{staticClass:\"btn policy-history__btn-download\",on:{\"click\":function($event){return _vm.download(_vm.policy.id)}}},[_vm._v(\"Download\")])],1):_vm._e()}),(_vm.policy.versions && _vm.policy.versions.length === 0)?_c('div',{staticClass:\"policy-details__body\"},[_c('EmptyState')],1):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  .policy-details.position-relative\n    h3.policy-details__title Version History\n    .p-x-20\n      .policy-history__body(v-if=\"policy.versions && policy.versions.length !== 0\", v-for=\"(data,i) in policy.versions\", :class=\"[policy.versions.length > 1 ? 'mb-2' : '' ]\")\n        //.policy-history__version v{{ data.id }}\n        //.policy-history__version v\n        .policy-history__version-info {{ `Version ${policy.versions.length-i}` }}\n        .policy-history__author Published by {{ data.published_by }}\n        .policy-history__date Last updated {{ dateToHuman(data.updated_at) }}\n        b-button.btn.policy-history__btn-download(@click=\"download(policy.id)\") Download\n      .policy-details__body(v-if=\"policy.versions && policy.versions.length === 0\")\n        EmptyState\n</template>\n\n<script>\n  import { DateTime } from 'luxon'\n  export default {\n    props: ['policy'],\n    data() {\n      return {\n\n      }\n    },\n    computed: {\n      userName() {\n        const accountInfo = localStorage.getItem('app.currentUser')\n        const accountInfoParsed = JSON.parse(accountInfo)\n        if (accountInfoParsed) {\n          const fullName = accountInfoParsed.contact_first_name\n            ? `${accountInfoParsed.contact_first_name} ${accountInfoParsed.contact_last_name}`\n            : `${accountInfoParsed.first_name} ${accountInfoParsed.last_name}`\n          return (fullName !== 'undefined undefined') ? fullName : ''\n        }\n\n        return ''\n      },\n    },\n    methods: {\n      dateToHuman (value) {\n        const date = DateTime.fromJSDate(new Date(value))\n        if (!date.invalid) {\n          return date.toFormat('MM/dd/yyyy')\n        }\n        if (date.invalid) {\n          return value\n        }\n      },\n      download (policyId) {\n        this.$store\n          .dispatch(\"downloadPolicy\", { policyId })\n          .then((myBlob) => {\n            this.toast('Success', 'Policy has been queued for download.')\n          })\n          .catch((err) => {\n            this.toast('Error', \"Policy has not been queued for download. Please try again. \"+err.message, true)\n          });\n      },\n    }\n  };\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyHistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyHistory.vue?vue&type=template&id=e914c84c&lang=pug&\"\nimport script from \"./PolicyHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyHistory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
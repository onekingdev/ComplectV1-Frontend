(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e686e3e"],{"0a0c":function(t,e,a){"use strict";var s=a("dbeb"),n=a("f67b"),r=a("2877"),i=Object(r["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=i.exports},"1d64":function(t,e,a){},"4ddc":function(t,e,a){"use strict";a("1d64")},"8ece":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"d-inline-block":t.inline}},[s("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),s("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Delete Exam"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-1 text-center px-0"},[s("img",{staticClass:"mt-1 ml-3",attrs:{src:a("d1db"),width:"25",height:"25"}})]),s("div",{staticClass:"col"},[s("p",{staticClass:"paragraph m-b-10"},[t._v("Removing this exam will delete any progress and tasks associated with the file.")]),s("p",{staticClass:"paragraph mb-0"},[s("b",[t._v("Do you want to continue?")])])])]),s("Errors",{attrs:{errors:t.errors.title}}),s("template",{slot:"modal-footer"},[s("button",{staticClass:"btn btn-link mr-2",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),s("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Confirm")])])],2)],1)},n=[],r=function(){return Math.random().toFixed(10).toString().replace(".","")},i={props:{inline:{type:Boolean,default:!0}},data:function(){return{modalId:"modal_".concat(r()),errors:[]}},methods:{submit:function(t){t.preventDefault(),this.errors=[],this.$emit("deleteConfirmed"),this.$bvModal.hide(this.modalId)}}},o=i,c=a("2877"),l=Object(c["a"])(o,s,n,!1,null,null,null);e["a"]=l.exports},"96c0":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Edit Exam"},on:{shown:t.getData}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("label",{staticClass:"form-label"},[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.exam_management.name,expression:"exam_management.name"}],ref:"input",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter the name of your exam"},domProps:{value:t.exam_management.name},on:{keyup:t.onChange,input:function(e){e.target.composing||t.$set(t.exam_management,"name",e.target.value)}}})])]),a("div",{staticClass:"row m-t-1"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"form-label"},[t._v("Start Date")]),a("DatePicker",{attrs:{options:t.datepickerOptions},model:{value:t.exam_management.starts_on,callback:function(e){t.$set(t.exam_management,"starts_on",e)},expression:"exam_management.starts_on"}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"form-label"},[t._v("Due Date")]),a("DatePicker",{attrs:{options:t.datepickerOptions},model:{value:t.exam_management.ends_on,callback:function(e){t.$set(t.exam_management,"ends_on",e)},expression:"exam_management.ends_on"}})],1)]),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Save")])])],2)],1)},n=[],r=a("c973"),i=a.n(r),o=a("a34a"),c=a.n(o),l=a("f774"),u=function(){return Math.random().toFixed(10).toString().replace(".","")},d=function(){return{id:"",name:"",starts_on:"",ends_on:""}},m={mixins:[Object(l["a"])()],props:{inline:{type:Boolean,default:!0},exam:{type:Object,required:!0}},data:function(){return{modalId:"modal_".concat(u()),exam_management:d(),errors:[]}},methods:{onChange:function(t){13===t.keyCode&&this.submit(t)},submit:function(t){var e=this;return i()(c.a.mark((function a(){return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.exam_management.name&&e.exam_management.starts_on&&e.exam_management.ends_on){a.next=4;break}return e.toast("Error","Please check all fields!",!0),a.abrupt("return");case 4:return a.prev=4,a.next=7,e.$store.dispatch("exams/updateExam",e.exam_management).then((function(t){e.toast("Success","Exam Management successfully updated!"),e.$emit("saved"),e.$bvModal.hide(e.modalId),e.newEtag()}))["catch"]((function(t){throw console.error(t),t}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](4),e.toast("Error",a.t0.message,!0);case 12:case"end":return a.stop()}}),a,null,[[4,9]])})))()},getData:function(){this.exam_management=Object.assign({},this.exam_management,this.exam)}},computed:{datepickerOptions:function(){return{min:new Date}}},mounted:function(){}},f=m,p=a("2877"),v=Object(p["a"])(f,s,n,!1,null,null,null);e["a"]=v.exports},a423:function(t,e){},bd5c:function(t,e,a){"use strict";a("c237")},c237:function(t,e,a){},daf1:function(t,e,a){},dbeb:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row p-x-1"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-body white-card-body reviews__card"},[a("div",{staticClass:"reviews__topiclist"},[t._m(0),a("div",{staticClass:"reviews__card--internal borderless"},[a("table",{staticClass:"table task_table"},[a("thead",[a("tr",[a("th",{attrs:{width:"40%"}},[t._v("Name"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),a("th",[t._v("Assignee"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),a("th",{staticClass:"text-right"},[t._v("Start date"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),a("th",{staticClass:"text-right"},[t._v("Due date"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),a("th",{staticClass:"text-right"},[t._v("Files"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),a("th",{staticClass:"text-right"},[t._v("Comments"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),a("th",{staticClass:"text-right",attrs:{width:"35px"}})])])]),a("EmptyState")],1)])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reviews__card--header p-b-20"},[a("h2",[t._v("Tasks")]),a("div",[a("a",{staticClass:"btn btn-default m-r-1 d-none"},[t._v("Download")]),a("a",{staticClass:"btn btn-dark"},[t._v("New task")])])])}]},e3b3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentExam?a("div",{staticClass:"page exam"},[a("div",{staticClass:"page-header bg-white"},[a("div",[a("h3",{staticClass:"page-header__breadcrumbs"},[t._v("Regulatory Exams")]),a("h2",{staticClass:"page-header__title"},[t._v(t._s(t.currentExam?t.currentExam.name:""))])]),a("div",{staticClass:"page-header__actions"},[t.currentExam&&"team"!==t.plan&&!t.currentExam.complete?a("ExamModalShare",{staticClass:"mr-3",attrs:{examId:t.currentExam.id,examAuditors:t.currentExam.exam_auditors,examStatus:t.currentExam.complete}},[a("a",{staticClass:"btn btn-link"},[t._v("Share Link")])]):t._e(),t.currentExam&&!t.currentExam.complete?a("ExamModalComplite",{staticClass:"mr-3",attrs:{completedStatus:t.currentExam.complete,countCompleted:t.countCompleted,inline:!1},on:{compliteConfirmed:t.markCompleteExam}},[a("button",{staticClass:"btn btn-default"},[t._v("Mark as Complete")])]):t.currentExam?a("button",{staticClass:"btn btn-default",on:{click:t.markCompleteExam}},[t._v("Mark as Incomplete")]):t._e(),t.currentExam&&!t.currentExam.complete?a("button",{staticClass:"btn btn-dark mr-3",on:{click:t.saveAndExit}},[t._v("Save and Exit")]):t._e(),a("button",{staticClass:"btn btn__close",on:{click:t.exit}},[a("b-icon",{attrs:{icon:"x"}})],1)],1)]),a("b-tabs",{staticClass:"reviews__tabs exams__tabs",attrs:{"content-class":"mt-0"},scopedSlots:t._u([{key:"tabs-end",fn:function(){return[t.currentExam&&!t.currentExam.complete?a("b-dropdown",{staticClass:"tab-actions actions",attrs:{variant:"default",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v("Actions"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-down","font-scale":"1"}})]},proxy:!0}],null,!1,958169179)},[a("ExamModalEdit",{attrs:{exam:t.currentExam,inline:!1}},[a("b-dropdown-item",[t._v("Edit")])],1),a("ExamModalDelete",{attrs:{inline:!1},on:{deleteConfirmed:function(e){return t.deleteExam(t.currentExam.id)}}},[a("b-dropdown-item",{staticClass:"delete"},[t._v("Delete")])],1)],1):t._e()]},proxy:!0}],null,!1,3899872147)},[a("b-tab",{attrs:{title:"Detail",active:""}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9 mx-auto position-relative"},[t.loading&&!t.currentExam?a("div",{staticClass:"card-body white-card-body reviews__card"},[a("Loading")],1):t._e(),t.currentExam?a("div",{staticClass:"card"},[a("div",{staticClass:"white-card-header"},[a("div",{staticClass:"reviews__card--internal d-flex justify-content-between align-items-center pt-0 m-b-20 p-4"},[a("h3",[t._v("Requests")]),t.currentExam&&!t.currentExam.complete?a("router-link",{staticClass:"btn btn-default",attrs:{to:"/business/exam_management/"+t.currentExam.id+"/portal"}},[t._v("View Portal")]):t._e()],1)]),a("div",{staticClass:"white-card-body"},[a("div",{staticClass:"reviews__topiclist px-4"},[a("div",{staticClass:"d-flex justify-content-between m-b-20"},[a("b-button-group",{attrs:{size:"md"}},[a("b-button",{attrs:{type:"button",variant:"all"===t.filterOption?"dark":"outline-dark"},on:{click:function(e){return t.filterRequest("all")}}},[t._v("All")]),a("b-button",{attrs:{type:"button",variant:"shared"===t.filterOption?"dark":"outline-dark"},on:{click:function(e){return t.filterRequest("shared")}}},[t._v("Shared")])],1)],1),t._l(t.currentExamRequestsFiltered,(function(e,s){return t.currentExam.exam_requests?[a("div",{key:t.currentExam.name+"-"+s,staticClass:"reviews__card--internal exams__card--internal",class:{completed:e.complete}},[a("div",{staticClass:"row m-b-1"},[a("div",{staticClass:"col-md-1"},[a("div",{staticClass:"reviews__checkbox d-flex justify-content-between"},[a("div",{staticClass:"reviews__checkbox-item reviews__checkbox-item--true",class:{checked:e.complete,disabled:t.currentExam.complete},on:{click:function(a){return t.markCompleteReqeust(e.id,!0,t.currentExam.complete)}}},[a("b-icon",{attrs:{icon:"check2"}})],1),a("div",{staticClass:"reviews__checkbox-item reviews__checkbox-item--false",class:{checked:!e.complete,disabled:t.currentExam.complete},on:{click:function(a){return t.markCompleteReqeust(e.id,!1,t.currentExam.complete)}}},[a("b-icon",{attrs:{icon:"x"}})],1)])]),a("div",{staticClass:"col-md-11"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",{staticClass:"d-flex align-items-center"},[e.shared?a("b-badge",{staticClass:"mr-2",attrs:{variant:"success"}},[t._v(t._s(e.shared?"Shared":""))]):t._e(),a("div",{staticClass:"exams__input exams__topic-name"},[t._v(t._s(e.name))])],1),t.currentExam.complete?t._e():a("div",{staticClass:"d-flex actions min-w-225"},[a("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"xs",variant:"default",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v("Add Item"),a("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-down"}})]},proxy:!0}],null,!0)},[a("b-dropdown-item",{on:{click:function(e){return t.addTextEntry(s)}}},[t._v("Text Entry")]),a("ExamModalUpload",{attrs:{currentExamId:t.currentExam.id,request:e,inline:!1}},[a("b-dropdown-item",[t._v("Upload New")])],1),a("ExamModalSelectFiles",{attrs:{currentExamId:t.currentExam.id,request:e,inline:!1}},[a("b-dropdown-item",[t._v("Select Existing")])],1)],1),a("TaskFormModal",{attrs:{inline:!1},on:{saved:function(a){return t.createTask(e.id)}}},[a("button",{staticClass:"btn btn-default m-x-1"},[t._v("New Task")])]),a("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"sm",variant:"none",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!0)},[a("ExamRequestModalEdit",{attrs:{examId:t.currentExam.id,request:e,inline:!1}},[a("b-dropdown-item",[t._v("Edit")])],1),"team"!==t.plan?a("b-dropdown-item",{on:{click:function(a){return t.shareRequestAction(e.id,!e.shared)}}},[t._v(t._s(e.shared?"Unshare":"Share"))]):t._e(),a("ExamModalDelete",{attrs:{inline:!1},on:{deleteConfirmed:function(a){return t.deleteExamRequest(e.id)}}},[a("b-dropdown-item",{staticClass:"delete"},[t._v("Delete")])],1)],1)],1)])])]),a("div",{staticClass:"row m-b-1"},[a("div",{staticClass:"col-md-11 offset-md-1"},[a("p",{staticClass:"paragraph-16"},[t._v(t._s(e.details))])])]),a("div",{staticClass:"row m-b-1"},[a("div",{staticClass:"col-md-11 offset-md-1"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("span",[a("b-icon",{staticClass:"mr-2",attrs:{icon:t.itemsTotal&&t.itemsTotal.length?"chevron-down":"chevron-right"}}),t._v(t._s(t.itemsTotal[s])+" Items")],1)])])]),e.text_items?a("hr"):t._e(),e.text_items?a("div",{staticClass:"row"},[t._l(e.text_items,(function(n,r){return[a("div",{key:e.name+"-"+s+"-"+n+"-"+r,staticClass:"col-12 exams__text"},[t.currentExam.complete?t._e():a("textarea-autosize",{staticClass:"exams__text-body",model:{value:e.text_items[r].text,callback:function(a){t.$set(e.text_items[r],"text",a)},expression:"currentRequst.text_items[textIndex].text"}}),t.currentExam.complete?a("p",[t._v(t._s(e.text_items[r].text))]):t._e(),t.currentExam.complete?t._e():a("button",{staticClass:"btn btn__close float-right",on:{click:function(e){return t.removeTextEntry(s,r)}}},[a("b-icon",{attrs:{icon:"x","font-scale":"1"}})],1)],1)]}))],2):t._e(),a("div",{staticClass:"row"},[t._l(e.exam_request_files,(function(n,r){return[a("div",{key:e.name+"-"+s+"-"+n+"-"+r,staticClass:"col-md-6 m-b-1"},[a("div",{staticClass:"file-card"},[a("div",{staticClass:"mr-2"},[a("b-icon",{staticClass:"file-card__icon",attrs:{icon:"file-earmark-text-fill","font-scale":"2"}})],1),a("div",{staticClass:"ml-0 mr-auto"},[a("p",{staticClass:"file-card__name"},[a("b",[t._v(t._s(n.name))])]),a("a",{staticClass:"file-card__link link",attrs:{href:n.file_url,target:"_blank"}},[t._v("Download")])]),t.currentExam.complete?t._e():a("div",{staticClass:"ml-auto align-self-start actions"},[a("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"sm",variant:"none",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!0)},[a("b-dropdown-item",{staticClass:"delete",on:{click:function(a){return t.removeFile(e.id,n.id)}}},[t._v("Delete file")])],1)],1)])])]}))],2)])])])]:t._e()}))],2),a("div",{staticClass:"d-flex justify-content-between"},[t.currentExam.complete?a("div"):a("ExamRequestModalCreate",{attrs:{examId:t.currentExam.id}},[a("b-button",{staticClass:"m-b-2 ml-4",attrs:{variant:"default"}},[a("b-icon",{staticClass:"mr-2",attrs:{icon:"plus-circle-fill"}}),t._v("Add Request")],1)],1),a("div",{staticClass:"white-card-body pb-4 pr-4"},[a("div",{staticClass:"d-flex justify-content-end"},[t.currentExam.complete?t._e():a("button",{staticClass:"btn btn-default mr-2",on:{click:t.saveExam}},[t._v("Save")]),a("ExamModalComplite",{attrs:{completedStatus:t.currentExam.complete,countCompleted:t.countCompleted,inline:!1},on:{compliteConfirmed:t.markCompleteExam}},[a("button",{staticClass:"btn",class:t.currentExam.complete?"btn-default":"btn-dark"},[t._v("Mark as "+t._s(t.currentExam.complete?"Incomplete":"Complete"))])])],1)])],1)])]):t._e()])])])]),a("b-tab",{attrs:{title:"Tasks",lazy:""}},[a("PageTasks")],1),a("b-tab",{attrs:{title:"Documents",lazy:""}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row p-x-1"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-body white-card-body card-body_full-height policy-details-card p-0"},[a("PageAttachments",{attrs:{currentExam:t.currentExam}})],1)])])])])],1)],1):t._e()},n=[],r=a("c973"),i=a.n(r),o=a("9523"),c=a.n(o),l=a("a34a"),u=a.n(l),d=a("2f62"),m=a("e829"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Add request"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 m-b-2"},[a("label",{staticClass:"form-label"},[t._v("Requested Item")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.requst.name,expression:"requst.name"}],ref:"input",staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.requst.name},on:{keyup:t.onChange,input:function(e){e.target.composing||t.$set(t.requst,"name",e.target.value)}}}),a("Errors",{attrs:{errors:t.errors}})],1)]),a("div",{staticClass:"row m-b-2"},[a("div",{staticClass:"col-12"},[a("label",{staticClass:"form-label"},[t._v("Details")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.requst.details,expression:"requst.details"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.requst.details},on:{input:function(e){e.target.composing||t.$set(t.requst,"details",e.target.value)}}}),a("small",{staticClass:"form-text text-muted"},[t._v("Optional")])])]),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Add")])])],2)],1)},p=[],v=function(){return Math.random().toFixed(10).toString().replace(".","")},b=new Date,x=function(){return{name:"",details:"",complete:!1,shared:!1}},h={props:{inline:{type:Boolean,default:!0},examId:{type:Number,default:!0}},data:function(){return{modalId:"modal_".concat(v()),requst:x(),errors:[]}},methods:{resetForm:function(){this.requst=x()},onChange:function(t){13===t.keyCode&&this.submit(t)},submit:function(t){var e=this;return i()(u.a.mark((function a(){return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.requst.name){a.next=4;break}return e.errors.push("Required field"),a.abrupt("return");case 4:return a.prev=4,a.next=7,e.$store.dispatch("exams/createExamRequest",{id:e.examId,request:e.requst}).then((function(t){e.toast("Success","Exam request has been added."),e.$emit("saved"),e.$bvModal.hide(e.modalId),e.resetForm()}))["catch"]((function(t){return e.toast("Error",t.message,!0)}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](4),e.toast("Error",a.t0.message,!0);case 12:case"end":return a.stop()}}),a,null,[[4,9]])})))()}},computed:{datepickerOptions:function(){return{min:b}}}},_=h,C=a("2877"),w=Object(C["a"])(_,f,p,!1,null,null,null),E=w.exports,g=a("96c0"),k=a("8ece"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Edit request"},on:{shown:t.getData}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 m-b-2"},[a("label",{staticClass:"form-label"},[t._v("Requested Item")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.requestData.name,expression:"requestData.name"}],ref:"input",staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.requestData.name},on:{keyup:t.onChange,input:function(e){e.target.composing||t.$set(t.requestData,"name",e.target.value)}}}),a("Errors",{attrs:{errors:t.errors}})],1)]),a("div",{staticClass:"row m-b-2"},[a("div",{staticClass:"col-12"},[a("label",{staticClass:"form-label"},[t._v("Details")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.requestData.details,expression:"requestData.details"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.requestData.details},on:{input:function(e){e.target.composing||t.$set(t.requestData,"details",e.target.value)}}}),a("small",{staticClass:"form-text text-muted"},[t._v("Optional")])])]),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Save")])])],2)],1)},q=[];function O(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(Object(a),!0).forEach((function(e){c()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var D=function(){return Math.random().toFixed(10).toString().replace(".","")},S=new Date,j={props:{inline:{type:Boolean,default:!0},examId:{type:Number,default:!0},request:{type:Object,required:!0}},data:function(){return{modalId:"modal_".concat(D()),requestData:{name:"",details:"",complete:!1,shared:!1},errors:[]}},methods:{resetForm:function(){this.requestData={name:"",details:""}},onChange:function(t){13===t.keyCode&&this.submit(t)},submit:function(t){var e=this;return i()(u.a.mark((function a(){return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.requestData.name){a.next=4;break}return e.errors.push("Required field"),a.abrupt("return");case 4:return a.prev=4,a.next=7,e.$store.dispatch("exams/updateExamRequest",{id:e.examId,request:e.requestData}).then((function(t){e.toast("Success","Exam request has been added."),e.$emit("saved"),e.$bvModal.hide(e.modalId),e.resetForm()}))["catch"]((function(t){return e.toast("Error",t.message,!0)}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](4),e.toast("Error",a.t0.message,!0);case 12:case"end":return a.stop()}}),a,null,[[4,9]])})))()},getData:function(){this.requestData=I({},this.request)}},computed:{datepickerOptions:function(){return{min:S}}}},$=j,F=Object(C["a"])($,y,q,!1,null,null,null),R=F.exports,M=a("6f33"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:t.completedStatus?"Incomplete Exam":"Complete Exam"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("p",{staticClass:"paragraph"},[t._v("Marking the exam as complete will disable any links to access your requests.")]),a("p",{staticClass:"paragraph"},[t._v("You currently have:")]),a("p",{staticClass:"paragraph"},[a("b",{staticClass:"text-success"},[t._v(t._s(t.countCompleted)+" ")]),t._v("Requests Completed")]),a("p",{staticClass:"paragraph"},[a("b",[t._v("Do you want to continue?")])])])]),a("Errors",{attrs:{errors:t.errors.title}}),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Confirm")])])],2)],1)},A=[],N=function(){return Math.random().toFixed(10).toString().replace(".","")},T={props:{inline:{type:Boolean,default:!0},completedStatus:{type:Boolean,default:!0},countCompleted:{type:String,default:""}},data:function(){return{modalId:"modal_".concat(N()),errors:[]}},methods:{submit:function(t){t.preventDefault(),this.errors=[],this.$emit("compliteConfirmed"),this.$bvModal.hide(this.modalId)}}},B=T,U=Object(C["a"])(B,P,A,!1,null,null,null),z=U.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Share Exam","hide-footer":""}},[t.show?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("p",[t._v("Exam is not completed yet. Are you sure want to share link?")]),a("div",{staticClass:"d-flex justify-content-center"},[a("button",{staticClass:"btn mr-2",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("No")]),a("button",{staticClass:"btn btn-dark",on:{click:t.approveHandle}},[t._v("Yes")])])])]),t.show?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 m-b-1"},[a("label",{staticClass:"form-label"},[t._v("Email")]),a("input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exam.email,expression:"exam.email"}],ref:"input",staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.exam.email},on:{keyup:t.onChange,input:function(e){e.target.composing||t.$set(t.exam,"email",e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-dark",on:{click:t.invite}},[t._v("Send")])])]),a("Errors",{attrs:{errors:t.errors.email}})],1)]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t.examAuditors&&t.examAuditors.length?a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{attrs:{width:"70"}},[a("div",{staticClass:"d-inline"},[t._v("Invited")])]),a("th",{staticClass:"text-right"})])]),a("tbody",t._l(t.examAuditors,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"auditor-email"},[t._v(t._s(e.email))]),a("td",{staticClass:"text-right"},[a("b-icon",{staticClass:"remove-btn",attrs:{icon:"x"},on:{click:function(a){return t.unIinvite(e.id,e.email)}}})],1)])})),0)]):t._e()])]),a("template",{attrs:{"footer-class":"d-none"},slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")])])],2)],1)},Y=[],H=a("278c"),J=a.n(H),V=a("6bfc"),G=a("5fcc"),K=function(){return Math.random().toFixed(10).toString().replace(".","")},Q=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,W={props:{inline:{type:Boolean,default:!0},examId:{type:Number,required:!0},examAuditors:{type:Array,required:!1},examStatus:{type:Boolean,default:!1}},components:{Errors:V["a"],UserAvatar:G["a"]},created:function(){this.examStatus&&(this.show=!0)},data:function(){return{modalId:"modal_".concat(K()),exam:{email:""},errors:{},specialist:{first_name:"A",last_name:"N"},show:!1}},methods:{resetForm:function(){this.exam={email:"",link:""}},onChange:function(t){13===t.keyCode&&this.invite(t)},invite:function(t){var e=this;return i()(u.a.mark((function a(){var s;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.errors={},e.exam.email){a.next=5;break}return e.errors={email:["Required field"]},a.abrupt("return");case 5:if(Q.test(e.exam.email)){a.next=8;break}return e.errors={email:["Invalid email address"]},a.abrupt("return");case 8:return s={id:e.examId,email:e.exam.email},a.prev=9,a.next=12,e.$store.dispatch("exams/sendInvite",s).then((function(t){if(t.errors&&Object.keys(t.errors))for(var a=0,s=Object.entries(t.errors);a<s.length;a++){var n=J()(s[a],2),r=n[0],i=n[1];e.$set(e.errors,r,i)}t.errors||(e.toast("Success","Invitation has been sent."),e.exam.email="")}))["catch"]((function(t){return console.error(t)}));case 12:a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](9),e.toast("Error",a.t0.message,!0);case 17:case"end":return a.stop()}}),a,null,[[9,14]])})))()},unIinvite:function(t,e){var a=this;return i()(u.a.mark((function s(){var n;return u.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={id:a.examId,auditorId:t,email:e},s.prev=1,s.next=4,a.$store.dispatch("exams/sendUninvite",n).then((function(t){if(t.errors)for(var e=0,s=Object.entries(t.errors);e<s.length;e++){var n=J()(s[e],2),r=n[0],i=n[1];a.toast("Error","".concat(r,": ").concat(i),!0),a.errors=Object.assign(a.errors,c()({},r,i))}t.errors||a.toast("Success","Invitation has been revoked.")}))["catch"]((function(t){return console.error(t)}));case 4:s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](1),a.toast("Error",s.t0.message,!0);case 9:case"end":return s.stop()}}),s,null,[[1,6]])})))()},copyTestingCode:function(){var t=document.querySelector("#share-link");t.select();try{var e=document.execCommand("copy"),a=e?"successful":"unsuccessful";this.toast("Success","Sharing link was copied ".concat(a))}catch(s){this.toast("Error","Oops, unable to copy",!0)}window.getSelection().removeAllRanges()},approveHandle:function(){this.show=!0}}},X=W,Z=(a("4ddc"),Object(C["a"])(X,L,Y,!1,null,"acf52fec",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Upload file"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 m-y-1"},[a("label",{staticClass:"dropbox w-100",attrs:{for:"files"}},[a("input",{ref:"files",staticClass:"input-file",attrs:{type:"file",id:"files",multiple:""},on:{change:t.selectFile}}),a("p",[t._v("Drag your file(s) here"),a("br"),t._v("OR"),a("br"),a("button",{staticClass:"btn btn-default text-bold"},[t._v("Upload")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},t._l(t.files,(function(e,s){return t.files?a("div",{staticClass:"file-card"},[a("div",{staticClass:"mr-2"},[a("b-icon",{staticClass:"file-card__icon",attrs:{icon:"file-earmark-text-fill","font-scale":"2"}})],1),a("div",{staticClass:"ml-0 mr-auto"},[a("p",{staticClass:"file-card__name"},[a("b",[t._v(t._s(e.name))])]),a("div",{staticClass:"file-card__link link"},[t._v("Download")])]),a("div",{staticClass:"ml-auto align-self-start"},[a("button",{staticClass:"btn btn__close file-card__close",on:{click:function(e){return t.removeFile(s)}}},[a("b-icon",{attrs:{icon:"x","font-scale":"1"}})],1)])]):t._e()})),0)]),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Add")])])],2)],1)},at=[],st=function(){return Math.random().toFixed(10).toString().replace(".","")},nt={props:{inline:{type:Boolean,default:!0},currentExamId:{type:Number,required:!0},request:{type:Object,required:!0}},data:function(){return{modalId:"modal_".concat(st()),files:[]}},methods:{submit:function(t){var e=this;return i()(u.a.mark((function a(){var s,n,r;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.files.length){a.next=4;break}return e.toast("Error","Please add minimal 1 file!",!0),a.abrupt("return");case 4:a.prev=4,s=new FormData,n=u.a.mark((function t(){var a,n,i;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.files[r],s.append("file",a),n={id:e.currentExamId,request:{id:e.request.id},formData:s},i=new Promise((function(t,a){e.$store.dispatch("exams/uploadExamRequestFile",n).then((function(e){return t(e)}))["catch"]((function(t){return a(t)}))})),t.next=6,i.then((function(t){return e.toast("Success","".concat(t.name," successful uploaded!"))}))["catch"]((function(t){return e.toast("Error",t.message,!0)}));case 6:case"end":return t.stop()}}),t)})),r=0;case 8:if(!(r<e.files.length)){a.next=13;break}return a.delegateYield(n(),"t0",10);case 10:r++,a.next=8;break;case 13:a.next=18;break;case 15:a.prev=15,a.t1=a["catch"](4),e.toast("Error",a.t1.message,!0);case 18:return a.prev=18,e.files=[],e.$emit("saved"),e.$bvModal.hide(e.modalId),a.finish(18);case 23:case"end":return a.stop()}}),a,null,[[4,15,18,23]])})))()},selectFile:function(t){for(var e=this.$refs.files.files,a=0;a<e.length;a++)this.files.push(e[a])},removeFile:function(t){this.files.splice(t,1)}}},rt=nt,it=Object(C["a"])(rt,et,at,!1,null,null,null),ot=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,size:"xl",title:"Select Files(s)"},on:{show:t.newEtag,shown:t.getData}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header px-0"},[a("b-tabs",{attrs:{"content-class":"mt-0 px-0"}},[a("b-tab",{attrs:{title:"Book and Records","title-item-class":"font-weight-bold",active:""}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row m-b-1"},[a("div",{staticClass:"col-12 p-x-1"},[a("div",{staticClass:"d-flex align-items-center"},[t.currentFolderId?a("a",{staticClass:"btn btn-default m-r-1 p-0",on:{click:function(e){return e.stopPropagation(),t.backToRoot.apply(null,arguments)}}},[a("b-icon",{attrs:{icon:"arrow-left-square","font-scale":"1"}})],1):t._e(),a("h4",{staticClass:"m-b-0"},[t._v("All Documents"),t.currentFolderName?a("span",{staticClass:"separator"},[t._v(" / ")]):t._e(),t.currentFolderName?a("span",[t._v(t._s(t.currentFolderName))]):t._e()])])])]),a("div",{staticClass:"row m-b-1"},[a("div",{staticClass:"col-12 p-x-1"},[a("Loading"),!t.loading&&t.filefolders.files&&t.filefolders.folders?a("FilefoldersTable",{attrs:{filefolders:t.filefolders,check:!0},on:{selectedItem:t.collecingFiles}}):t._e(),t.filefolders.files||t.filefolders.folders||t.loading?t._e():a("div",{staticClass:"row h-100"},[a("div",{staticClass:"col h-100 text-center"},[a("EmptyState")],1)])],1)])])]),a("b-tab",{attrs:{title:"Policies","title-item-class":"font-weight-bold"}},[a("div",[a("table",{staticClass:"table"},[a("thead"),a("tbody",[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"5"}},[a("h4",{staticClass:"py-2"},[t._v("No Policies")])])])])])])])],1)],1)]),a("template",{slot:"modal-footer"},[a("div",{staticClass:"col"},[a("label",{staticClass:"m-t-1 form-label font-weight-bold"},[t._v(t._s(t.countSelected)+" Items Selected")])]),a("div",{staticClass:"col-justify-content-end"},[a("a",{staticClass:"btn link btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Add")])])])],2)],1)},lt=[],ut=a("f774"),dt=a("97af");function mt(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=ft(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){o=!0,r=t},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(o)throw r}}}}function ft(t,e){if(t){if("string"===typeof t)return pt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function vt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function bt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(a),!0).forEach((function(e){c()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var xt=function(){return Math.random().toFixed(10).toString().replace(".","")};function ht(t,e){return _t.apply(this,arguments)}function _t(){return _t=i()(u.a.mark((function t(e,a){var s,n,r,i;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.$store.getters.backendUrl+e);case 2:return s=t.sent,t.next=5,s.blob();case 5:return n=t.sent,r={type:"image/jpeg"},i=new File([n],a,r),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t,this)}))),_t.apply(this,arguments)}var Ct={mixins:[Object(ut["a"])()],props:{inline:{type:Boolean,default:!0},currentExamId:{type:Number,required:!0},request:{type:Object,required:!0}},components:{Loading:m["a"],FilefoldersTable:dt["a"]},data:function(){return{modalId:"modal_".concat(xt()),filesCollection:[]}},methods:bt(bt({},Object(d["b"])({getFileFoldersById:"filefolders/getFileFoldersById"})),{},{submit:function(t){var e=this;return i()(u.a.mark((function a(){return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.preventDefault();try{(function(){var t,a=new FormData,s=mt(e.filesCollection);try{for(s.s();!(t=s.n()).done;){var n=t.value;ht("".concat(window.location.origin,"/").concat(n.file_addr),n.name).then((function(t){a.append("file",t);var s={id:e.currentExamId,request:{id:e.request.id},formData:a},n=new Promise((function(t,a){e.$store.dispatch("exams/uploadExamRequestFile",s).then((function(e){return t(e)}))["catch"]((function(t){return a(t)}))}));n.then((function(t){return e.toast("Success","".concat(t.name," successful uploaded!"))}))["catch"]((function(t){return e.toast("Error",t.message,!0)}))}))["catch"]((function(t){return console.error(t)}))}}catch(r){s.e(r)}finally{s.f()}})()}catch(s){e.toast("Error",s.message,!0)}finally{e.filesCollection=[],e.$emit("saved"),e.$bvModal.hide(e.modalId)}case 2:case"end":return a.stop()}}),a)})))()},backToRoot:function(t){var e=this;return i()(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("filefolders/getFileFolders").then((function(){e.$store.commit("filefolders/SET_CUREENT_FOLDER",null),e.$store.commit("filefolders/SET_CUREENT_FOLDER_NAME",null)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.toast("Error",t.t0.message,!0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},getData:function(){var t=this;return i()(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("filefolders/getFileFolders");case 3:e.next=9;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0),t.toast("Error",e.t0.message,!0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))()},collecingFiles:function(t){if(t.status&&(this.filesCollection.includes(t.file)||this.filesCollection.push(t.file)),!t.status){var e=this.filesCollection.findIndex((function(e){return e.id===t.file.id}));this.filesCollection.splice(e,1)}}}),computed:bt(bt({loading:function(){return this.$store.getters.loading}},Object(d["c"])({filefolders:"filefolders/filefolders",currentFileFolders:"filefolders/currentFileFolders",currentFolderId:"filefolders/currentFolder",currentFolderName:"filefolders/currentFolderName"})),{},{countSelected:function(){return this.filesCollection.length}})},wt=Ct,Et=Object(C["a"])(wt,ct,lt,!1,null,null,null),gt=Et.exports,kt=a("0a0c"),yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"policy-details position-relative"},[a("h3",{staticClass:"policy-details__title"},[t._v("Documents")]),t._m(0),a("div",{staticClass:"policy-details__body"},[a("DocumentsTable",{attrs:{currentExam:t.currentExam}})],1)])},qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"policy-actions"},[a("a",{staticClass:"btn btn-default d-none"},[t._v("Download")]),a("a",{staticClass:"btn m-l-1 btn-dark"},[t._v("Create Documents")])])}],Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.currentExam.exam_requests,(function(e,s){return a("div",{key:s,staticClass:"row"},[t._l(e.exam_request_files,(function(s,n){return[a("div",{key:e.id+"--"+s+"-"+n,staticClass:"col-md-6 m-b-1"},[a("div",{staticClass:"file-card"},[a("div",{staticClass:"mr-2"},[a("b-icon",{staticClass:"file-card__icon",attrs:{icon:"file-earmark-text-fill","font-scale":"2"}})],1),a("div",{staticClass:"ml-0 mr-auto"},[a("p",{staticClass:"file-card__name"},[a("b",[t._v(t._s(s.name))])]),a("a",{staticClass:"file-card__link link",attrs:{href:s.file_url,target:"_blank"}},[t._v("Download")])]),a("div",{staticClass:"ml-auto align-self-start actions"},[a("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"sm",variant:"none",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!0)},[a("b-dropdown-item",{staticClass:"delete"},[t._v("Delete file")])],1)],1)])])]}))],2)})),t.countDocuments?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("EmptyState")],1)])],2)},It=[],Dt={props:["currentExam"],computed:{countDocuments:function(){var t=0;return this.currentExam.exam_requests.map((function(e){t+=e.exam_request_files.length})),t}}},St=Dt,jt=(a("eb65"),Object(C["a"])(St,Ot,It,!1,null,"3d8418f0",null)),$t=jt.exports,Ft={props:["currentExam"],components:{DocumentsTable:$t},data:function(){return{}},created:function(){},methods:{},computed:{}},Rt=Ft,Mt=Object(C["a"])(Rt,yt,qt,!1,null,null,null),Pt=Mt.exports,At=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row p-x-1"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-body white-card-body reviews__card px-5"},[a("div",{staticClass:"reviews__topiclist"},[a("div",{staticClass:"reviews__card--internal p-y-1"},[a("div",{staticClass:"row m-b-2"},[a("div",{staticClass:"col-md-12 d-flex justify-content-between"},[a("h2",[t._v("Activity")]),a("div",[a("a",{staticClass:"btn btn-default d-none"},[t._v("Download")]),a("a",{staticClass:"btn m-l-1 btn-dark"},[t._v("Create Activity")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("table",{staticClass:"table task_table"},[a("tbody",[a("tr",[a("td",{staticClass:"text-center"},[a("h3",[t._v("No Activity")])])])])])])])])])])])])])}],Tt={components:{},data:function(){return{}},created:function(){},methods:{},computed:{}},Bt=Tt,Ut=Object(C["a"])(Bt,At,Nt,!1,null,null,null),zt=Ut.exports;function Lt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(a),!0).forEach((function(e){c()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Lt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ht={props:["examId"],components:{Loading:m["a"],PageActivity:zt,PageAttachments:Pt,PageTasks:kt["default"],ExamModalSelectFiles:gt,ExamModalUpload:ot,ExamModalShare:tt,ExamModalComplite:z,TaskFormModal:M["a"],ExamRequestModalEdit:R,ExamRequestModalCreate:E,ExamModalEdit:g["a"],ExamModalDelete:k["a"]},data:function(){return{filterOption:"all",shareRequestData:null}},computed:Yt(Yt({},Object(d["c"])({currentExam:"exams/currentExam",plan:"roles/currentPlan"})),{},{loading:function(){return this.$store.getters.loading},currentExamRequestsFiltered:function(){return"shared"===this.filterOption?this.currentExam.exam_requests.filter((function(t){return t.shared})):this.currentExam.exam_requests},countCompleted:function(){var t=this.currentExam.exam_requests.length,e=this.currentExam.exam_requests.filter((function(t){return t.complete})).length;return"".concat(e,"/").concat(t)},itemsTotal:function(){var t=this.currentExam.exam_requests.map((function(t){var e=t.text_items?t.text_items.length:0,a=t.exam_request_files?t.exam_request_files.length:0,s=e+a;return s||0}));return t}}),mounted:function(){var t=this;return i()(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getCurrentExam(t.examId);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),t.toast("Error",e.t0.message,!0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},methods:Yt(Yt({},Object(d["b"])({updateExam:"exams/updateExam",getCurrentExam:"exams/getExamById",deletetCurrentExam:"exams/deleteExam",updateCurrentExamRequest:"exams/updateExamRequest",deleteCurrentExamRequest:"exams/deleteExamRequest"})),{},{filterRequest:function(t){this.filterOption=t},saveExam:function(){var t=this;return i()(u.a.mark((function e(){var a,s;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.currentExam,a=t.currentExam.exam_requests,t.currentExam.exam_requests=t.currentExam.exam_requests.map((function(t){return Yt(Yt({},t),{},{text_items:t.text_items?t.text_items.map((function(t){return t.text})):[]})})),s=Yt(Yt({},t.currentExam),{},{exam_requests_attributes:t.currentExam.exam_requests}),delete s.exam_requests,e.prev=5,e.next=8,t.updateExam(s).then((function(e){t.shareRequestData?t.shareRequest():t.toast("Success","Exam has been saved.")}))["catch"]((function(e){return t.toast("Error",e.message,!0)}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](5),t.toast("Error",e.t0.message,!0);case 13:return e.prev=13,t.currentExam.exam_requests=a,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,10,13,16]])})))()},markCompleteExam:function(t,e){var a=this;return i()(u.a.mark((function t(){var e;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={id:a.currentExam.id,complete:!a.currentExam.complete},t.prev=1,t.next=4,a.updateExam(e).then((function(t){return a.toast("Success","Exam has been marked as ".concat(a.currentExam.complete?"":"in","complete."))}))["catch"]((function(t){return a.toast("Error",t.message,!0)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),a.toast("Error",t.t0.message,!0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},markCompleteReqeust:function(t,e,a){var s=this;return i()(u.a.mark((function n(){var r;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a){n.next=2;break}return n.abrupt("return");case 2:return r={id:s.currentExam.id,request:{id:t,complete:e}},n.prev=3,n.next=6,s.updateCurrentExamRequest(r).then((function(t){return s.toast("Success","Request has been saved.")}))["catch"]((function(t){return s.toast("Error",t.message,!0)}));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](3),s.toast("Error",n.t0.message,!0);case 11:case"end":return n.stop()}}),n,null,[[3,8]])})))()},shareRequest:function(){var t=this;return i()(u.a.mark((function e(){var a;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.shareRequestData){e.next=2;break}return e.abrupt("return");case 2:return a={id:t.currentExam.id,request:{id:t.shareRequestData.id,shared:t.shareRequestData.status}},e.prev=3,e.next=6,t.updateCurrentExamRequest(a).then((function(e){t.shareRequestData=null,t.toast("Success","Request has been saved.")}))["catch"]((function(e){return t.toast("Error",e.message,!0)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),t.toast("Error",e.t0.message,!0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))()},shareRequestAction:function(t,e){this.shareRequestData={id:t,status:e},this.saveExam()},addTextEntry:function(t){this.currentExam.exam_requests[t].text_items||(this.currentExam.exam_requests[t].text_items=[]),this.currentExam.exam_requests[t].text_items.push({text:""})},removeTextEntry:function(t,e){this.currentExam.exam_requests[t].text_items.splice(e,1)},deleteExamRequest:function(t){var e=this;return i()(u.a.mark((function a(){return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.deleteCurrentExamRequest({id:e.examId,requestId:t}).then((function(t){return e.toast("Success","Request has been deleted.")}))["catch"]((function(t){return e.toast("Error",t.message,!0)}));case 3:a.next=8;break;case 5:a.prev=5,a.t0=a["catch"](0),e.toast("Error",a.t0.message,!0);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})))()},createTask:function(t){console.log("createTask: ",t)},saveAndExit:function(){this.saveExam(),window.location.href="".concat(window.location.origin,"/business/exam_management/")},exit:function(){window.location.href="".concat(window.location.origin,"/business/exam_management/")},removeFile:function(t,e){var a=this;return i()(u.a.mark((function s(){var n;return u.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={id:a.currentExam.id,request:{id:t},file:{id:e}},s.prev=1,s.next=4,a.$store.dispatch("exams/deleteExamRequestFile",n).then((function(t){a.toast("Success","File has been deleted."),a.$emit("saved"),a.$bvModal.hide(a.modalId)}))["catch"]((function(t){return a.toast("Error",t.message,!0)}));case 4:s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](1),a.toast("Error",s.t0.message,!0);case 9:case"end":return s.stop()}}),s,null,[[1,6]])})))()},deleteExam:function(t){var e=this;return i()(u.a.mark((function a(){return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:try{e.deletetCurrentExam({id:t}).then((function(t){e.toast("Success","Exam has been deleted."),setTimeout((function(){window.location.href="".concat(window.location.origin,"/business/exam_management/")}),2e3)}))["catch"]((function(t){return e.toast("Error","Action has not been completed. Please try again. ".concat(t.message),!0)}))}catch(s){e.toast("Error",s.message,!0)}case 1:case"end":return a.stop()}}),a)})))()}})},Jt=Ht,Vt=(a("bd5c"),Object(C["a"])(Jt,s,n,!1,null,"2d5f96da",null));e["default"]=Vt.exports},eb65:function(t,e,a){"use strict";a("daf1")},f67b:function(t,e,a){"use strict";var s=a("a423"),n=a.n(s);e["default"]=n.a}}]);
//# sourceMappingURL=chunk-7e686e3e.0410a0da.js.map
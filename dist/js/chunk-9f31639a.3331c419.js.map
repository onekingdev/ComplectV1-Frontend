{"version":3,"sources":["webpack:///./src/common/Modals/RisksAddEditModal.vue?cc04","webpack:///src/common/Modals/RisksAddEditModal.vue","webpack:///./src/common/Modals/RisksAddEditModal.vue?fb86","webpack:///./src/common/Modals/RisksAddEditModal.vue","webpack:///./src/business/riskregister/RiskDetail.vue?3334","webpack:///./src/assets/policy.svg","webpack:///./src/business/riskregister/Modals/RiskContols.vue?2979","webpack:///./src/business/riskregister/RiskDetail.vue?ff4c","webpack:///./src/business/riskregister/Modals/RiskModalDelete.vue?32b7","webpack:///src/business/riskregister/Modals/RiskModalDelete.vue","webpack:///./src/business/riskregister/Modals/RiskModalDelete.vue?ae8b","webpack:///./src/business/riskregister/Modals/RiskModalDelete.vue","webpack:///./src/business/riskregister/Modals/RiskContols.vue?f090","webpack:///src/business/riskregister/Modals/RiskContols.vue","webpack:///./src/business/riskregister/Modals/RiskContols.vue?fdc7","webpack:///./src/business/riskregister/Modals/RiskContols.vue","webpack:///./src/business/riskregister/PoliciesTable.vue?1b48","webpack:///src/business/riskregister/PoliciesTable.vue","webpack:///./src/business/riskregister/PoliciesTable.vue?ede7","webpack:///./src/business/riskregister/PoliciesTable.vue","webpack:///src/business/riskregister/RiskDetail.vue","webpack:///./src/business/riskregister/RiskDetail.vue?3897","webpack:///./src/business/riskregister/RiskDetail.vue","webpack:///./src/assets/error_20.svg","webpack:///./src/mixins/EtaggerMixin.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","inline","directives","name","rawName","value","expression","_t","staticClass","attrs","modalId","riskId","on","hideModal","newEtag","submitUrl","undefined","initialrisk","etag","loadrisk","options","onChange","model","risk","callback","$$v","$set","errors","_e","_v","domProps","$event","target","composing","impact","levelOptions","onRiskChange","likelihood","badgeVariant","_s","riskLevelName","slot","submit","staticRenderFns","mixins","props","id","String","risks","Array","Number","remindAt","type","Boolean","default","risksList","policyId","showRiskOption","data","isActive","methods","$bvModal","hide","Object","assign","concat","risksComputedAsOptions","e","preventDefault","compliance_policy_ids","compliance_policies","map","includes","push","method","$store","event","resultRisk","riskLevelColor","riskLevelNum","getRiskLevelName","num","text","riskLevel","computed","canBeDraft","toId","httpMethod","watch","component","module","exports","loading","pageTitle","riskComputed","risk_level","showLevel","scopedSlots","_u","key","fn","proxy","deleteRisk","length","updateRisk","title","staticStyle","_l","policy","index","form","checked","status","statusVariant","dateToHuman","updated_at","created_at","policiesComputed","countSelected","riskPolicies","deleteControl","etagInit","Math","random","EtaggerMixin","propertyName","prop","refreshMethodName","toUpperCase","substring"],"mappings":"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","file":"js/chunk-9f31639a.3331c419.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"title\":_vm.riskId ? 'Edit risk' : 'New risk'},on:{\"close\":_vm.hideModal,\"show\":_vm.newEtag}},[_c('ModelLoader',{attrs:{\"url\":_vm.riskId ? _vm.submitUrl : undefined,\"default\":_vm.initialrisk,\"etag\":_vm.etag},on:{\"loaded\":_vm.loadrisk}},[(_vm.showRiskOption)?_c('b-form-group',{staticClass:\"form-label mb-3\",attrs:{\"id\":\"input-group-1\",\"label\":\"Risk\",\"label-for\":\"select-1\"}},[_c('b-form-select',{attrs:{\"id\":\"select-1\",\"options\":_vm.options,\"required\":\"\"},on:{\"change\":_vm.onChange},model:{value:(_vm.risk.risks),callback:function ($$v) {_vm.$set(_vm.risk, \"risks\", $$v)},expression:\"risk.risks\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.risk}})],1):_vm._e(),_c('b-row',{attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"Risk Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.risk.name),expression:\"risk.name\"}],staticClass:\"form-control\",domProps:{\"value\":(_vm.risk.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.risk, \"name\", $event.target.value)}}}),_c('Errors',{attrs:{\"errors\":_vm.errors.name}})],1)]),_c('b-row',{staticClass:\"m-t-1\",attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col-sm m-r-1\"},[_c('b-form-group',{staticClass:\"form-label\",attrs:{\"id\":\"input-group-2\",\"label\":\"Impact\",\"label-for\":\"select-2\"}},[_c('b-form-select',{attrs:{\"id\":\"select-2\",\"errors\":_vm.errors.impact,\"options\":_vm.levelOptions},on:{\"change\":_vm.onRiskChange},model:{value:(_vm.risk.impact),callback:function ($$v) {_vm.$set(_vm.risk, \"impact\", $$v)},expression:\"risk.impact\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.impact}})],1)],1),_c('div',{staticClass:\"col-sm\"},[_c('b-form-group',{staticClass:\"form-label\",attrs:{\"id\":\"input-group-3\",\"label\":\"Likelihood\",\"label-for\":\"select-3\"}},[_c('b-form-select',{attrs:{\"id\":\"select-3\",\"errors\":_vm.errors.likelihood,\"options\":_vm.levelOptions},on:{\"change\":_vm.onRiskChange},model:{value:(_vm.risk.likelihood),callback:function ($$v) {_vm.$set(_vm.risk, \"likelihood\", $$v)},expression:\"risk.likelihood\"}}),_c('Errors',{attrs:{\"errors\":_vm.errors.likelihood}})],1)],1)]),_c('b-row',{staticClass:\"mt-2\",attrs:{\"no-gutters\":\"\"}},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"Risk Level\")]),_c('div',[_c('b-icon',{staticClass:\"mr-3\",attrs:{\"icon\":\"exclamation-triangle-fill\",\"scale\":\"1\",\"variant\":_vm.badgeVariant}}),_vm._v(_vm._s(_vm.riskLevelName))],1)])])],1),_c('template',{slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-link\",on:{\"click\":function($event){return _vm.hideModal()}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-dark\",on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.riskId ? 'Save' : 'Add'))])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" :title=\"riskId ? 'Edit risk' : 'New risk'\" @close=\"hideModal\" @show=\"newEtag\")\n      ModelLoader(:url=\"riskId ? submitUrl : undefined\" :default=\"initialrisk\" :etag=\"etag\" @loaded=\"loadrisk\")\n\n        b-form-group#input-group-1.form-label.mb-3(v-if=\"showRiskOption\" label='Risk' label-for='select-1')\n          b-form-select#select-1(v-model='risk.risks' :options='options' @change=\"onChange\" required)\n          Errors(:errors=\"errors.risk\")\n\n        b-row(no-gutters)\n          .col\n            label.form-label Risk Name\n            input.form-control(v-model=\"risk.name\" type=text)\n            Errors(:errors=\"errors.name\")\n\n        b-row.m-t-1(no-gutters)\n          .col-sm.m-r-1\n            b-form-group#input-group-2.form-label(label='Impact' label-for='select-2')\n              b-form-select#select-2(v-model=\"risk.impact\" :errors=\"errors.impact\" :options=\"levelOptions\" @change=\"onRiskChange\")\n              Errors(:errors=\"errors.impact\")\n          .col-sm\n            b-form-group#input-group-3.form-label(label='Likelihood' label-for='select-3')\n              b-form-select#select-3(v-model=\"risk.likelihood\" :errors=\"errors.likelihood\" :options=\"levelOptions\" @change=\"onRiskChange\")\n              Errors(:errors=\"errors.likelihood\")\n\n        b-row.mt-2(no-gutters)\n          .col\n            label.form-label Risk Level\n            div\n              b-icon.mr-3(icon=\"exclamation-triangle-fill\" scale=\"1\" :variant=\"badgeVariant\")\n              | {{ riskLevelName }}\n\n      template(slot=\"modal-footer\")\n        button.btn.btn-link(@click=\"hideModal()\") Cancel\n        button.btn.btn-dark(@click=\"submit\") {{ riskId ? 'Save' : 'Add' }}\n</template>\n\n<script>\nimport EtaggerMixin from '@/mixins/EtaggerMixin'\n\nconst rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n\nconst initialrisk = () => ({\n  name: \"\",\n  id: null,\n  impact: 0,\n  likelihood: 0,\n  compliance_policies: [],\n  compliance_policy_ids: []\n})\n\nexport default {\n  mixins: [EtaggerMixin()],\n  props: {\n    id: String,\n    risks: Array,\n    riskId: Number,\n    remindAt: String,\n    inline: {\n      type: Boolean,\n      default: true\n    },\n    risksList: Array,\n    policyId: Number,\n    showRiskOption: {\n      type: Boolean,\n      default: false,\n    }\n  },\n  data() {\n    return {\n      modalId: this.id || `modal_${rnd()}`,\n      risk: initialrisk(),\n      isActive: false,\n      options: [\n        { value: null, text: 'New Risk' },\n      ],\n      levelOptions: [\n        { value: 0, text: 'Low' },\n        { value: 1, text: 'Medium' },\n        { value: 2, text: 'High' },\n      ],\n      badgeVariant: 'secondary',\n      riskLevelName: '---',\n      errors: {},\n    }\n  },\n  methods: {\n    hideModal() {\n      this.errors = {}\n      this.$bvModal.hide(this.modalId)\n    },\n    loadrisk(risk) {\n      this.risk = Object.assign({}, this.risk, risk)\n      this.onRiskChange()\n\n      this.options = [{ value: null, text: 'New Risk' }]\n      this.options = this.options.concat(this.risksComputedAsOptions)\n    },\n    submit(e) {\n      e.preventDefault()\n      this.errors = {}\n      if (!this.risk.name) {\n        this.$set(this.errors, 'name', ['Required field'])\n        return\n      }\n\n      this.risk.compliance_policy_ids = this.risk.compliance_policies.map(policy => policy.id)\n      if (!this.risk.compliance_policy_ids.includes(this.policyId)) this.risk.compliance_policy_ids.push(this.policyId)\n\n      let method;\n      if(!this.riskId && !this.risk.id) {\n        method = 'createRisk'\n      } else {\n        method = 'updateRisk'\n      }\n\n      this.$store\n        .dispatch(method, {...this.risk})\n        .then(response => {\n          if (response.errors) {\n            const text = method === 'createRisk' ? 'Risk has not been created. Please try again.' : 'Risk has not been updated. Please try again.'\n            this.toast('Error', text)\n          } else {\n            if (method == 'createRisk') {\n              this.toast('Success', 'Risk has been created.')\n            } else {\n              this.toast('Success', 'Risk has been updated.')\n            }\n            this.$emit('saved', response)\n            this.$bvModal.hide(this.modalId)\n            this.newEtag()\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          this.toast('Error', `Risk has not been created. Please try again. ${error}`, true)\n        })\n    },\n    onChange(event){\n      // CATCH RISK NEW OR FROM CREATED\n      if (event === null) {\n        this.isActive = true\n        this.risk = initialrisk()\n        this.badgeVariant = 'secondary'\n        this.riskLevelName = '---'\n        return;\n      }\n      else  {\n        this.isActive = false\n      }\n\n      const resultRisk = this.risks.find(risk => risk.id === event)\n      this.risk = resultRisk\n      this.onRiskChange()\n    },\n    onRiskChange(){\n      const riskLevelNum = this.riskLevel(this.risk.likelihood, this.risk.impact)\n      this.riskLevelColor(riskLevelNum)\n      this.getRiskLevelName(riskLevelNum)\n    },\n    getRiskLevelName(num) {\n      this.riskLevelName = this.levelOptions[num].text\n    },\n    riskLevel(likelihood, impact) {\n      if ((likelihood > 0) && (impact === 2)) {\n        return 2;\n      } else if ((likelihood < 2) && (impact === 0)) {\n        return 0;\n      } else {\n        return 1;\n      }\n    },\n    riskLevelColor(num) {\n      if (num === 0) this.badgeVariant = 'success'\n      if (num === 1) this.badgeVariant = 'warning'\n      if (num === 2) this.badgeVariant = 'danger'\n    },\n  },\n  computed: {\n    initialrisk: () => initialrisk,\n    canBeDraft() {\n      return !this.riskId || ('draft' === this.risk.status)\n    },\n    submitUrl() {\n      const toId = this.riskId ? `/${this.riskId}` : ''\n      return '/api/business/risks' + toId\n    },\n    httpMethod() {\n      return this.riskId ? 'PUT' : 'POST'\n    },\n    risksComputedAsOptions() {\n      return this.risks.map(risk => {\n        return {\n          value: risk.id, text: risk.name\n        }\n      })\n    }\n  },\n  watch: {}\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksAddEditModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RisksAddEditModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RisksAddEditModal.vue?vue&type=template&id=3182b004&lang=pug&\"\nimport script from \"./RisksAddEditModal.vue?vue&type=script&lang=js&\"\nexport * from \"./RisksAddEditModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskDetail.vue?vue&type=style&index=0&id=00fa8504&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/policy.4cd572ac.svg\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskContols.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[(_vm.loading)?_c('div',[_c('Loading')],1):_vm._e(),(!_vm.loading)?_c('div',{staticClass:\"page-header\"},[_c('div',{staticClass:\"page-header__title\"},[_c('h2',[_vm._v(_vm._s(_vm.pageTitle)),_c('span',{staticClass:\"separator mx-2\"},[_vm._v(\"/\")]),_c('b',[_vm._v(_vm._s(_vm.riskComputed.name))])]),_c('h2',{staticClass:\"mt-1\"},[_c('b-badge',{staticClass:\"badge-risk custom-badge mr-1\",attrs:{\"variant\":_vm.badgeVariant(_vm.riskComputed.risk_level)}},[_c('b-icon-exclamation-triangle-fill',{staticClass:\"mr-2\"}),_vm._v(_vm._s(_vm.showLevel(_vm.riskComputed.risk_level)))],1),_c('b',{staticClass:\"risk-name\"},[_vm._v(_vm._s(_vm.riskComputed.name))])],1)]),_c('div',{staticClass:\"page-header__actions\"},[_c('b-dropdown',{staticClass:\"actions__dropdown actions__dropdown_tasks\",attrs:{\"variant\":\"default\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_vm._v(\"Actions\"),_c('ion-icon',{staticClass:\"ml-2\",attrs:{\"name\":\"chevron-down-outline\",\"size\":\"small\"}})]},proxy:true}],null,false,3535397629)},[_c('RiskModalDelete',{attrs:{\"riskId\":_vm.riskComputed.id,\"inline\":false},on:{\"deleteConfirmed\":_vm.deleteRisk}},[_c('b-dropdown-item',{staticClass:\"delete\"},[_vm._v(\"Delete risk\")])],1)],1)],1)]):_vm._e(),(!_vm.loading)?_c('div',{staticClass:\"card-body white-card-body card-body_full-height\"},[_c('div',{staticClass:\"mb-3\"},[_c('b-card-group',{attrs:{\"deck\":\"\"}},[_c('b-card',{attrs:{\"header-tag\":\"header\",\"header-class\":\"d-flex\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h3',{staticClass:\"mb-0 font-weight-bold\"},[_vm._v(\"Risk Details\")]),_c('RisksAddEditModal',{staticClass:\"ml-auto\",attrs:{\"riskId\":_vm.riskComputed.id,\"inline\":false}},[_c('button',{staticClass:\"btn btn-secondary\"},[_vm._v(\"Edit\")])])]},proxy:true}],null,false,2711817094)},[_c('b-card-text',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-2 col-md-3 col-4 pr-0\"},[_c('b-list-group',{staticClass:\"text-secondary\"},[_c('b-list-group-item',{staticClass:\"border border-white pb-0 pt-0\"},[_vm._v(\"Title\")]),_c('b-list-group-item',{staticClass:\"border border-white pb-0\"},[_vm._v(\"Impact\")]),_c('b-list-group-item',{staticClass:\"border border-white pb-0\"},[_vm._v(\"Likelihood\")])],1)],1),_c('div',{staticClass:\"col pl-0\"},[_c('b-list-group',[_c('b-list-group-item',{staticClass:\"border border-white pb-0 pt-0\"},[_vm._v(_vm._s(_vm.riskComputed.name))]),_c('b-list-group-item',{staticClass:\"border border-white pb-0\"},[_vm._v(_vm._s(_vm.showLevel(_vm.riskComputed.impact)))]),_c('b-list-group-item',{staticClass:\"border border-white pb-0\"},[_vm._v(_vm._s(_vm.showLevel(_vm.riskComputed.likelihood)))])],1)],1)])])],1)],1)],1),_c('div',[_c('b-card-group',{attrs:{\"deck\":\"\"}},[_c('b-card',{attrs:{\"header-tag\":\"header\",\"header-class\":\"d-flex\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h3',{staticClass:\"mb-0 font-weight-bold\"},[_vm._v(\"Controls\")]),_c('RiskContols',{staticClass:\"ml-auto\",attrs:{\"riskId\":_vm.riskComputed.id,\"inline\":false}},[_c('button',{staticClass:\"btn btn-secondary\"},[_vm._v(_vm._s(!_vm.riskComputed.compliance_policies && !_vm.riskComputed.compliance_policies.length ? 'Add' : 'Edit')+\" Control\")])])]},proxy:true}],null,false,1678955335)},[_c('b-card-text',[_c('PoliciesTable',{attrs:{\"riskPolicies\":_vm.riskComputed.compliance_policies},on:{\"deleteControl\":_vm.updateRisk}})],1),(!_vm.riskComputed.compliance_policies && !_vm.riskComputed.compliance_policies.length)?_c('b-card-text',[_c('div',{staticClass:\"no-results text-center\"},[_c('b-icon',{attrs:{\"icon\":\"files\",\"scale\":\"5\",\"variant\":\"dark\"}}),_c('p',{staticClass:\"no-results__title\"},[_c('b',[_vm._v(\"No results found\")])]),_c('p',[_vm._v(\"Add a policy as a control to get started\")]),_c('RiskContols',{attrs:{\"riskId\":_vm.riskComputed.id,\"inline\":false}},[_c('button',{staticClass:\"btn btn-dark\"},[_vm._v(\"Add Control\")])])],1)]):_vm._e()],1)],1)],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"title\":\"Delete risk\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-1 text-center px-0\"},[_c('img',{attrs:{\"src\":require(\"@/assets/error_20.svg\"),\"width\":\"25\",\"height\":\"25\"}})]),_c('div',{staticClass:\"col\"},[_c('p',{staticClass:\"paragraph m-b-10\"},[_vm._v(\"You are about to delete the risk and romove any connections to its related controls.\")]),_c('p',{staticClass:\"paragraph mb-0\"},[_c('b',[_vm._v(\"Do you want to continue?\")])])])]),_c('Errors',{attrs:{\"errors\":_vm.errors.title}}),_c('template',{slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-link mr-2\",on:{\"click\":function($event){return _vm.$bvModal.hide(_vm.modalId)}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-dark\",on:{\"click\":_vm.submit}},[_vm._v(\"Confirm\")])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" title=\"Delete risk\")\n      .row\n        .col-md-1.text-center.px-0\n          img(src='@/assets/error_20.svg' width=\"25\" height=\"25\")\n        .col\n          p.paragraph.m-b-10 You are about to delete the risk and romove any connections to its related controls.\n          p.paragraph.mb-0\n            b Do you want to continue?\n      Errors(:errors=\"errors.title\")\n\n      template(slot=\"modal-footer\")\n        button.btn.btn-link.mr-2(@click=\"$bvModal.hide(modalId)\") Cancel\n        button.btn.btn-dark(@click=\"submit\") Confirm\n</template>\n\n<script>\n  const rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n  export default {\n    props: {\n      inline: {\n        type: Boolean,\n        default: true\n      },\n      riskId: {\n        type: Number,\n        default: true\n      },\n    },\n    data() {\n      return {\n        modalId: `modal_${rnd()}`,\n        risk: {\n          name: '',\n          description: 'N/A',\n          sections: [],\n        },\n        errors: []\n      }\n    },\n    methods: {\n      submit(e) {\n        e.preventDefault();\n        this.errors = [];\n\n        this.$emit('deleteConfirmed')\n        this.$bvModal.hide(this.modalId)\n\n        if (window.location.href === `${window.location.origin}/business/risks/${this.riskId}`) {\n          window.location.href = `${window.location.origin}/business/risks/`\n        }\n\n        // fetch(this.$store.getters.backendUrl + '/api/business/risks/' + this.riskId, {\n        //   method: 'DELETE',\n        //   headers: {'Accept': 'application/json', 'Content-Type': 'application/json'},\n        //   // body: JSON.stringify(this.risk)\n        // }).then(response => {\n        //   if (response.status === 422) {\n        //     response.json().then(errors => {\n        //       this.errors = errors\n        //       Object.keys(this.errors)\n        //         .map(prop => this.errors[prop].map(err => this.toast(`Error`, `${prop}: ${err}`)))\n        //     })\n        //   } else if (response.status === 201 || response.status === 200) {\n        //     this.$emit('saved')\n        //     this.toast('Success', 'The project has been removed')\n        //     this.$bvModal.hide(this.modalId)\n        //\n        //\n        //     // window.location.href = `${window.location.href}/create`;\n\n        //   } else {\n        //     this.toast('Error', 'Couldn\\'t submit form')\n        //   }\n        // })\n      },\n    },\n    computed: {\n\n    },\n    watch: {\n\n    },\n    components: {\n\n    }\n  }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskModalDelete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskModalDelete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RiskModalDelete.vue?vue&type=template&id=66f8ac5a&lang=pug&\"\nimport script from \"./RiskModalDelete.vue?vue&type=script&lang=js&\"\nexport * from \"./RiskModalDelete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'d-inline-block':_vm.inline}},[_c('div',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:(_vm.modalId),expression:\"modalId\"}],class:{'d-inline-block':_vm.inline}},[_vm._t(\"default\")],2),_c('b-modal',{staticClass:\"fade\",attrs:{\"id\":_vm.modalId,\"modal-class\":\"modal-select-control\",\"title\":\"Select Control(s)\"},on:{\"show\":_vm.newEtag}},[_c('ModelLoader',{attrs:{\"url\":_vm.riskId ? _vm.submitUrl : undefined,\"default\":_vm.initialrisk,\"etag\":_vm.etag},on:{\"loaded\":_vm.loadrisk}},[_c('b-row',{staticClass:\"m-t-1\",attrs:{\"no-gutters\":\"\"}},[_c('b-card',{staticStyle:{\"width\":\"100%\"}},[_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"10\"}},[_vm._v(\"Policy\")]),_c('th',{attrs:{\"width\":\"55%\"}}),_c('th',[_vm._v(\"Status\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Last modified\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Date created\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{attrs:{\"width\":\"10%\"}})])]),_c('tbody',[_vm._l((_vm.policiesComputed),function(policy,index){return _c('tr',{key:policy.id},[_c('td',[_c('b-form-checkbox',{on:{\"change\":_vm.onChange},model:{value:(_vm.form.checked[index]),callback:function ($$v) {_vm.$set(_vm.form.checked, index, $$v)},expression:\"form.checked[index]\"}})],1),_c('td',[_c('a',{staticClass:\"link custom-text\",attrs:{\"href\":(\"/business/compliance_policies/\" + (policy.id))}},[_c('img',{staticClass:\"icon-policy\",attrs:{\"src\":require(\"@/assets/policy.svg\")}}),_vm._v(_vm._s(policy.name))])]),_c('td',[_c('b-badge',{staticClass:\"status\",class:{ 'status__published': policy.status === 'published' },attrs:{\"variant\":_vm.statusVariant}},[_vm._v(_vm._s(policy.status))])],1),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm.dateToHuman(policy.updated_at)))]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm.dateToHuman(policy.created_at)))]),_c('td',[_c('div',{staticClass:\"actions\"},[_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"sm\",\"variant\":\"none\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{staticClass:\"three-dots\",attrs:{\"icon\":\"three-dots\"}})]},proxy:true}],null,true)},[_c('b-dropdown-item',{attrs:{\"href\":(\"/business/compliance_policies/\" + (policy.id))}},[_vm._v(\"Edit\")])],1)],1)])])}),(!_vm.policiesComputed.length)?_c('tr',[_c('td',{staticClass:\"text-center\",attrs:{\"colspan\":\"5\"}},[_c('h4',{staticClass:\"py-2\"},[_vm._v(\"No policy\")])])]):_vm._e()],2)])])],1)],1),_c('template',{slot:\"modal-footer\"},[_c('div',{staticClass:\"col\"},[_c('label',{staticClass:\"m-t-1 form-label font-weight-bold\"},[_vm._v(_vm._s(_vm.countSelected)+\" Items Selected\")])]),_c('div',{staticClass:\"col-justify-content-end\"},[_c('button',{staticClass:\"btn btn-link custom-text\",on:{\"click\":function($event){return _vm.$bvModal.hide(_vm.modalId)}}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn btn-dark\",on:{\"click\":_vm.submit}},[_vm._v(\"Add\")])])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div(:class=\"{'d-inline-block':inline}\")\n    div(v-b-modal=\"modalId\" :class=\"{'d-inline-block':inline}\")\n      slot\n\n    b-modal.fade(:id=\"modalId\" modal-class=\"modal-select-control\" title=\"Select Control(s)\" @show=\"newEtag\")\n      ModelLoader(:url=\"riskId ? submitUrl : undefined\" :default=\"initialrisk\" :etag=\"etag\" @loaded=\"loadrisk\")\n\n        b-row.m-t-1(no-gutters)\n          b-card(style=\"width: 100%\")\n            table.table\n              thead\n                tr\n                  th(width=\"10\") Policy\n                    <!--b-form-checkbox(v-model='form.checked[]')-->\n                  th(width=\"55%\")\n                  th Status\n                    b-icon.ml-2(icon='chevron-expand')\n                  th.text-right Last modified\n                    b-icon.ml-2(icon='chevron-expand')\n                  th.text-right Date created\n                    b-icon.ml-2(icon='chevron-expand')\n                  th(width=\"10%\")\n              tbody\n                tr(v-for=\"(policy, index) in policiesComputed\" :key=\"policy.id\")\n                  td\n                    b-form-checkbox(v-model='form.checked[index]' @change=\"onChange\")\n                  td\n                    a.link.custom-text(:href=\"`/business/compliance_policies/${policy.id}`\")\n                      img.icon-policy(src='@/assets/policy.svg')\n                      | {{ policy.name }}\n                  td\n                    b-badge.status(:variant=\"statusVariant\" :class=\"{ 'status__published': policy.status === 'published' }\") {{ policy.status }}\n                  td.text-right {{ dateToHuman(policy.updated_at) }}\n                  td.text-right {{ dateToHuman(policy.created_at) }}\n                  td\n                    .actions\n                      b-dropdown(size=\"sm\" variant=\"none\" class=\"m-0 p-0\" right)\n                        template(#button-content)\n                          b-icon.three-dots(icon=\"three-dots\")\n                        b-dropdown-item(:href=\"`/business/compliance_policies/${policy.id}`\") Edit\n                        <!--b-dropdown-item-button.delete Delete-->\n                tr(v-if=\"!policiesComputed.length\")\n                  td.text-center(colspan=5)\n                    h4.py-2 No policy\n\n      template(slot=\"modal-footer\")\n        .col\n          label.m-t-1.form-label.font-weight-bold {{ countSelected }} Items Selected\n        .col-justify-content-end\n          button.btn.btn-link.custom-text(@click=\"$bvModal.hide(modalId)\") Cancel\n          button.btn.btn-dark(@click=\"submit\") Add\n</template>\n\n<script>\n  import { DateTime } from 'luxon'\n  import EtaggerMixin from '@/mixins/EtaggerMixin'\n\n  const rnd = () => Math.random().toFixed(10).toString().replace('.', '')\n\n  const initialrisk = () => ({\n    name: \"\",\n    id: null,\n    impact: 0,\n    likelihood: 0,\n    compliance_policies: [],\n    compliance_policy_ids: []\n  })\n\n  export default {\n    mixins: [EtaggerMixin()],\n    props: {\n      risks: Array,\n      riskId: Number,\n      remindAt: String,\n      inline: {\n        type: Boolean,\n        default: true\n      },\n      risksList: Array,\n      policyId: Number,\n    },\n    data() {\n      return {\n        modalId: `modal_${rnd()}`,\n        risk: initialrisk(),\n        errors: [],\n        isActive: false,\n        options: [\n          { value: null, text: 'New Risk' },\n        ],\n        levelOptions: [\n          { value: 0, text: 'Low' },\n          { value: 1, text: 'Medium' },\n          { value: 2, text: 'High' },\n        ],\n        badgeVariant: 'secondary',\n        riskLevelName: '---',\n        form: {\n          checked: [],\n        },\n        statusVariant: 'light',\n        countSelected: 0,\n      }\n    },\n    methods: {\n      loadrisk(risk) {\n        // console.log('risk', risk)\n        // console.log('this.risk', this.risk)\n        this.risk = Object.assign({}, this.risk, risk)\n        // this.onRiskChange()\n\n        // this.options = [{ value: null, text: 'New Risk' }]\n        // this.options = this.options.concat(this.risksComputedAsOptions)\n\n        // console.log('this.form.checked', this.form.checked)\n        // console.log('policiesComputed', this.policiesComputed)\n\n        this.form.checked = this.policiesComputed.map((policy, index) => {\n          // console.log(policy, index)\n\n          let result;\n          risk.compliance_policies.forEach((el) => {\n            if (el.id === policy.id) result = true\n            else result = false\n          })\n          return result\n        })\n\n        this.countingSelected()\n\n        // console.log('this.form.checked', this.form.checked)\n      },\n      submit(e) {\n        e.preventDefault()\n        this.errors = [];\n\n        // this.risk.compliance_policy_ids = this.risk.compliance_policies.map(policy => policy.id)\n\n        this.$store\n          .dispatch('updateRisk', {...this.risk})\n          .then(response => {\n            // console.log('response', response)\n            if (response.errors) {\n\n            } else {\n              this.toast('Success', 'Risk has been created.')\n              this.$bvModal.hide(this.modalId)\n              this.newEtag()\n            }\n          })\n          .catch(error => {\n            console.error(error)\n            this.toast('Error', `Couldn't submit form! ${error}`, true)\n          })\n\n      },\n      countingSelected() {\n        // this.countSelected = this.form.checked.reduce((acc, currentValue) => currentValue ? acc++ : acc--, 0)\n        this.countSelected = 0\n        this.form.checked.forEach((el) => {\n          if (el === true) this.countSelected++\n        })\n        // console.log('this.countSelected', this.countSelected)\n      },\n      onChange(event){\n        // console.log(event)\n        // console.log('this.form.checked', this.form.checked)\n\n        this.risk.compliance_policy_ids = []\n        this.policiesComputed.forEach((policy, index) => {\n          if (this.form.checked[index]) this.risk.compliance_policy_ids.push(policy.id)\n        })\n\n        // console.log(this.risk.compliance_policy_ids)\n        this.countingSelected()\n      },\n      onRiskChange(){\n        const riskLevelNum = this.riskLevel(this.risk.likelihood, this.risk.impact)\n        this.riskLevelColor(riskLevelNum)\n        this.getRiskLevelName(riskLevelNum)\n      },\n      getRiskLevelName(num) {\n        this.riskLevelName = this.levelOptions[num].text\n      },\n      riskLevel(likelihood, impact) {\n        if ((likelihood > 0) && (impact === 2)) {\n          return 2;\n        } else if ((likelihood < 2) && (impact === 0)) {\n          return 0;\n        } else {\n          return 1;\n        }\n      },\n      riskLevelColor(num) {\n        if (num === 0) this.badgeVariant = 'success'\n        if (num === 1) this.badgeVariant = 'warning'\n        if (num === 2) this.badgeVariant = 'danger'\n      },\n      dateToHuman(value) {\n        const date = DateTime.fromJSDate(new Date(value))\n        if (!date.invalid) {\n          return date.toFormat('dd/MM/yyyy')\n        }\n        if (date.invalid) {\n          return value\n        }\n      },\n    },\n    computed: {\n      initialrisk: () => initialrisk,\n      canBeDraft() {\n        return !this.riskId || ('draft' === this.risk.status)\n      },\n      submitUrl() {\n        const toId = this.riskId ? `/${this.riskId}` : ''\n        return '/api/business/risks' + toId\n      },\n      httpMethod() {\n        return this.riskId ? 'PUT' : 'POST'\n      },\n      risksComputedAsOptions() {\n        return this.risks.map(risk => {\n          return {\n            value: risk.id, text: risk.name\n          }\n        })\n      },\n      policiesComputed() {\n        return this.$store.getters.policiesList\n      },\n    },\n    watch: {},\n    mounted() {\n\n    }\n  }\n</script>\n<style>\n  @media (min-width: 576px) {\n    .modal-select-control .modal-dialog {\n      max-width: 1200px;\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskContols.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskContols.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RiskContols.vue?vue&type=template&id=6f3fb2ff&lang=pug&\"\nimport script from \"./RiskContols.vue?vue&type=script&lang=js&\"\nexport * from \"./RiskContols.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RiskContols.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.riskPolicies.length !== 0)?_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"55%\"}},[_vm._v(\"Policy\")]),_c('th',[_vm._v(\"Status\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Last modified\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{staticClass:\"text-right\"},[_vm._v(\"Date created\"),_c('b-icon',{staticClass:\"ml-2\",attrs:{\"icon\":\"chevron-expand\"}})],1),_c('th',{attrs:{\"width\":\"10%\"}})])]),_c('tbody',_vm._l((_vm.riskPolicies),function(policy){return _c('tr',{key:policy.id},[_c('td',[_c('a',{staticClass:\"link custom-text\",attrs:{\"href\":(\"/business/compliance_policies/\" + (policy.id))}},[_c('img',{staticClass:\"icon-policy\",attrs:{\"src\":require(\"@/assets/policy.svg\")}}),_vm._v(_vm._s(policy.name))])]),_c('td',[_c('b-badge',{staticClass:\"status\",class:{ 'status__published': policy.status === 'published'},attrs:{\"variant\":_vm.statusVariant}},[_vm._v(_vm._s(policy.status))])],1),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm.dateToHuman(policy.updated_at)))]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm.dateToHuman(policy.created_at)))]),_c('td',{staticClass:\"text-right\"},[_c('div',{staticClass:\"actions\"},[_c('b-dropdown',{staticClass:\"m-0 p-0\",attrs:{\"size\":\"sm\",\"variant\":\"none\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('b-icon',{staticClass:\"three-dots\",attrs:{\"icon\":\"three-dots\"}})]},proxy:true}],null,true)},[_c('b-dropdown-item-button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteControl(policy.id)}}},[_vm._v(\"Delete\")])],1)],1)])])}),0)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div\n    table.table(v-if=\"riskPolicies.length !== 0\")\n      thead\n        tr\n          th(width=\"55%\") Policy\n          th Status\n            b-icon.ml-2(icon='chevron-expand')\n          th.text-right Last modified\n            b-icon.ml-2(icon='chevron-expand')\n          th.text-right Date created\n            b-icon.ml-2(icon='chevron-expand')\n          th(width=\"10%\")\n      tbody\n        tr(v-for=\"policy in riskPolicies\" :key=\"policy.id\")\n          td\n            a.link.custom-text(:href=\"`/business/compliance_policies/${policy.id}`\")\n              img.icon-policy(src='@/assets/policy.svg')\n              | {{ policy.name }}\n          td\n            b-badge.status(:variant=\"statusVariant\" :class=\"{ 'status__published': policy.status === 'published'}\") {{ policy.status }}\n          td.text-right {{ dateToHuman(policy.updated_at) }}\n          td.text-right {{ dateToHuman(policy.created_at) }}\n          td.text-right\n            .actions\n              b-dropdown(size=\"sm\" variant=\"none\" class=\"m-0 p-0\" right)\n                template(#button-content)\n                  b-icon.three-dots(icon=\"three-dots\")\n                <!--b-dropdown-item-button Edit-->\n                b-dropdown-item-button.delete(@click=\"deleteControl(policy.id)\") Delete\n</template>\n\n<script>\n  import { DateTime } from 'luxon'\n\n  export default {\n    props: ['riskPolicies'],\n    data() {\n      return {\n        statusVariant: 'light',\n      }\n    },\n    methods: {\n      dateToHuman(value) {\n        const date = DateTime.fromJSDate(new Date(value))\n        if (!date.invalid) {\n          return date.toFormat('dd/MM/yyyy')\n        }\n        if (date.invalid) {\n          return value\n        }\n      },\n      deleteControl(policyId) {\n        this.$emit('deleteControl', policyId)\n      },\n    },\n    computed: {\n\n    },\n    watch: {},\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoliciesTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoliciesTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PoliciesTable.vue?vue&type=template&id=33ad4c53&lang=pug&\"\nimport script from \"./PoliciesTable.vue?vue&type=script&lang=js&\"\nexport * from \"./PoliciesTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\n  .page\n    div(v-if=\"loading\")\n      Loading\n    .page-header(v-if=\"!loading\")\n      .page-header__title\n        h2\n          | {{ pageTitle }}\n          span.separator.mx-2 /\n          b {{ riskComputed.name }}\n        h2.mt-1\n          b-badge.badge-risk.custom-badge.mr-1(:variant=\"badgeVariant(riskComputed.risk_level)\")\n            b-icon-exclamation-triangle-fill.mr-2\n            | {{ showLevel(riskComputed.risk_level)  }}\n          b.risk-name {{ riskComputed.name }}\n      .page-header__actions\n        b-dropdown.actions__dropdown.actions__dropdown_tasks(variant=\"default\", right)\n          template(#button-content)\n            | Actions\n            ion-icon.ml-2(name=\"chevron-down-outline\" size=\"small\")\n          RiskModalDelete(@deleteConfirmed=\"deleteRisk\", :riskId=\"riskComputed.id\", :inline=\"false\")\n            b-dropdown-item.delete Delete risk\n    .card-body.white-card-body.card-body_full-height(v-if=\"!loading\")\n      div.mb-3\n        b-card-group(deck)\n          b-card(header-tag='header' header-class='d-flex')\n            template(#header)\n              h3.mb-0.font-weight-bold Risk Details\n              RisksAddEditModal.ml-auto(:riskId=\"riskComputed.id\" :inline=\"false\")\n                button.btn.btn-secondary Edit\n            b-card-text\n              .row\n                .col-lg-2.col-md-3.col-4.pr-0\n                  b-list-group.text-secondary\n                    b-list-group-item.border.border-white.pb-0.pt-0 Title\n                    b-list-group-item.border.border-white.pb-0 Impact\n                    b-list-group-item.border.border-white.pb-0 Likelihood\n                .col.pl-0\n                  b-list-group\n                    b-list-group-item.border.border-white.pb-0.pt-0 {{ riskComputed.name }}\n                    b-list-group-item.border.border-white.pb-0 {{ showLevel(riskComputed.impact) }}\n                    b-list-group-item.border.border-white.pb-0 {{ showLevel(riskComputed.likelihood) }}\n      div\n        b-card-group(deck)\n          b-card(header-tag='header' header-class='d-flex')\n            template(#header)\n              h3.mb-0.font-weight-bold Controls\n              RiskContols.ml-auto(:riskId=\"riskComputed.id\" :inline=\"false\")\n                button.btn.btn-secondary {{ !riskComputed.compliance_policies && !riskComputed.compliance_policies.length ? 'Add' : 'Edit' }} Control\n            b-card-text\n              PoliciesTable(:riskPolicies=\"riskComputed.compliance_policies\", @deleteControl=\"updateRisk\")\n            b-card-text(v-if=\"!riskComputed.compliance_policies && !riskComputed.compliance_policies.length\")\n              div.no-results.text-center\n                b-icon(icon=\"files\" scale=\"5\" variant=\"dark\")\n                p.no-results__title: b No results found\n                p Add a policy as a control to get started\n                RiskContols(:riskId=\"riskComputed.id\" :inline=\"false\")\n                  button.btn.btn-dark Add Control\n</template>\n\n<script>\n  import Loading from '@/common/Loading/Loading'\n  import RiskModalDelete from \"./Modals/RiskModalDelete\";\n  import RisksAddEditModal from '@/common/Modals/RisksAddEditModal'\n  import RiskContols from './Modals/RiskContols'\n  import PoliciesTable from './PoliciesTable'\n\n  export default {\n    props: ['riskId'],\n    components: {\n      Loading,\n      RiskModalDelete,\n      RisksAddEditModal,\n      RiskContols,\n      PoliciesTable\n    },\n    data() {\n      return {\n        pageTitle: 'Risk Register',\n        levelOptions: ['Low', 'Medium', 'High'],\n        risk: {\n          compliance_policies: [],\n          created_at: \"\",\n          id: null,\n          impact: null,\n          likelihood: null,\n          name: \"\",\n          risk_level: null,\n          updated_at: \"\",\n        },\n      }\n    },\n    methods: {\n      deleteRisk() {\n        console.log('delete risk', this.riskId)\n      },\n      badgeVariant(num) {\n        if (num === 0) return 'success'\n        if (num === 1) return 'warning'\n        if (num === 2) return 'danger'\n      },\n      showLevel(num) {\n        // this.riskLevelColor(num)\n        return this.levelOptions[num]\n      },\n      updateRisk(policyId) {\n        const index = this.risk.compliance_policies.findIndex(record => record.id === policyId);\n        this.riskComputed.compliance_policies.splice(index, 1)\n\n        this.riskComputed.compliance_policy_ids = this.riskComputed.compliance_policies.map(policy => policy.id)\n\n        this.$store\n          .dispatch('updateRisk', {...this.riskComputed})\n          .then(response => {\n            console.log('response', response)\n            this.toast('Success', 'Risk has been updated.')\n          })\n          .catch(error => {\n            console.error(error)\n            this.toast('Error', `Risk has not been updated. Please try again. ${error}`)\n          })\n      }\n    },\n    computed: {\n      loading() {\n        return this.$store.getters.loading;\n      },\n      riskComputed() {\n        return this.$store.getters.getCurrentRisk;\n        // const id = this.riskId;\n        // return this.$store.getters.riskById(id);\n      },\n    },\n    watch: {\n\n    },\n    mounted() {\n      // console.log(this.riskId)\n      this.$store\n        .dispatch(\"getRiskById\", { riskId: this.riskId })\n        .then((response) => {\n          // this.risk = response;\n          console.log('response mounted getRiskById', response);\n        })\n        .catch((err) => {\n          console.error(err);\n          this.toast('Error', err.message)\n        })\n        .finally(() => {\n          // AFTER PREV REQUEST SEND NEW\n          this.$store\n            .dispatch(\"getPolicies\")\n            .then((response) => {\n              console.log('response mounted getPolicies', response);\n            })\n            .catch((err) => {\n              console.error(err);\n              this.toast('Error', err.message)\n            });\n        })\n    },\n\n  };\n</script>\n\n<style scoped>\n  .custom-badge {\n    display: inline-flex !important;\n  }\n\n  .risk-name {\n    position: relative;\n    top: 2px;\n  }\n  \n  .no-results {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    min-height: 20rem;\n  }\n  \n  .no-results__title {\n    font-size: 1.3rem;\n  }\n  \n  .no-results svg {\n    margin-bottom: 4rem;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RiskDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RiskDetail.vue?vue&type=template&id=00fa8504&scoped=true&lang=pug&\"\nimport script from \"./RiskDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./RiskDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RiskDetail.vue?vue&type=style&index=0&id=00fa8504&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00fa8504\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/error_20.5080af0b.svg\";","const etagInit = () => Math.random()\n\nconst EtaggerMixin = propertyName => {\n  const prop = propertyName || 'etag',\n        refreshMethodName = 'new' + prop[0].toUpperCase() + prop.substring(1)\n  return {\n    data() {\n      return {\n        [prop]: etagInit()\n      }\n    },\n    methods: {\n      [refreshMethodName]: function() {\n        this[prop] = etagInit()\n      }\n    }\n  }\n}\n\nexport default EtaggerMixin"],"sourceRoot":""}
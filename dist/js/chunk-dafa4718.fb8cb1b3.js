(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dafa4718"],{"444f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-2 pr-0"},[s("UserAvatar",{attrs:{user:t.specialist}})],1),s("div",{staticClass:"col-sm pl-0"},[s("h3",[t._v(t._s(t.specialist.first_name)+" "+t._s(t.specialist.last_name))]),s("p",[t._v(t._s(t.specialist.address_1)+" "+t._s(t.specialist.address_2))]),s("StarRating",{attrs:{stars:4}})],1)])},i=[],o={props:{specialist:{type:Object,required:!0}}},r=o,n=s("2877"),l=Object(n["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports},a884:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("Get",{staticClass:"d-flex flex-column flex-grow-1",attrs:{etag:t.etag,project:"/api/local_projects/"+t.projectId,currentBusiness:"/api/businesses/current"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.project,i=e.currentBusiness;return[s("CommonHeader",{attrs:{title:a.title,sub:i.business_name,breadcrumbs:["Projects",a.title]}},[s("div",{staticClass:"d-flex justify-content-end"},[s("p",{staticClass:"m-b-2"},[s("ShowOnCalendarToggle",{attrs:{project:a}})],1)]),s("div",{staticClass:"d-flex"},[s("b-dropdown",{staticClass:"m-r-1",attrs:{variant:"light"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v("Actions"),s("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-down"}})]},proxy:!0}],null,!0)},[s("li",[s("LocalProjectModal",{attrs:{"project-id":a.id,inline:!1},on:{saved:t.newEtag}},[s("button",{staticClass:"dropdown-item"},[t._v("Edit")])])],1),s("li",[s("DeleteLocalProjectModal",{attrs:{project:a}})],1)]),a.visible_project?s("router-link",{staticClass:"m-r-1 btn btn-default",attrs:{to:t.viewHref(a.visible_project)}},[t._v("View Post")]):s("router-link",{staticClass:"m-r-1 btn btn-default",attrs:{to:t.postHref(a)}},[t._v("Post Project")]),s("CompleteLocalProjectModal",{attrs:{project:a},on:{saved:t.newEtag}})],1)]),s("b-tabs",{staticClass:"special-navs",attrs:{"content-class":"mt-0 h-100"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("b-tab",{attrs:{title:"Overview",active:""}},[s("div",{staticClass:"card-body white-card-body card-body_full-height"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[a.visible_project?s("ApplicationsNotice",{attrs:{project:a.visible_project}}):t._e(),t._l(a.projects,(function(e){return s("Get",{key:e.id,attrs:{etag:t.etag,marketProject:"/api/business/projects/"+e.id},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.marketProject;return[s("TimesheetsNotice",{attrs:{project:a}}),s("EndContractNotice",{attrs:{project:a},on:{saved:t.contractEnded}}),s("ChangeContractAlerts",{attrs:{project:a,for:"Business"},on:{saved:t.newEtag}})]}}],null,!0)})}))],2)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8 col-sm-12"},[s("div",{staticClass:"card"},[s("ProjectDetails",{attrs:{project:a},on:{saved:t.newEtag}})],1)]),s("div",{staticClass:"col-md-4 col-sm-12 pl-0 h-100"},[s("div",{staticClass:"card card-body_full-height h-100"},[s("div",{staticClass:"card-header d-flex justify-content-between"},[s("h3",{staticClass:"m-y-0"},[t._v("Collaborators")]),s("a",{staticClass:"link btn",on:{click:function(e){return t.viewContract()}}},[t._v("View All")])]),s("div",{staticClass:"card-body h-100"},[t.getContracts(a.projects).length?s("table",{staticClass:"rating_table"},[s("thead",[s("tr",[s("th",[t._v("Name"),s("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-expand"}})],1),s("th")])]),s("tbody",t._l(t.getContracts(a.projects),(function(e){return s("tr",{key:e.specialist.id},[s("td",[s("div",{staticClass:"d-flex align-items-center mb-3"},[s("div",[s("UserAvatar",{staticClass:"userpic_small mr-2",attrs:{user:e.specialist}})],1),s("div",{staticClass:"d-flex flex-column"},[s("b",[t._v(t._s(e.specialist.first_name)+" "+t._s(e.specialist.last_name))]),s("span",[t._v(t._s(e.specialist.seat_role))])])])]),s("td",[s("b-dropdown",{staticClass:"float-right",attrs:{text:"...",variant:"default",right:""}},[s("b-dropdown-item",{on:{click:function(s){return t.viewContract(e)}}},[t._v("View Contract")])],1)],1)])})),0)]):t._e(),t.getContracts(a.projects).length?t._e():s("div",{staticClass:"applications"},[s("div",{staticClass:"applications__body applications__body_center applications__body_m-h-200"},[s("ion-icon",{staticClass:"applications__icon m-b-10",attrs:{name:"person-circle-outline"}}),s("p",{staticClass:"applications__text"},[t._v("No collaborators")])],1)])])])])]),s("div",{staticClass:"m-t-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("DiscussionCard",{attrs:{"project-id":a.id,token:t.token}})],1)])])])]),s("b-tab",{staticClass:"h-100",attrs:{title:"Tasks"}},[s("div",{staticClass:"card-body white-card-body card-body_full-height h-100"},[s("div",{staticClass:"d-flex m-b-20"},[s("TaskFormModal",{staticClass:"m-r-1",attrs:{id:"ProjectTaskFormModal",defaults:t.taskDefaults(a)},on:{saved:t.taskSaved}},[s("button",{staticClass:"btn btn-dark"},[t._v("New Task")])]),s("b-dropdown",{staticClass:"m-r-1",attrs:{text:"Show: All Tasks",variant:"default"}},[s("b-dropdown-item",[t._v("All Tasks")]),s("b-dropdown-item",[t._v("My Tasks")]),s("b-dropdown-item",[t._v("Complete Tasks")])],1),s("button",{staticClass:"btn btn-default float-right",on:{click:function(e){t.completedTasksOpen=!1}}},[s("strong",[t._v("Collapse All")])])],1),t.incompleteTasks.length?s("TaskTable",{attrs:{tasks:t.incompleteTasks}}):s("div",{staticClass:"row h-100"},[s("div",{staticClass:"col h-100 text-center"},[s("EmptyState",{attrs:{name:"Tasks"}})],1)]),t.completedTasks.length?s("h3",{staticClass:"pointer",on:{click:function(e){t.completedTasksOpen=!t.completedTasksOpen}}},[s("span",{staticClass:"caret",class:{caret_rotated:!t.completedTasksOpen}}),t._v("Completed Tasks")]):t._e(),t.completedTasks.length?s("b-collapse",{staticClass:"m-t-1",model:{value:t.completedTasksOpen,callback:function(e){t.completedTasksOpen=e},expression:"completedTasksOpen"}},[s("TaskTable",{attrs:{tasks:t.completedTasks}})],1):t._e()],1)]),s("b-tab",{staticClass:"h-100",attrs:{title:"Documents"}},[s("DocumentList",{attrs:{project:a}})],1),s("b-tab",{staticClass:"h-100",attrs:{title:"Collaborators"}},[s("div",{staticClass:"card-body white-card-body card-body_full-height"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[t.showingContract?s("div",[t.isContractComplete(t.showingContract)?s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("Breadcrumbs",{staticClass:"m-y-1",attrs:{items:["Collaborators",t.showingContract.specialist.first_name+" "+t.showingContract.specialist.last_name]}})],1)]):s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("EndContractModal",{attrs:{project:t.showingContract},on:{saved:t.contractEnded}},[s("button",{staticClass:"btn btn-dark float-right"},[t._v("End Contract")])]),s("b-dropdown",{staticClass:"m-x-1 float-right",attrs:{text:"Actions",variant:"default"}},[s("EditRoleModal",{attrs:{specialist:t.showingContract.specialist,inline:!1},on:{saved:t.accepted}},[s("b-dropdown-item",[t._v("Set role")])],1),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"IssueModal",expression:"'IssueModal'"}]},[t._v("Report Issue")]),s("EditContractModal",{attrs:{project:t.showingContract,inline:!0},on:{saved:function(e){t.newEtag(),t.tab=0}}},[s("b-dropdown-item",[t._v("Edit Contraxt")])],1),s("b-dropdown-item",{attrs:{to:"/business/projects/"+t.showingContract.id+"/timesheets"}},[t._v("View Timesheet")])],1),s("IssueModal",{attrs:{"project-id":t.showingContract.id,token:t.token}}),s("Breadcrumbs",{staticClass:"m-y-1",attrs:{items:["Collaborators",t.showingContract.specialist.first_name+" "+t.showingContract.specialist.last_name]}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("PropertiesTable",{attrs:{title:"Contract Details",properties:t.contractDetails(t.showingContract)}},[t.isContractComplete(t.showingContract)?t._e():s("EditContractModal",{attrs:{project:t.showingContract},on:{saved:function(e){t.newEtag(),t.tab=0}}})],1)],1)])]):s("div",{staticClass:"card"},[s("div",{staticClass:"card-header d-flex justify-content-between"},[s("h3",{staticClass:"m-y-0"},[t._v("Collaborators")]),s("Get",{attrs:{etag:t.etag,specialists:"/api/business/team_members/specialists",callback:t.getSpecialistsOptions},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.specialists;return[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"AddCollaboratorModal",expression:"'AddCollaboratorModal'"}],staticClass:"btn btn-default float-right"},[t._v("Add Collaborator")]),s("b-modal",{attrs:{id:"AddCollaboratorModal",title:"Add Collaborator",project:a},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.hide;return[s("button",{staticClass:"btn btn-link",on:{click:i}},[t._v("Cancel")]),s("Post",{attrs:{action:"/api/local_projects/"+a.id+"/specialists",model:{id:t.id}},on:{saved:function(e){return t.newEtag()}}},[s("button",{staticClass:"btn btn-dark"},[t._v("Add")])])]}}],null,!0)},[s("p",[t._v("Select a user to add.")]),s("p",[s("strong",[t._v("Note: ")]),t._v("An unlimited amount of employees can be added to the project but only one specialist can be actively working on a project at a time.")]),s("InputSelect",{attrs:{options:i},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},[t._v("Select User")])],1)]}}],null,!0)})],1),s("div",{staticClass:"card-body"},[t._l(t.getContracts(a.projects),(function(e){return s("div",{key:e.specialist.id,staticClass:"card p-20"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("div",{staticClass:"d-flex align-items-center"},[s("div",[s("UserAvatar",{staticClass:"userpic_small mr-2",attrs:{user:e.specialist}})],1),s("div",{staticClass:"d-flex flex-column"},[s("b",[t._v(t._s(e.specialist.first_name)+" "+t._s(e.specialist.last_name))]),s("span",[t._v(t._s(e.specialist.seat_role))])])]),s("div",{staticClass:"d-flex justify-content-end"},[s("b-dropdown",{staticClass:"bg-white mr-2",attrs:{variant:"light",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v("Actions"),s("b-icon",{staticClass:"ml-2",attrs:{icon:"chevron-down"}})]},proxy:!0}],null,!0)},[s("b-dropdown-item",[t._v("Messages")]),s("b-dropdown-item",[t._v("Edit Permissions")])],1),s("button",{staticClass:"btn btn-default",on:{click:function(s){t.showingContract=e}}},[t._v("View Contract")])],1)])])})),t.getContracts(a.projects).length?t._e():s("div",{staticClass:"applications"},[s("div",{staticClass:"applications__body applications__body_center applications__body_m-h-200"},[s("ion-icon",{staticClass:"applications__icon m-b-10",attrs:{name:"person-circle-outline"}}),s("p",{staticClass:"applications__text"},[t._v("No collaborators")])],1)])],2)])])])])])],1)]}}])})],1)},i=[],o=s("b2a8"),r=s("0bbd"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("Get",{attrs:{applications:t.apiUrl,callback:t.getApplications},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.applications;return[a.length?s("div",{staticClass:"alert alert-warning"},[s("div",{staticClass:"d-flex justify-content-between"},[s("div",{staticClass:"d-flex align-items-center"},[s("b-icon",{staticClass:"mr-4",attrs:{icon:"exclamation-triangle-fill",scale:"2",variant:"warning"}}),s("div",[s("h4",{staticClass:"alert-heading"},[t._v(t._s(t._f("plural")("application",a))+" received.")]),s("p",{staticClass:"mb-0"},[t._v("There "+t._s(t._f("isAre")(a))+" currently "+t._s(t._f("plural")("applicant",a))+" for your project.")])])],1),s("div",[s("router-link",{staticClass:"btn btn-light mt-2",attrs:{to:t.viewPostUrl}},[t._v("View")])],1)])]):s("div",[s("Notifications",{staticClass:"m-b-20",attrs:{notify:a}},[s("router-link",{staticClass:"btn btn-light m-r-2",attrs:{to:t.viewPostUrl}},[t._v("View")])],1)],1)]}}],null,!1,1580083885)}):t._e()},l=[],c=s("8622"),d={props:{project:{type:Object,required:!0}},components:{Notifications:c["a"]},data:function(){return{}},methods:{getApplications:function(t){console.log("aap-s",t);var e={};return e="published"===this.project.status?{show:"show",mainText:"Your project is currently posted on the job board as of ".concat(this.$options.filters.asDate(this.project.created_at),"."),subText:"Keep an eye out! Specialists may reach out to you soon.",variant:"primary",dismissible:!0,icon:null,scale:2}:{show:"show",mainText:"Your posting is currently in draft",subText:"Finish the posting to send it to our job board",variant:"primary",dismissible:!0,icon:null,scale:2},e}},computed:{show:function(){return!this.project.specialist_id},apiUrl:function(){return this.$store.getters.url("URL_API_PROJECT_APPLICATIONS",this.project.id)},viewPostUrl:function(){return this.$store.getters.url("URL_PROJECT_POST",this.project.id)}}},u=d,p=s("2877"),m=Object(p["a"])(u,n,l,!1,null,null,null),v=m.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hasPendingTimesheets?s("div",{staticClass:"alert alert-warning"},[s("h4",{staticClass:"alert-heading"},[t._v("Timesheeet approval required")]),s("p",[t._v("A new timesheet submission requires approval for completion.")]),s("router-link",{staticClass:"btn btn-light",attrs:{to:t.url("URL_PROJECT_TIMESHEETS",t.project.id)}},[t._v("View")])],1):t._e()},h=[],_=s("9523"),f=s.n(_),C=s("2f62");function j(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?j(Object(s),!0).forEach((function(e){f()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var g="pending",k={props:{project:{type:Object,required:!0}},computed:w(w({},Object(C["c"])(["url"])),{},{hasPendingTimesheets:function(){return this.project.timesheets.find((function(t){return g===t.status}))}})},y=k,x=Object(p["a"])(y,b,h,!1,null,null,null),S=x.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.project.end_request?s("div",{staticClass:"alert alert-info"},[s("h4",{staticClass:"alert-heading"},[t._v("Project End")]),t.project.end_request.requester.startsWith("Specialist")?s("div",[s("p",[t._v("The specialist requested project end")]),s("EndContractModal",{attrs:{project:t.project,right:!1},on:{saved:function(e){return t.$emit("saved")},errors:function(e){return t.$emit("errors",e)}}},[s("button",{staticClass:"btn btn-light"},[t._v("Confirm")])]),s("button",{staticClass:"btn btn-light m-l-1"},[t._v("Deny")])],1):s("div",[s("p",[t._v("You have requested project end")])])]):t._e()},O=[],T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-inline-block",class:{"float-right":t.right}},[s("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],staticClass:"d-inline-block"},[t._t("default")],2),s("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"End Contract","no-stacking":""},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.hide;return[s("button",{staticClass:"btn btn-link",on:{click:a}},[t._v("Cancel")]),s("Post",{attrs:{action:t.completeUrl,model:{}},on:{saved:t.contractEnded,errors:function(e){return t.$emit("errors",e)}}},[s("button",{staticClass:"btn btn-dark"},[t._v("Confirm")])])]}}])},[s("div",{staticClass:"row m-b-20"},[s("div",{staticClass:"col-md-1 text-center px-0"},[s("b-icon",{staticClass:"mt-1 ml-3",attrs:{icon:"exclamation-triangle-fill",scale:"1.5",variant:"warning"}})],1),s("div",{staticClass:"col"},[s("p",{staticClass:"paragraph m-b-10"},[t._v("Ending this contract will remove this specialist as a collaborator to the project, revoke their permissions to access your account, and payout the full contract price.")]),s("p",{staticClass:"paragraph mb-0"},[s("b",[t._v("Do you want to continue?")])])])]),s("div",{staticClass:"card"},[s("div",{staticClass:"card-title p-20"},[s("UserAvatar",{attrs:{user:t.project.specialist}}),s("div",{staticClass:"d-block ml-3"},[s("h5",{staticClass:"mb-0 link"},[t._v(t._s(t.project.specialist.first_name)+" "+t._s(t.project.specialist.last_name))]),s("p",{staticClass:"mb-0"},[t._v(t._s(t.project.specialist.location))])]),s("div",{staticClass:"d-block ml-auto text-right"},[s("span",[t._v("Outstanding Due")]),s("h4",[t._v(t._s(t._f("usdWhole")(500)))])])],1),s("div",{staticClass:"card-body"},[s("dl",{staticClass:"row mb-0"},[s("dt",{staticClass:"col-sm-3 label"},[t._v("Project name")]),s("dd",{staticClass:"col-sm-9 text-right"},[t._v(t._s(t.project.title))])]),s("dl",{staticClass:"row mb-0"},[s("dt",{staticClass:"col-sm-3 label"},[t._v("Payment method")]),s("dd",{staticClass:"col-sm-9 text-right"},[t._v(t._s(t.readablePaymentSchedule(t.project.payment_schedule)))])]),s("dl",{staticClass:"row mb-0"},[s("dt",{staticClass:"col-sm-3 label"},[t._v("Date Issued")]),s("dd",{staticClass:"col-sm-9 text-right"})]),s("dl",{staticClass:"row mb-0"},[s("dt",{staticClass:"col-sm-3 label"},[t._v("Payment Method")]),s("dd",{staticClass:"col-sm-9 text-right"},[t._v("Transfer to Visa")])])]),s("div",{staticClass:"card-footer bg-white"},[s("p",{staticClass:"text-right text-muted mb-0"},[t._v("*Transactional fees lorem ipsum dolor.")])])])]),s("b-modal",{attrs:{id:t.modalId+"_review",title:"Write a Review"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.hide;return[s("button",{staticClass:"btn btn-link",on:{click:a}},[t._v("Cancel")]),null===t.review.value?s("button",{staticClass:"btn btn-dark",attrs:{title:"Please rate your experience",disabled:""}},[t._v("Submit")]):s("Post",{attrs:{action:t.ratingUrl,model:t.review},on:{saved:t.ratingSaved,errors:t.submitErrors}},[s("button",{staticClass:"btn btn-dark"},[t._v("Submit")])])]}}])},[s("p",[t._v("Please rate/describe your experience and leave any additional comments for the specialist!")]),s("InputRating",{attrs:{errors:t.errors.value},model:{value:t.review.value,callback:function(e){t.$set(t.review,"value",e)},expression:"review.value"}},[t._v("Rating")]),s("InputTextarea",{attrs:{errors:t.errors.review,placeholder:"Describe your overall experience and leave any notes for the specialist"},model:{value:t.review.review,callback:function(e){t.$set(t.review,"review",e)},expression:"review.review"}})],1)],1)},E=[],I={props:{project:{type:Object,required:!0},right:{type:Boolean,default:!0}},data:function(){return{modalId:"EndContractModal_"+Math.random().toFixed(12).replace(".",""),review:{value:null,review:null},errors:{}}},methods:{readablePaymentSchedule:o["b"],submitErrors:function(t){this.errors=t},contractEnded:function(){this.$emit("saved"),this.$bvModal.hide(this.modalId),this.$bvModal.show(this.modalId+"_review")},ratingSaved:function(){this.$emit("saved"),this.$bvModal.hide(this.modalId+"_review")}},computed:{submitDisabled:function(){var t=this.review.value&&this.review.value<=3,e=null===this.review.review||""===this.review.review;return null===this.review.value||t&&e},completeUrl:function(){return"/api/projects/"+this.project.id+"/end"},ratingUrl:function(){return"/api/projects/"+this.project.id+"/rating"}}},D=I,M=Object(p["a"])(D,T,E,!1,null,null,null),$=M.exports,A={props:{project:{type:Object,required:!0}},computed:{url:function(){return"/api/business/projects/"+this.project.id+"/ends/"+this.project.end_request.id}},components:{EndContractModal:$}},N=A,U=Object(p["a"])(N,P,O,!1,null,null,null),L=U.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card-header"},[s("h3",{staticClass:"mb-0"},[t._v("Project Details")]),s("LocalProjectModal",{attrs:{"project-id":t.project.id},on:{saved:function(e){return t.$emit("saved")}}},[s("button",{staticClass:"btn btn-default"},[t._v("Edit")])])],1),s("div",{staticClass:"card-body"},[s("h3"),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-3"},[t._v("Title")]),s("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.project.title))]),s("dt",{staticClass:"col-sm-3"},[t._v("Start Date")]),s("dd",{staticClass:"col-sm-9"},[t._v(t._s(t._f("asDate")(t.project.starts_on)))]),s("dt",{staticClass:"col-sm-3"},[t._v("Due Date")]),s("dd",{staticClass:"col-sm-9"},[t._v(t._s(t._f("asDate")(t.project.ends_on)))]),s("dt",{staticClass:"col-sm-3"},[t._v("Description")]),s("dd",{staticClass:"col-sm-9 mb-0"},[t._v(t._s(t.project.description))])])])])},q=[],J=s("fabf"),F={props:{project:{type:Object,required:!0}},components:{LocalProjectModal:J["a"]}},B=F,H=Object(p["a"])(B,R,q,!1,null,null,null),V=H.exports,Y=s("2814"),W=s("f774"),G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"complete"!==t.project.status?s("div",{staticClass:"d-inline-block"},[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"CompleteLocalProjectModal",expression:"'CompleteLocalProjectModal'"}],staticClass:"btn btn-dark"},[t._v("Complete Project")]),s("b-modal",{staticClass:"fade",attrs:{id:"CompleteLocalProjectModal",title:"Complete Project","hide-footer":!!t.hasSpecialist},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.hide;return[s("button",{staticClass:"btn btn-link",on:{click:a}},[t._v("Cancel")]),s("Put",{attrs:{action:t.url,model:{status:"complete"}},on:{saved:function(e){a(),t.completed()}}},[s("button",{staticClass:"btn btn-default"},[t._v("Confirm")])])]}}],null,!1,2370902607)},[t.hasSpecialist?s("div",[s("p",[t._v("⚠️")]),s("p",[t._v("The project can't be completed because there is still a contract in progres. To continue, please end the contract with:")]),s("p",[s("strong",[t._v(t._s(t.specialistName))])])]):s("div",[s("p",[t._v("✅")]),s("p",[t._v("The following project will be marked as complete.")]),s("p",[s("strong",[t._v("Do you want to continue?")])])])])],1):t._e()},z=[],Q={props:{project:{type:Object,required:!0}},methods:{completed:function(){this.toast("Success","Project completed"),this.$emit("saved"),this.redirect("/business/projects")}},computed:{url:function(){return"/api/local_projects/"+this.project.id+"/complete"},hasSpecialist:function(){return this.project.projects[0]&&this.project.projects[0].specialist_id&&this.project.projects[0].specialist},specialistName:function(){return this.hasSpecialist&&"".concat(this.hasSpecialist.first_name," ").concat(this.hasSpecialist.last_name)}}},K=Q,X=Object(p["a"])(K,G,z,!1,null,null,null),Z=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"DeleteProjectModal",expression:"'DeleteProjectModal'"}],staticClass:"dropdown-item"},[t._v("Delete")]),a("b-modal",{staticClass:"fade",attrs:{id:"DeleteProjectModal",title:"Delete Project"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var s=e.hide;return[a("button",{staticClass:"btn btn-link",on:{click:s}},[t._v("Cancel")]),t.hasSpecialist?t._e():a("Delete",{attrs:{url:t.deleteUrl},on:{deleted:t.deleted}},[a("button",{staticClass:"btn btn-dark"},[t._v("Confirm")])])]}}])},[t.hasSpecialist?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1 text-center px-0"},[a("b-icon",{staticClass:"mt-1 ml-3",attrs:{icon:"exclamation-triangle-fill",variant:"warning",width:"25",height:"25"}})],1),a("div",{staticClass:"col"},[a("div",[a("p",{staticClass:"m-b-10"},[t._v("The project can't be deleted because there is still a contract in progres. To continue, please end the contract with:")]),a("p",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.specialistName))])])])])]):a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1 text-center px-0"},[a("img",{staticClass:"mt-1 ml-3",attrs:{src:s("d1db"),width:"25",height:"25"}})]),a("div",{staticClass:"col"},[a("div",[a("p",[t._v("The following project and all of its related tasks, documents, and activity will be deleted.")]),a("p",{staticClass:"mb-0"},[a("strong",[t._v("Do you want to continue?")])])])])])])],1)},et=[],st=s("c388"),at={props:{project:{type:Object,required:!0}},methods:{deleted:function(){this.$bvModal.hide("DeleteProjectModal"),Object(st["b"])(redirectUrl,"Project deleted")}},computed:{hasSpecialist:function(){return this.project.projects[0]&&this.project.projects[0].specialist_id&&this.project.projects[0].specialist},specialistName:function(){return this.hasSpecialist&&"".concat(this.hasSpecialist.first_name," ").concat(this.hasSpecialist.last_name)},deleteUrl:function(){return"/api/local_projects/".concat(this.project.id)}}},it=at,ot=Object(p["a"])(it,tt,et,!1,null,null,null),rt=ot.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Post",{attrs:{action:t.url,method:"PUT",model:t.model},on:{saved:t.saved}},[s("b-form-checkbox",{attrs:{checked:!t.hide_on_calendar}},[t._v("Show on Calendar")])],1)},lt=[],ct=s("c973"),dt=s.n(ct),ut=s("a34a"),pt=s.n(ut),mt={props:{project:{type:Object,required:!0}},data:function(){return{hide_on_calendar:this.project.hide_on_calendar}},methods:{saved:function(t){var e=this;return dt()(pt.a.mark((function s(){var a;return pt.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.json();case 2:a=s.sent,e.hide_on_calendar=a.hide_on_calendar,e.toast("Saved","Saved");case 5:case"end":return s.stop()}}),s)})))()}},computed:{url:function(){return"/api/local_projects/"+this.project.id},model:function(){return{local_project:{hide_on_calendar:!this.hide_on_calendar}}}}},vt=mt,bt=Object(p["a"])(vt,nt,lt,!1,null,null,null),ht=bt.exports,_t=s("2ce4"),ft=s("e6d3"),Ct=s("6f33"),jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.tasks,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.body))]),s("td"),s("td",[t._v(t._s(t._f("asDate")(e.remind_at)))]),s("td",[t._v(t._s(t._f("asDate")(e.end_date)))]),s("td",[t._v("0")]),s("td",[t._v("0")])])})),0)])},wt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Name")]),s("th",[t._v("Assignee")]),s("th",[t._v("Start Date")]),s("th",[t._v("Due Date")]),s("th",[t._v("Comments")]),s("th",[t._v("Files")])])])}],gt={props:{tasks:{type:Array,required:!0}}},kt=gt,yt=Object(p["a"])(kt,jt,wt,!1,null,null,null),xt=yt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{id:"IssueModal",title:"Report Issue"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.hide;return[s("button",{staticClass:"btn btn-link",on:{click:a}},[t._v("Cancel")]),t.submitDisabled?s("button",{staticClass:"btn btn-dark",attrs:{disabled:""}},[t._v("Submit")]):s("Post",{attrs:{action:t.createUrl,model:t.formModel,headers:t.headers},on:{errors:function(e){t.errors=e},saved:t.saved}},[s("button",{staticClass:"btn btn-dark"},[t._v("Submit")])])]}}])},[s("InputSelect",{attrs:{options:t.types,errors:t.errors.type,placeholder:"Select an option"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("I want to")]),s("InputTextarea",{attrs:{errors:t.errors.issue,placeholder:"Enter the details of the issue"},model:{value:t.form.issue,callback:function(e){t.$set(t.form,"issue",e)},expression:"form.issue"}},[t._v("Details")]),s("div",{staticClass:"form-text text-muted"},[t._v("Include anything you'd like us to know so we can best help you")])],1)},Pt=[],Ot=["Halt a payment","Other"],Tt=function(){return{type:null,issue:null}},Et={props:{projectId:{type:Number,required:!0},token:{type:String,required:!0}},data:function(){return{form:Tt(),errors:{}}},methods:{saved:function(){this.toast("Success","Issue submitted"),this.$bvModal.hide("IssueModal"),Object.assign(this.form,Tt())}},computed:{formModel:function(){return{issue:"I want to: ".concat(Ot[this.form.type],"\n\n ").concat(this.form.issue)}},createUrl:function(){return"/api/projects/".concat(this.projectId,"/issues")},submitDisabled:function(){return!this.form.type||!this.form.issue||!this.form.issue.length},types:function(){return Ot},headers:function(){return{Authorization:this.token}}}},It=Et,Dt=Object(p["a"])(It,St,Pt,!1,null,null,null),Mt=Dt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"d-inline-block":t.inline}},[s("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),s("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Set Role"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.hide;return[s("button",{staticClass:"btn btn-link",on:{click:a}},[t._v("Cancel")]),s("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Set")])]}}])},[s("p",[t._v("Please confirm the applicant you wish to hire.")]),s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("SpecialistDetails",{attrs:{specialist:t.specialist}}),s("InputSelect",{attrs:{options:t.specialistRoleOptions},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},[t._v("Select Role")]),s("div",{staticClass:"form-text text-muted"},[t._v("Determines the permissions the specialist will have access to")])],1)])])],1)},At=[],Nt=s("444f"),Ut=s("07d1"),Lt=function(){return Math.random().toFixed(10).toString().replace(".","")},Rt={props:{inline:{type:Boolean,default:!0},specialist:{type:Object,required:!0}},components:{SpecialistDetails:Nt["a"]},data:function(){return{modalId:"modal_".concat(Lt()),errors:[],role:Object.keys(Ut["k"])[0]}},methods:{submit:function(t){t.preventDefault(),this.errors=[],this.$emit("saved",this.specialist.id,this.role),this.$bvModal.hide(this.modalId)}},computed:{specialistRoleOptions:function(){return Ut["k"]}}},qt=Rt,Jt=Object(p["a"])(qt,$t,At,!1,null,null,null),Ft=Jt.exports,Bt=localStorage.getItem("app.currentUser.token")?JSON.parse(localStorage.getItem("app.currentUser.token")):"",Ht=function(t){return"complete"===t.status},Vt={mixins:[Object(W["a"])()],props:{projectId:{type:Number,required:!0}},data:function(){return{tab:0,showingContract:null,role:"",id:null,modalId:null,completedTasksOpen:!0}},created:function(){this.modalId="modal_"+Math.random().toFixed(9)+Math.random().toFixed(7)},methods:{contractEnded:function(){this.newEtag(),this.toast("Success","Project End has been requested")},taskSaved:function(){this.toast("Success","Task created")},getContracts:function(t){return t.filter((function(t){return!!t.specialist}))},viewContract:function(t){this.tab=3,this.showingContract=t||null},contractDetails:o["a"],readablePaymentSchedule:o["b"],isContractComplete:Ht,getSpecialistsOptions:function(t){return t.map((function(t){var e=t.id,s=t.first_name,a=t.last_name;return{id:e,label:"".concat(s," ").concat(a)}}))},accepted:function(t,e){var s=this;fetch("".concat(this.$store.getters.backendUrl,"/api/business/specialist_roles/").concat(t),{method:"PATCH",headers:{Authorization:"".concat(Bt),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({specialist:{role:"".concat(e)}})}).then((function(t){return t.json()})).then((function(t){return s.toast("Success","The Role has been setted!")}))["catch"]((function(t){return console.error(t)}))}},computed:{taskDefaults:function(){return function(t){return{linkable_id:t.id,linkable_type:"LocalProject"}}},postHref:function(){var t=this;return function(e){return t.$store.getters.url("URL_POST_LOCAL_PROJECT",e.id)}},viewHref:function(){var t=this;return function(e){return t.$store.getters.url("URL_PROJECT_POST",e.id)}},hireUrl:function(){var t=this;return function(e){return t.$store.getters.url("URL_API_PROJECT_HIRES",e.id)}},applicationsUrl:function(){return this.$store.getters.url("URL_API_PROJECT_APPLICATIONS",this.projectId)},confirmModalId:function(){return(this.modalId||"")+"_confirm"},incompleteTasks:function(){return[]},completedTasks:function(){return[]},token:function(){return Bt}},components:{ApplicationsNotice:v,ChangeContractAlerts:_t["a"],DiscussionCard:r["a"],LocalProjectModal:J["a"],CompleteLocalProjectModal:Z,DeleteLocalProjectModal:rt,TimesheetsNotice:S,EndContractNotice:L,EndContractModal:$,ProjectDetails:V,ShowOnCalendarToggle:ht,DocumentList:Y["a"],EditContractModal:ft["a"],IssueModal:Mt,EditRoleModal:Ft,TaskFormModal:Ct["a"],TaskTable:xt}},Yt=Vt,Wt=Object(p["a"])(Yt,a,i,!1,null,null,null);e["default"]=Wt.exports},fabf:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"d-inline-block":t.inline}},[s("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),s("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:t.projectId?"Edit project":"New project"},on:{show:t.newEtag}},[s("ModelLoader",{attrs:{url:t.projectId?t.submitUrl:void 0,default:t.initialProject,etag:t.etag},on:{loaded:t.loadProject}},[s("label",{staticClass:"form-label"},[t._v("Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.project.title,expression:"project.title"}],staticClass:"form-control",attrs:{placeholder:"Enter the name of your project"},domProps:{value:t.project.title},on:{input:function(e){e.target.composing||t.$set(t.project,"title",e.target.value)}}}),s("Errors",{attrs:{errors:t.errors.title}}),s("b-row",{staticClass:"m-t-1",attrs:{"no-gutters":""}},[s("div",{staticClass:"col-sm m-r-1"},[s("label",{staticClass:"form-label"},[t._v("Start Date")]),s("DatePicker",{model:{value:t.project.starts_on,callback:function(e){t.$set(t.project,"starts_on",e)},expression:"project.starts_on"}}),s("Errors",{attrs:{errors:t.errors.starts_on}})],1),s("div",{staticClass:"col-sm"},[s("label",{staticClass:"form-label"},[t._v("Due Date")]),s("DatePicker",{model:{value:t.project.ends_on,callback:function(e){t.$set(t.project,"ends_on",e)},expression:"project.ends_on"}}),s("Errors",{attrs:{errors:t.errors.ends_on}})],1)]),s("label",{staticClass:"m-t-1 form-label"},[t._v("Description")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.project.description,expression:"project.description"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.project.description},on:{input:function(e){e.target.composing||t.$set(t.project,"description",e.target.value)}}}),s("Errors",{attrs:{errors:t.errors.description}}),s("div",{staticClass:"form-text text-muted"},[t._v("Optional")])],1),s("template",{slot:"modal-footer"},[s("button",{staticClass:"btn btn-link",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),s("Post",{attrs:{action:t.submitUrl,model:t.project,method:t.httpMethod},on:{errors:function(e){t.errors=e},saved:t.saved}},[s("button",{staticClass:"btn btn-dark"},[t._v(t._s(t.projectId?"Save":"Create"))])])],1)],2)],1)},i=[],o=s("1315"),r=s("f774"),n=function(){return Math.random().toFixed(10).toString().replace(".","")},l="MM/DD/YYYY",c=function(t,e){return{text:t,value:1+e}},d=function(){return{title:"",starts_on:null,ends_on:null,description:""}},u={mixins:[Object(r["a"])()],props:{projectId:Number,remindAt:String,inline:{type:Boolean,default:!0}},data:function(){return{modalId:"modal_".concat(n()),project:d(),errors:[]}},methods:{loadProject:function(t){this.project=Object.assign({},this.project,t)},saved:function(){this.$emit("saved"),this.toast("Success","The project has been saved"),this.$bvModal.hide(this.modalId),this.newEtag()}},computed:{initialProject:function(){return d},canBeDraft:function(){return!this.projectId||"draft"===this.project.status},submitUrl:function(){var t=this.projectId?"/".concat(this.projectId):"";return"/api/local_projects"+t},httpMethod:function(){return this.projectId?"PUT":"POST"},daysOfWeek:function(){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(c)},months:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"].map(c)},dateFormat:function(){return l}},watch:{"project.starts_on":{handler:function(t,e){var s=o["DateTime"].fromSQL(t),a=o["DateTime"].fromSQL(this.project.ends_on);!s.invalid&&(a.invalid||a.startOf("day")<s.startOf("day"))&&(this.project.ends_on=t)}}}},p=u,m=s("2877"),v=Object(m["a"])(p,a,i,!1,null,null,null);e["a"]=v.exports}}]);
//# sourceMappingURL=chunk-dafa4718.fb8cb1b3.js.map
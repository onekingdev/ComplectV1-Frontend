(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed2c9ab6"],{"05f4":function(t,e,s){"use strict";s.d(e,"d",(function(){return m})),s.d(e,"e",(function(){return p})),s.d(e,"i",(function(){return f})),s.d(e,"c",(function(){return k})),s.d(e,"h",(function(){return v})),s.d(e,"a",(function(){return h})),s.d(e,"b",(function(){return g})),s.d(e,"f",(function(){return y})),s.d(e,"g",(function(){return C}));var a=s("448a"),n=s.n(a),r=s("9523"),i=s.n(r),o=s("1315");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d=function(t){return t.hasOwnProperty("starts_on")&&t.hasOwnProperty("ends_on")},u=function(t){return t.hasOwnProperty("remindable_type")},m=function(t){return(t.end_date||t.ends_on)&&o["DateTime"].fromISO(t.end_date||t.ends_on)<=o["DateTime"].local().minus({days:1})},p=function(t){return t.repeat_every||t.repeat_on||t.repeats},b=function(t){var e=v(t.id),s=e.oid;return null!==s?t.done_occurencies.hasOwnProperty("".concat(s)):t.completed_at||t.done_at},f=function(t){return c(c(c({},t),v(t.id)),{},{start:t.starts_on||t.remind_at,end:(t.end_date||t.ends_on)+" 20:00:00",title:t.title||t.body,icons:_(t)})},k=function(t){return b(t)?"task-is-complete":m(t)?"task-is-overdue":d(t)?"task-is-project":u(t)?"task-is-task":p(t)?"task-is-repeat":""},_=function(t){return[b(t)?"checkbox-outline":m(t)?"warning":null,d(t)?"list-outline":u(t)?"checkbox-outline":null].filter((function(t){return t})).filter((function(t,e,s){return s.indexOf(t)===e}))},v=function(t){var e=n()("".concat(t).matchAll(/(\d+)_(\d+)/gi));return e&&e[0]?{taskId:+e[0][1],oid:+e[0][2]}:{taskId:t,oid:null}},h=function(t){return"pending"==t.status?"badge-secondary":"inprogress"==t.status?"badge-progress":"complete"==t.status?"badge-success":"draft"==t.status?"badge-secondary":"published"==t.status?"badge-success":m(t)?"badge-warning":""},g=function(t){return"not_started"==t.status_business?"badge-secondary":"in_progress"==t.status_business?"badge-progress":"complete"==t.status_business?"badge-success":"draft"==t.status_business?"badge-secondary":"pending"==t.status_business?"badge-light":""},y=function(t){return"CompliancePolicy"===t.linkable_type?"document-text":"AnnualReport"===t.linkable_type?"reader":"LocalProject"===t.linkable_type||"Exam"===t.linkable_type?"list-circle":""},C=function(t){return"CompliancePolicy"===t.linkable_type?"black":"AnnualReport"===t.linkable_type?"yellow":"LocalProject"===t.linkable_type?"blue":"Exam"===t.linkable_type?"red":""}},"4e64":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-inline-block":t.inline}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),a("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:"Delete task"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1 text-center px-0"},[a("img",{staticClass:"mt-1 ml-3",attrs:{src:s("d1db"),width:"25",height:"25"}})]),a("div",{staticClass:"col"},[a("p",{staticClass:"paragraph m-b-10"},[t._v(t._s(t.message))]),a("p",{staticClass:"paragraph mb-0"},[a("b",[t._v("Do you want to continue?")])])])]),a("Errors",{attrs:{errors:t.errors.title}}),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-link mr-2",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-dark",on:{click:t.submit}},[t._v("Confirm")])])],2)],1)},n=[],r=function(){return Math.random().toFixed(10).toString().replace(".","")},i={props:{inline:{type:Boolean,default:!0},linkedTo:{type:Object,required:!1,default:function(){}}},data:function(){return{modalId:"modal_".concat(r()),errors:[]}},methods:{submit:function(t){t.preventDefault(),this.errors=[],this.$emit("deleteConfirmed"),this.$bvModal.hide(this.modalId)}},computed:{message:function(){var t=this.linkedTo,e="Deleting this task will also remove all messages and documents associated with this task.";return t&&("LocalProject"===t.linkable_type&&(e="You are deleting a task that is linked to the following project: ".concat(t.linkable_name,". Deleting this task will also remove all messages and documents associated with this task. Please check whether this deletion may impact your present project progress.")),"CompliancePolicy"===t.linkable_type&&(e="You are deleting a task that is linked to the following policies: ".concat(t.linkable_name,". Deleting this task will also remove all messages and documents associated with this task. Please check whether this deletion may impact your present policies and procedures.")),"AnnualReport"===t.linkable_type&&(e="You are deleting a task that is linked to an internal review: ".concat(t.linkable_name,". Deleting this task will also remove all messages and documents associated with this task. Please check whether this deletion may impact your internal review progress.")),"Exam"===t.linkable_type&&(e="You are deleting a task that is linked to an exam management: ".concat(t.linkable_name,". Deleting this task will also remove all messages and documents associated with this task. Please check whether this deletion may impact your exam management progress."))),e}}},o=i,l=s("2877"),c=Object(l["a"])(o,a,n,!1,null,null,null);e["a"]=c.exports},"6f33":function(t,e,s){"use strict";var a,n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"d-inline-block":t.inline}},[s("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.modalId,expression:"modalId"}],class:{"d-inline-block":t.inline}},[t._t("default")],2),s("b-modal",{staticClass:"fade",attrs:{id:t.modalId,title:t.taskId?t.task.body:"New task",size:t.taskId?"xl":"md"},on:{show:t.resetTask}},[s("b-row",[s("div",{class:t.taskId?"col-lg-6 pr-2":"col"},[s("InputText",{attrs:{errors:t.errors.body},model:{value:t.task.body,callback:function(e){t.$set(t.task,"body",e)},expression:"task.body"}},[t._v("Task Name")]),t.isBusiness?s("Get",t._b({scopedSlots:t._u([{key:"default",fn:function(e){var a=e.projects,n=e.reviews,r=e.policies,i=e.exams;return[s("label",{staticClass:"m-t-1 form-label"},[t._v("Link to")]),s("ComboBox",{attrs:{value:t.linkToValue,options:t.linkToOptions(a,n,r,i),placeholder:"Select projects, internal reviews, or policies to link the task to","tree-props":{disableBranchNodes:!0}},on:{input:t.inputLinkTo}}),s("div",{staticClass:"form-text text-muted"},[t._v("Optional")]),s("Errors",{attrs:{errors:t.errors.linkable_type||t.errors.linkable_id}}),s("label",{staticClass:"m-t-1 form-label"},[t._v("Assignee")]),s("ComboBox",{attrs:{options:t.assigneeOptions,placeholder:"Select an assignee"},model:{value:t.task.assignee,callback:function(e){t.$set(t.task,"assignee",e)},expression:"task.assignee"}}),s("div",{staticClass:"form-text text-muted"},[t._v("Optional")]),s("Errors",{attrs:{errors:t.errors.assignee}})]}}],null,!1,2018879884)},"Get",t.optionsToFetch,!1)):t._e(),s("b-row",{staticClass:"m-t-1",attrs:{"no-gutters":""}},[s("div",{staticClass:"col-sm m-r-1"},[s("label",{staticClass:"form-label required"},[t._v("Start Date")]),s("DatePicker",{attrs:{options:t.datepickerOptions},model:{value:t.task.remind_at,callback:function(e){t.$set(t.task,"remind_at",e)},expression:"task.remind_at"}}),s("Errors",{attrs:{errors:t.errors.remind_at}})],1),s("div",{staticClass:"col-sm"},[s("label",{staticClass:"form-label required"},[t._v("Due Date")]),s("DatePicker",{attrs:{options:t.datepickerOptions},model:{value:t.task.end_date,callback:function(e){t.$set(t.task,"end_date",e)},expression:"task.end_date"}}),s("Errors",{attrs:{errors:t.errors.end_date}})],1)]),s("b-row",{staticClass:"m-t-1",attrs:{"no-gutters":""}},[s("div",{staticClass:"col-sm"},[s("label",{staticClass:"form-label"},[t._v("Repeats")]),s("Dropdown",{attrs:{options:t.repeatsOptions},model:{value:t.task.repeats,callback:function(e){t.$set(t.task,"repeats",e)},expression:"task.repeats"}})],1),t.task.repeats===t.repeatsValues.REPEAT_DAILY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Every")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.repeat_every,expression:"task.repeat_every"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"1000",step:"1"},domProps:{value:t.task.repeat_every},on:{input:function(e){e.target.composing||t.$set(t.task,"repeat_every",e.target.value)}}}),s("div",{staticClass:"form-text"},[t._v("Day(s)")])]):t._e(),t.task.repeats===t.repeatsValues.REPEAT_WEEKLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Every")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.repeat_every,expression:"task.repeat_every"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"1000",step:"1"},domProps:{value:t.task.repeat_every},on:{input:function(e){e.target.composing||t.$set(t.task,"repeat_every",e.target.value)}}}),s("div",{staticClass:"form-text"},[t._v("Week(s)")])]):t._e(),t.task.repeats===t.repeatsValues.REPEAT_WEEKLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Day")]),s("Dropdown",{attrs:{options:t.daysOfWeek},model:{value:t.task.repeat_on,callback:function(e){t.$set(t.task,"repeat_on",e)},expression:"task.repeat_on"}})],1):t._e(),t.task.repeats===t.repeatsValues.REPEAT_MONTHLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Every")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.repeat_every,expression:"task.repeat_every"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"1000",step:"1"},domProps:{value:t.task.repeat_every},on:{input:function(e){e.target.composing||t.$set(t.task,"repeat_every",e.target.value)}}}),s("div",{staticClass:"form-text"},[t._v("Month(s)")])]):t._e(),t.task.repeats===t.repeatsValues.REPEAT_MONTHLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("On")]),s("Dropdown",{attrs:{options:["Day","First","Second","Third","Fourth"]},model:{value:t.task.on_type,callback:function(e){t.$set(t.task,"on_type",e)},expression:"task.on_type"}})],1):t._e(),t.task.repeats===t.repeatsValues.REPEAT_MONTHLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Day")]),"Day"===t.task.on_type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.repeat_on,expression:"task.repeat_on"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"31",step:"1"},domProps:{value:t.task.repeat_on},on:{input:function(e){e.target.composing||t.$set(t.task,"repeat_on",e.target.value)}}}):s("Dropdown",{attrs:{options:t.daysOfWeek},model:{value:t.task.repeat_on,callback:function(e){t.$set(t.task,"repeat_on",e)},expression:"task.repeat_on"}})],1):t._e(),t.task.repeats===t.repeatsValues.REPEAT_YEARLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Every")]),s("Dropdown",{attrs:{options:t.months},model:{value:t.task.repeat_every,callback:function(e){t.$set(t.task,"repeat_every",e)},expression:"task.repeat_every"}})],1):t._e(),t.task.repeats===t.repeatsValues.REPEAT_YEARLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("On")]),s("Dropdown",{attrs:{options:["Day","First","Second","Third","Fourth"]},model:{value:t.task.on_type,callback:function(e){t.$set(t.task,"on_type",e)},expression:"task.on_type"}})],1):t._e(),t.task.repeats===t.repeatsValues.REPEAT_YEARLY?s("div",{staticClass:"col-sm m-l-1"},[s("label",{staticClass:"form-label"},[t._v("Day")]),"Day"===t.task.on_type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.repeat_on,expression:"task.repeat_on"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"31",step:"1"},domProps:{value:t.task.repeat_on},on:{input:function(e){e.target.composing||t.$set(t.task,"repeat_on",e.target.value)}}}):s("Dropdown",{attrs:{options:t.daysOfWeek},model:{value:t.task.repeat_on,callback:function(e){t.$set(t.task,"repeat_on",e)},expression:"task.repeat_on"}})],1):t._e()]),s("Errors",{attrs:{errors:t.errors.repeats||t.errors.repeat_every||t.errors.repeat_on||t.errors.on_type}}),t.task.repeats?s("b-row",{attrs:{"no-gutters":""}},[s("div",{staticClass:"col-sm-6 m-r-1"},[s("label",{staticClass:"form-label"},[t._v("End By Date")]),s("DatePicker",{model:{value:t.task.end_by,callback:function(e){t.$set(t.task,"end_by",e)},expression:"task.end_by"}}),s("Errors",{attrs:{errors:t.errors.end_by}})],1)]):t._e(),s("InputTextarea",{staticClass:"m-t-1",attrs:{rows:t.taskId?7:3,errors:t.errors.description},model:{value:t.task.description,callback:function(e){t.$set(t.task,"description",e)},expression:"task.description"}},[t._v("Description")]),s("div",{staticClass:"form-text text-muted"},[t._v("Optional")])],1),t.taskId?s("div",{staticClass:"col-lg-6 pl-2"},[s("div",{staticClass:"card-body white-card-body messages-border h-100 p-0"},[s("b-tabs",{staticClass:"special-navs-messages p-0",attrs:{"content-class":"m-20"}},[s("b-tab",{ref:"comments",attrs:{title:"Comments",active:""}},[s("b-row",[s("div",{staticClass:"col text-center"},[s("Get",{attrs:{messages:"/api/reminders/"+t.taskId+"/messages",etag:t.etagMessages},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.messages;return[s("div",{staticClass:"card-body p-0"},[s("Messages",{ref:"Messages",attrs:{messages:a},on:{created:t.scrollMessages}})],1)]}}],null,!1,3256674839)})],1)])],1),s("b-tab",{attrs:{title:"Files"}},[s("b-row",[s("div",{staticClass:"col"},[s("div",{staticClass:"card-body p-0"},[s("b-form-group",[s("label",[s("a",{staticClass:"btn btn-default"},[t._v("Upload File")]),s("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"file"}})]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 m-b-1"},[s("div",{staticClass:"file-card"},[s("div",[s("b-icon",{staticClass:"file-card__icon",attrs:{icon:"file-earmark-text-fill"}})],1),s("div",{staticClass:"ml-0 mr-auto"},[s("p",{staticClass:"file-card__name"},[t._v("Document.pdf")]),s("a",{staticClass:"file-card__link link",attrs:{href:"#",target:"_blank"}},[t._v("Download")])]),s("div",{staticClass:"ml-auto my-auto align-self-start actions"},[s("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"sm",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!1,2038261878)},[s("b-dropdown-item",{staticClass:"delete"},[t._v("Delete")])],1)],1)])])])])],1)])])],1)],1),s("hr",{staticClass:"m-0"}),s("b-row",[s("div",{staticClass:"col"},[s("div",{staticClass:"card-body p-20 position-relative"},[s("label",{staticClass:"form-label"},[t._v("Comment")]),s("Tiptap",{model:{value:t.message.message,callback:function(e){t.$set(t.message,"message",e)},expression:"message.message"}}),s("Errors",{attrs:{errors:t.messageErrors.message}}),s("Post",{attrs:{action:"/api/reminders/"+t.taskId+"/messages",model:{message:t.message}},on:{errors:function(e){t.messageErrors=e},saved:t.messageSaved}},[s("button",{staticClass:"btn btn-primary save-comment-btn"},[t._v("Send")])])],1)])])],1)]):t._e()]),t.taskId?t._e():s("template",{slot:"modal-footer"},[s("div",{staticClass:"d-flex justify-content-between",staticStyle:{width:"100%"}},[s("div",[s("button",{staticClass:"btn btn-link m-r-1",on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Cancel")]),s("button",{staticClass:"btn btn-dark",on:{click:function(e){return t.submit()}}},[t._v("Save")])])])]),t.task.done_at&&t.taskId?s("template",{slot:"modal-footer"},[s("span",{staticClass:"mr-2"},[s("b-icon",{staticClass:"m-r-1 pointer done_task",attrs:{icon:"check-circle-fill"}}),s("b",[t._v("Completed on "+t._s(t._f("asDate")(t.task.done_at)))])],1),s("button",{staticClass:"btn btn-default",on:{click:function(e){return t.toggleDone(t.task)}}},[t._v("Reopen")])]):t.taskId?s("template",{slot:"modal-footer"},[null===t.occurenceId?s("TaskDeleteConfirmModal",{staticClass:"mr-auto",attrs:{inline:!1},on:{deleteConfirmed:function(e){return t.deleteTask(t.task)}}},[s("button",{staticClass:"btn btn-outline-danger"},[t._v("Delete Task")])]):t.taskId?s("b-dropdown",{staticClass:"mr-auto",attrs:{variant:"outline-danger",text:"Delete Task"}},[s("TaskDeleteConfirmModal",{attrs:{inline:!1},on:{deleteConfirmed:function(e){return t.deleteTask(t.task,!0)}}},[s("b-dropdown-item",[t._v("Delete Occurence")])],1),s("TaskDeleteConfirmModal",{attrs:{inline:!1},on:{deleteConfirmed:function(e){return t.deleteTask(t.task)}}},[s("b-dropdown-item",[t._v("Delete Series")])],1)],1):t._e(),s("button",{staticClass:"btn btn-default",on:{click:function(e){return t.toggleDone(t.task)}}},[t._v("Mark as Complete")]),t.taskId?null===t.occurenceId?s("button",{staticClass:"btn btn-dark",on:{click:function(e){return t.submit(!0)}}},[t._v("Save")]):s("b-dropdown",{staticClass:"font-weight-bold",attrs:{variant:"dark",text:"Save"}},[s("b-dropdown-item",{on:{click:function(e){return t.submit(!0)}}},[t._v("Save Occurence")]),s("b-dropdown-item",{on:{click:function(e){return t.submit()}}},[t._v("Save Series")])],1):s("button",{staticClass:"btn btn-dark",on:{click:function(e){return t.submit()}}},[t._v("Create")])],1):t._e()],2)],1)},r=[],i=s("278c"),o=s.n(i),l=s("9523"),c=s.n(l),d=s("1315"),u=s("05f4"),m=s("c6bb"),p=s("66d1"),b=s("f774"),f=s("4e64");function k(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function _(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?k(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var v=function(){return Math.random().toFixed(10).toString().replace(".","")},h=function(t){return{id:t,label:t}},g=function(t,e){return{text:t,value:1+e}},y=function(t){return _({body:null,linkable_id:null,linkable_type:null,assignee:null,remind_at:null,end_date:null,end_by:null,repeats:C,repeat_every:null,repeat_on:null,on_type:null,description:""},t||{})},C=null,w="Daily",x="Weekly",O="Monthly",D="Yearly",E=(a={},c()(a,C,"Does not repeat"),c()(a,w,"Daily"),c()(a,x,"Weekly"),c()(a,O,"Monthly"),c()(a,D,"Yearly"),a),T=[C,w,x,O,D],P={mixins:[Object(b["a"])("etagMessages")],props:{id:String,taskId:Number,occurenceId:Number,remindAt:String,inline:{type:Boolean,default:!0},defaults:{type:Object,default:function(){return{}}}},data:function(){return{modalId:this.id||"modal_".concat(v()),task:y(this.defaults),errors:[],message:{message:null},messageErrors:{}}},methods:{messageSaved:function(){this.toast("Comment sent"),this.newEtagMessages(),this.message.message=null,this.messageErrors={},this.scrollMessages()},scrollMessages:function(){var t=this;this.$nextTick((function(){var e=t.$refs.Messages.$refs.MessagesContainer;setTimeout((function(){return e.scrollTop=e.scrollHeight}),500)}))},linkToOptions:function(t,e,s,a){var n=function(t,e){return function(s){var a=s[t],n=s.id;return{id:"".concat(e,"|").concat(n),label:a}}},r=function(t,e,s,a){return _(_({},h(t)),{},{children:e.map(n(a,s))})};return[r("Projects",t||[],"LocalProject","title"),r("Internal Reviews",e||[],"AnnualReport","name"),r("Policies",s||[],"CompliancePolicy","name"),r("Exams",a||[],"Exam","name")]},inputLinkTo:function(t){var e=t.split("|"),s=o()(e,2),a=s[0],n=s[1];this.task.linkable_type=a,this.task.linkable_id=n},deleteTask:function(t,e){var s=this,a=e?"?oid=".concat(this.occurenceId):"";fetch(this.$store.getters.backendUrl+"/api/reminders/"+this.taskId+a,_({method:"DELETE"},this.$store.getters.authHeaders)).then((function(t){s.$emit("saved"),s.$router.push("/business")}))},toggleDone:function(t){var e=this,s=Object(u["h"])(t.id),a=s.taskId,n=s.oid,r=null!==n?"&oid=".concat(n):"",i=(!t.done_at).toString(),o=null!==n?"&src_id=".concat(this.taskId):"";fetch("".concat(this.$store.getters.backendUrl,"/api/reminders/").concat(a,"?done=").concat(i).concat(r).concat(o),{method:"POST",headers:_(_({},this.$store.getters.authHeaders.headers),{},{"Content-Type":"application/json"})}).then((function(t){e.$emit("saved"),e.toast("Task saved"),e.$bvModal.hide(e.modalId)}))},submit:function(t){var e=this;this.errors=[];var s=!t&&this.taskId?"/".concat(this.taskId):"",a=t?"?oid=".concat(this.occurenceId,"&src_id=").concat(this.taskId):"";fetch(this.$store.getters.backendUrl+"/api/reminders"+s+a,{method:"POST",headers:_(_({},this.$store.getters.authHeaders.headers),{},{"Content-Type":"application/json"}),body:JSON.stringify(this.task)}).then((function(t){422===t.status?t.json().then((function(t){return e.errors=t.errors})):201===t.status||200===t.status?(e.$emit("saved"),e.toast("Success","The task has been saved"),e.$bvModal.hide(e.modalId),e.resetTask()):e.toast("Error","Couldn't submit form")}))},resetTask:function(){var t=this;if(this.taskId)fetch("".concat(this.$store.getters.backendUrl,"/api/reminders/").concat(this.taskId),_({method:"GET"},this.$store.getters.authHeaders)).then((function(t){return t.json()})).then((function(e){return Object.assign(t.task,e)}));else{var e=this.remindAt?{remind_at:this.remindAt}:{};this.task=y(_(_({},this.defaults),e))}}},computed:{linkToValue:function(){return this.task.linkable_type&&this.task.linkable_id?"".concat(this.task.linkable_type,"|").concat(this.task.linkable_id):null},optionsToFetch:function(){return this.isBusiness?{projects:"/api/local_projects",reviews:"/api/business/annual_reports",policies:"/api/business/compliance_policies",exams:"/api/business/exams"}:{}},daysOfWeek:function(){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(g)},months:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"].map(g)},repeatsValues:function(){return{REPEAT_NONE:C,REPEAT_DAILY:w,REPEAT_WEEKLY:x,REPEAT_MONTHLY:O,REPEAT_YEARLY:D}},repeatsOptions:function(){return T.map((function(t){return{value:t,text:E[t]}}))},isBusiness:function(){return"business"===this.$store.getters.userType},assigneeOptions:function(){return["John","Doe","Another specialist"].map(h)},datepickerOptions:function(){return{min:(new Date).toISOString()}},editorToolbar:function(){return[["bold","italic","underline"],["blockquote"],[{list:"bullet"}],["link"]]}},watch:{"task.remind_at":{handler:function(t,e){var s=d["DateTime"].fromSQL(t),a=d["DateTime"].fromSQL(this.task.end_date);!s.invalid&&(a.invalid||a.startOf("day")<s.startOf("day"))&&(this.task.end_date=t)}}},components:{Messages:m["a"],Tiptap:p["a"],TaskDeleteConfirmModal:f["a"]}},j=P,I=s("2877"),$=Object(I["a"])(j,n,r,!1,null,null,null);e["a"]=$.exports},c6bb:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.messages.length?t._e():s("div",{staticClass:"messages justify-content-center align-items center text-center"},[s("h4",[t._v("No Comments to Display")]),s("p",{staticClass:"mb-0"},[t._v("Type in the comment box below to get started")])]),t.messages&&t.messages.length?s("div",{ref:"MessagesContainer",staticClass:"messages"},t._l(t.messages,(function(e,a){return s("div",{key:a,staticClass:"message pb-0"},[s("div",{staticClass:"d-flex align-items-start"},[s("UserAvatar",{attrs:{user:e.sender}}),s("div",{staticClass:"d-block text-left"},[s("p",{staticClass:"message__user-name"},[t._v(t._s(e.sender.first_name)+" "+t._s(e.sender.last_name)+" commented.")]),s("p",{staticClass:"message__comment",domProps:{innerHTML:t._s(e.message)}}),s("div",{staticClass:"row",class:e.file_data?"m-t-10":""},[e.file_data?[s("div",{staticClass:"col-12",class:1!==e.file_data.length?"m-b-1":""},[s("div",{staticClass:"file-card"},[s("div",[s("b-icon",{staticClass:"file-card__icon",attrs:{icon:"file-earmark-text-fill","font-scale":"2"}})],1),s("div",{staticClass:"ml-0 mr-auto"},[s("p",{staticClass:"file-card__name"},[t._v(t._s(e.file_data.metadata?e.file_data.metadata.filename:""))]),s("a",{staticClass:"file-card__link link",attrs:{href:"/uploads/store/"+e.file_data.id,target:"_blank"}},[t._v("Download")])]),s("div",{staticClass:"ml-auto align-self-start actions"},[s("b-dropdown",{staticClass:"m-0 p-0",attrs:{size:"sm",variant:"none",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!0)},[s("b-dropdown-item",{staticClass:"delete",on:{click:function(s){return t.removeFile(e.id)}}},[t._v("Delete file")])],1)],1)])])]:t._e()],2)]),s("div",{staticClass:"d-block text-right ml-auto"},[s("p",{staticClass:"message__date"},[t._v(t._s(t._f("asDate")(e.created_at)))])])],1)])})),0):t._e()])},n=[],r=s("c973"),i=s.n(r),o=s("a34a"),l=s.n(o),c=s("1315"),d=c["DateTime"].now().toLocaleString(c["DateTime"].DATE_FULL),u={props:{messages:{type:Array,required:!0}},data:function(){return{}},created:function(){this.$emit("created")},methods:{removeFile:function(t,e){return i()(l.a.mark((function s(){return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:({id:t,file:{id:e}});case 1:case"end":return s.stop()}}),s)})))()},calcDate:function(t){return d-t}}},m=u,p=s("2877"),b=Object(p["a"])(m,a,n,!1,null,"35f1afaa",null);e["a"]=b.exports},d1db:function(t,e,s){t.exports=s.p+"img/error_20.5080af0b.svg"},f774:function(t,e,s){"use strict";var a=s("9523"),n=s.n(a),r=function(){return Math.random()},i=function(t){var e=t||"etag",s="new"+e[0].toUpperCase()+e.substring(1);return{data:function(){return n()({},e,r())},methods:n()({},s,(function(){this[e]=r()}))}};e["a"]=i}}]);
//# sourceMappingURL=chunk-ed2c9ab6.6bf16cb3.js.map